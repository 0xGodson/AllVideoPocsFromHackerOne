{"id":144485,"global_id":"Z2lkOi8vaGFja2Vyb25lL1JlcG9ydC8xNDQ0ODU=","url":"https://hackerone.com/reports/144485","title":"Heap corruption in string.c tr_trans() due to undersized buffer","state":"Closed","substate":"informative","readable_substate":"Informative","created_at":"2016-06-13T14:41:34.582Z","submitted_at":"2016-06-13T14:41:34.582Z","is_member_of_team?":false,"reporter":{"disabled":false,"username":"guido","url":"/guido","profile_picture_urls":{"small":"https://profile-photos.hackerone-user-content.com/variants/000/002/983/e55b0b2324777fb7efc2de4212fd8d337ca816bd_original.jpg/3afcb5c896247e7ee8ada31b1c1eb8657e22241f911093acfe4ec7e97a3a959a"},"is_me?":false,"cleared":false,"hackerone_triager":false,"hacker_mediation":false},"team":{"id":7724,"url":"https://hackerone.com/ruby","handle":"ruby","profile_picture_urls":{"small":"https://profile-photos.hackerone-user-content.com/variants/000/007/724/bb067434deef370d6a0b16c2cbbc030b57c75e92_original.png/3afcb5c896247e7ee8ada31b1c1eb8657e22241f911093acfe4ec7e97a3a959a","medium":"https://profile-photos.hackerone-user-content.com/variants/000/007/724/bb067434deef370d6a0b16c2cbbc030b57c75e92_original.png/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"permissions":[],"submission_state":"open","default_currency":"usd","awards_miles":false,"offers_bounties":true,"state":"public_mode","only_cleared_hackers":false,"profile":{"name":"Ruby","twitter_handle":"","website":"https://www.ruby-lang.org","about":"A Programmer's Best Friend"}},"has_bounty?":false,"in_validation?":false,"rejected_anc_report_that_can_be_sent_back_to_anc_triagers?":false,"can_view_team":true,"can_view_report":true,"is_external_bug":false,"is_published":false,"is_participant":false,"stage":4,"public":true,"visibility":"full","cve_ids":[],"singular_disclosure_disabled":true,"disclosed_at":"2016-06-21T00:57:04.703Z","bug_reporter_agreed_on_going_public_at":"2016-06-17T23:49:56.862Z","team_member_agreed_on_going_public_at":"2016-06-21T00:57:04.649Z","comments_closed?":false,"facebook_team?":false,"team_private?":false,"vulnerability_information":"(originally send by e-mail on 6 Jun 2016)\n\nConfigure with ASAN AddressSanitizer:\n\n```\nmkdir install; CFLAGS=\"-fsanitize=address\" ./configure\n--disable-install-doc --disable-install-rdoc --disable-install-capi\n-prefix=`realpath ./install` \u0026\u0026 make -j4 \u0026\u0026 make install\n```\n\nThen execute:\n\n```\n$ ./ruby -e '\"a\".encode(\"utf-32\").tr(\"b\".encode(\"utf-32\"),\n\"c\".encode(\"utf-32\"))'\n=================================================================\n==17122==ERROR: AddressSanitizer: heap-buffer-overflow on address\n0x602000014a98 at pc 0x7ff04065cf01 bp 0x7ffdfe7629b0 sp 0x7ffdfe7629a8\nWRITE of size 4 at 0x602000014a98 thread T0\n...\n...\n```\n\nThe actual corruption occurs here:\n\n```c\n6196     TERM_FILL(t, rb_enc_mbminlen(enc));\n```\n\nGuido","vulnerability_information_html":"\u003cp\u003e(originally send by e-mail on 6 Jun 2016)\u003c/p\u003e\n\n\u003cp\u003eConfigure with ASAN AddressSanitizer:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003emkdir install; CFLAGS=\u0026quot;-fsanitize=address\u0026quot; ./configure\n--disable-install-doc --disable-install-rdoc --disable-install-capi\n-prefix=`realpath ./install` \u0026amp;\u0026amp; make -j4 \u0026amp;\u0026amp; make install\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eThen execute:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003e$ ./ruby -e \u0026#39;\u0026quot;a\u0026quot;.encode(\u0026quot;utf-32\u0026quot;).tr(\u0026quot;b\u0026quot;.encode(\u0026quot;utf-32\u0026quot;),\n\u0026quot;c\u0026quot;.encode(\u0026quot;utf-32\u0026quot;))\u0026#39;\n=================================================================\n==17122==ERROR: AddressSanitizer: heap-buffer-overflow on address\n0x602000014a98 at pc 0x7ff04065cf01 bp 0x7ffdfe7629b0 sp 0x7ffdfe7629a8\nWRITE of size 4 at 0x602000014a98 thread T0\n...\n...\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eThe actual corruption occurs here:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight c\"\u003e\u003ccode\u003e\u003cspan class=\"mi\"\u003e6196\u003c/span\u003e     \u003cspan class=\"nf\"\u003eTERM_FILL\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003et\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003erb_enc_mbminlen\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eenc\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eGuido\u003c/p\u003e\n","weakness":{"id":2,"name":"Memory Corruption - Generic"},"original_report_id":null,"original_report_url":null,"attachments":[],"allow_singular_disclosure_at":null,"vote_count":2,"voters":["noob1234","dyabla"],"structured_scope":null,"abilities":{"assignable_team_members":[],"assignable_team_member_groups":[]},"can_edit_custom_fields_attributes":false,"activities":[{"id":1012201,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"We consider this a severe but usual bug, not a vulnerability.","markdown_message":"\u003cp\u003eWe consider this a severe but usual bug, not a vulnerability.\u003c/p\u003e\n","automated_response":false,"created_at":"2016-06-13T23:57:41.373Z","updated_at":"2016-06-13T23:57:41.373Z","actor":{"username":"shugo","cleared":false,"url":"/shugo","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/076/177/c63f990ae1ef62a77c2ff1e5b2db5e4dd3db2557_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"ruby","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":1013334,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Ok. I guess you can close it then.","markdown_message":"\u003cp\u003eOk. I guess you can close it then.\u003c/p\u003e\n","automated_response":false,"created_at":"2016-06-14T16:50:10.634Z","updated_at":"2016-06-14T16:50:10.634Z","actor":{"username":"guido","cleared":false,"url":"/guido","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/002/983/e55b0b2324777fb7efc2de4212fd8d337ca816bd_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"ruby","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":1013853,"is_internal":false,"editable":false,"type":"Activities::BugInformative","message":"Closing as informative.  Thanks for the report!","markdown_message":"\u003cp\u003eClosing as informative.  Thanks for the report!\u003c/p\u003e\n","automated_response":false,"created_at":"2016-06-14T21:11:37.216Z","updated_at":"2016-06-14T21:11:37.216Z","actor":{"username":"tenderlove","cleared":false,"url":"/tenderlove","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/003/318/60d828744b5d16813ecbf975fdc453dc4a933f4f_original.png/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"ruby","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":1020461,"is_internal":false,"editable":false,"type":"Activities::AgreedOnGoingPublic","message":"","markdown_message":"","automated_response":false,"created_at":"2016-06-17T23:49:56.899Z","updated_at":"2016-06-17T23:49:56.899Z","first_to_agree":true,"actor":{"username":"guido","cleared":false,"url":"/guido","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/002/983/e55b0b2324777fb7efc2de4212fd8d337ca816bd_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"ruby","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":1025855,"is_internal":false,"editable":false,"type":"Activities::AgreedOnGoingPublic","message":"","markdown_message":"","automated_response":false,"created_at":"2016-06-21T00:57:04.671Z","updated_at":"2016-06-21T00:57:04.671Z","actor":{"username":"shugo","cleared":false,"url":"/shugo","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/076/177/c63f990ae1ef62a77c2ff1e5b2db5e4dd3db2557_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"ruby","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":1025856,"is_internal":false,"editable":false,"type":"Activities::ReportBecamePublic","message":"","markdown_message":"","automated_response":false,"created_at":"2016-06-21T00:57:04.720Z","updated_at":"2016-06-21T00:57:04.720Z","actor":{"username":"shugo","cleared":false,"url":"/shugo","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/076/177/c63f990ae1ef62a77c2ff1e5b2db5e4dd3db2557_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"ruby","actor_is_team_member":true,"actor_is_concealed_member":false}],"activity_page_count":1,"activity_page_number":1,"summaries":[{"category":"team","can_view?":true,"can_create?":false},{"category":"researcher","can_view?":true,"can_create?":false}]}