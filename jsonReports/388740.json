{"id":388740,"global_id":"Z2lkOi8vaGFja2Vyb25lL1JlcG9ydC8zODg3NDA=","url":"https://hackerone.com/reports/388740","title":"GitHub API Key for BrewTestBot is publicly exposed","state":"Closed","substate":"resolved","severity_rating":"critical","readable_substate":"Resolved","created_at":"2018-07-31T05:47:18.646Z","submitted_at":"2018-07-31T05:47:18.646Z","is_member_of_team?":false,"reporter":{"disabled":false,"username":"ejholmes","url":"/ejholmes","profile_picture_urls":{"small":"https://profile-photos.hackerone-user-content.com/variants/000/160/627/92f28d0b4c250aed2b781af48097552c8f9413ed_original.jpeg/3afcb5c896247e7ee8ada31b1c1eb8657e22241f911093acfe4ec7e97a3a959a"},"is_me?":false,"cleared":false,"hackerone_triager":false,"hacker_mediation":false},"team":{"id":19399,"url":"https://hackerone.com/homebrew","handle":"homebrew","profile_picture_urls":{"small":"https://profile-photos.hackerone-user-content.com/variants/000/019/399/2f26b1d3c096d89ed989900225c128f670ab0ef0_original.png/3afcb5c896247e7ee8ada31b1c1eb8657e22241f911093acfe4ec7e97a3a959a","medium":"https://profile-photos.hackerone-user-content.com/variants/000/019/399/2f26b1d3c096d89ed989900225c128f670ab0ef0_original.png/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"permissions":[],"submission_state":"open","default_currency":"usd","awards_miles":false,"offers_bounties":false,"state":"public_mode","only_cleared_hackers":false,"profile":{"name":"Homebrew","twitter_handle":"MacHomebrew","website":"https://brew.sh","about":"The missing package manager for macOS (and Linux)"}},"has_bounty?":false,"in_validation?":false,"rejected_anc_report_that_can_be_sent_back_to_anc_triagers?":false,"can_view_team":true,"can_view_report":true,"is_external_bug":false,"is_published":false,"is_participant":false,"stage":4,"public":true,"visibility":"full","cve_ids":[],"singular_disclosure_disabled":false,"disclosed_at":"2018-08-11T13:57:57.996Z","bug_reporter_agreed_on_going_public_at":"2018-08-11T00:33:20.808Z","team_member_agreed_on_going_public_at":"2018-08-11T13:57:57.884Z","comments_closed?":false,"facebook_team?":false,"team_private?":false,"vulnerability_information":"Hello!\n\nWhile browsing through some old reports, I found that https://jenkins.brew.sh was publicly accessible. I got curious when I saw one of the [brew bottle builds](https://jenkins.brew.sh/job/Homebrew%20Bottles/33255/console) doing a `git push` to BrewTestBot/homebrew-core, and wondered if the credentials to make authenticated pushes were accessible.\n\nSure enough, you can view environment variables for the build on [this page](https://jenkins.brew.sh/job/Homebrew%20Bottles/33255/injectedEnvVars/), which includes a `HOMEBREW_GITHUB_API_TOKEN` environment variable.\n\nThis API token belongs to the [BrewTestBot](https://github.com/BrewTestBot) user on GitHub, and this API key allows me to commit to the `BrewTestBot/homebrew-core` repository:\n\n```\n$ export GITHUB_API_TOKEN=\u003cgithub token from above\u003e\n$ curl https://api.github.com/repos/BrewTestBot/homebrew-core/git/blobs -u $GITHUB_API_TOKEN:x-oauth-basic -d '{\"content\":\"test\"}' -H \"Content-Type: application/json\"\n{\n  \"sha\": \"30d74d258442c7c65512eafab474568dd706c430\",\n  \"url\": \"https://api.github.com/repos/BrewTestBot/homebrew-core/git/blobs/30d74d258442c7c65512eafab474568dd706c430\"\n}\n```\n\n## Impact\n\nBased on the purpose of `BrewTestBot`, this might be entirely intended, but if the GitHub access token has overly permissive scopes, it might be usable to perform other actions, aside from a `git push`. In that case, an SSH deploy key may be better, and less permissive.\n\nIf exposing this API key publicly is intended behavior, please feel free to close this.","vulnerability_information_html":"\u003cp\u003eHello!\u003c/p\u003e\n\n\u003cp\u003eWhile browsing through some old reports, I found that \u003ca title=\"https://jenkins.brew.sh\" href=\"/redirect?url=https%3A%2F%2Fjenkins.brew.sh\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://jenkins.brew.sh\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e was publicly accessible. I got curious when I saw one of the \u003ca href=\"/redirect?url=https%3A%2F%2Fjenkins.brew.sh%2Fjob%2FHomebrew%2520Bottles%2F33255%2Fconsole\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ebrew bottle builds\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e doing a \u003ccode\u003egit push\u003c/code\u003e to BrewTestBot/homebrew-core, and wondered if the credentials to make authenticated pushes were accessible.\u003c/p\u003e\n\n\u003cp\u003eSure enough, you can view environment variables for the build on \u003ca href=\"/redirect?url=https%3A%2F%2Fjenkins.brew.sh%2Fjob%2FHomebrew%2520Bottles%2F33255%2FinjectedEnvVars%2F\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ethis page\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e, which includes a \u003ccode\u003eHOMEBREW_GITHUB_API_TOKEN\u003c/code\u003e environment variable.\u003c/p\u003e\n\n\u003cp\u003eThis API token belongs to the \u003ca href=\"/redirect?url=https%3A%2F%2Fgithub.com%2FBrewTestBot\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003eBrewTestBot\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e user on GitHub, and this API key allows me to commit to the \u003ccode\u003eBrewTestBot/homebrew-core\u003c/code\u003e repository:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003e$ export GITHUB_API_TOKEN=\u0026lt;github token from above\u0026gt;\n$ curl https://api.github.com/repos/BrewTestBot/homebrew-core/git/blobs -u $GITHUB_API_TOKEN:x-oauth-basic -d \u0026#39;{\u0026quot;content\u0026quot;:\u0026quot;test\u0026quot;}\u0026#39; -H \u0026quot;Content-Type: application/json\u0026quot;\n{\n  \u0026quot;sha\u0026quot;: \u0026quot;30d74d258442c7c65512eafab474568dd706c430\u0026quot;,\n  \u0026quot;url\u0026quot;: \u0026quot;https://api.github.com/repos/BrewTestBot/homebrew-core/git/blobs/30d74d258442c7c65512eafab474568dd706c430\u0026quot;\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"impact\"\u003eImpact\u003c/h2\u003e\n\n\u003cp\u003eBased on the purpose of \u003ccode\u003eBrewTestBot\u003c/code\u003e, this might be entirely intended, but if the GitHub access token has overly permissive scopes, it might be usable to perform other actions, aside from a \u003ccode\u003egit push\u003c/code\u003e. In that case, an SSH deploy key may be better, and less permissive.\u003c/p\u003e\n\n\u003cp\u003eIf exposing this API key publicly is intended behavior, please feel free to close this.\u003c/p\u003e\n","weakness":{"id":18,"name":"Information Disclosure"},"original_report_id":null,"original_report_url":null,"attachments":[],"allow_singular_disclosure_at":"2018-09-10T00:33:20.930Z","allow_singular_disclosure_after":-72681325.04857892,"singular_disclosure_allowed":true,"vote_count":22,"voters":["z3t","michiel","spam404","kernelsndrs","eveeez","akashc99","pesticide","apapedulimu","13ern","an0nym0us","and 12 more..."],"severity":{"rating":"critical","author_type":"User"},"structured_scope":null,"abilities":{"assignable_team_members":[],"assignable_team_member_groups":[]},"can_edit_custom_fields_attributes":false,"activities":[{"id":3119913,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Did a little more sleuthing. These credentials give me commit access to the following repos:\n\n* Homebrew/brew\n* Homebrew/formulae.brew.sh\n* Homebrew/homebrew-core\n\nProof:\n\n```\n$ curl https://api.github.com/repos/Homebrew/homebrew-core/git/blobs -u $GITHUB_API_TOKEN:x-oauth-basic -d '{\"content\":\"test\"}' -H \"Content-Type: application/json\"\n{\n  \"sha\": \"30d74d258442c7c65512eafab474568dd706c430\",\n  \"url\": \"https://api.github.com/repos/Homebrew/homebrew-core/git/blobs/30d74d258442c7c65512eafab474568dd706c430\"\n}\n```\n","markdown_message":"\u003cp\u003eDid a little more sleuthing. These credentials give me commit access to the following repos:\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eHomebrew/brew\u003c/li\u003e\n\u003cli\u003eHomebrew/formulae.brew.sh\u003c/li\u003e\n\u003cli\u003eHomebrew/homebrew-core\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eProof:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003e$ curl https://api.github.com/repos/Homebrew/homebrew-core/git/blobs -u $GITHUB_API_TOKEN:x-oauth-basic -d \u0026#39;{\u0026quot;content\u0026quot;:\u0026quot;test\u0026quot;}\u0026#39; -H \u0026quot;Content-Type: application/json\u0026quot;\n{\n  \u0026quot;sha\u0026quot;: \u0026quot;30d74d258442c7c65512eafab474568dd706c430\u0026quot;,\n  \u0026quot;url\u0026quot;: \u0026quot;https://api.github.com/repos/Homebrew/homebrew-core/git/blobs/30d74d258442c7c65512eafab474568dd706c430\u0026quot;\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","automated_response":false,"created_at":"2018-07-31T08:04:53.981Z","updated_at":"2018-07-31T08:04:53.981Z","actor":{"username":"ejholmes","cleared":false,"url":"/ejholmes","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/160/627/92f28d0b4c250aed2b781af48097552c8f9413ed_original.jpeg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"homebrew","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":3119924,"is_internal":false,"editable":false,"type":"Activities::BugTriaged","message":"Thanks! This credential previously had no scopes so only provided access to public information but this changed recently. I'm going to reconfigure Jenkins and roll the credential.","markdown_message":"\u003cp\u003eThanks! This credential previously had no scopes so only provided access to public information but this changed recently. I\u0026#39;m going to reconfigure Jenkins and roll the credential.\u003c/p\u003e\n","automated_response":false,"created_at":"2018-07-31T08:06:27.189Z","updated_at":"2018-07-31T08:06:27.189Z","actor":{"username":"mikemcquaid","cleared":false,"url":"/mikemcquaid","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/152/571/7d94225e54e75375692ed2bec7f21a63b1615ee4_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"homebrew","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":3120190,"is_internal":false,"editable":false,"type":"Activities::BugResolved","message":"Thanks! This should now be resolved. The previous token may show up on the job but should no longer be valid. I've confirmed it now shows \"Bad Credentials\".","markdown_message":"\u003cp\u003eThanks! This should now be resolved. The previous token may show up on the job but should no longer be valid. I\u0026#39;ve confirmed it now shows \u0026quot;Bad Credentials\u0026quot;.\u003c/p\u003e\n","automated_response":false,"created_at":"2018-07-31T08:34:35.914Z","updated_at":"2018-07-31T08:34:35.914Z","actor":{"username":"mikemcquaid","cleared":false,"url":"/mikemcquaid","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/152/571/7d94225e54e75375692ed2bec7f21a63b1615ee4_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"reporter":{"username":"ejholmes","url":"/ejholmes"},"genius_execution_id":null,"team_handle":"homebrew","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":3121526,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"@mikemcquaid thanks for the quick response! I think it's important that this gets disclosed, and I'm planning on writing a blog post about this. Potentially, all of the internet has had access to commit to Homebrew since this access token has had these scopes (any idea how long that might be?).\n\nThe possibilities for what could have been done with these credentials is pretty concerning; best case I'm the first to discover this, worst case this has been discovered by malicious actors and Homebrew packages have back doors in them now. It seems like auditing whether this has been used maliciously is going to be fairly difficult, since the commits would be coming from BrewTestBot.\n\nI'll defer to you on when you think is the right time to go public with this.","markdown_message":"\u003cp\u003e\u003ca href=\"/mikemcquaid\"\u003e@mikemcquaid\u003c/a\u003e thanks for the quick response! I think it\u0026#39;s important that this gets disclosed, and I\u0026#39;m planning on writing a blog post about this. Potentially, all of the internet has had access to commit to Homebrew since this access token has had these scopes (any idea how long that might be?).\u003c/p\u003e\n\n\u003cp\u003eThe possibilities for what could have been done with these credentials is pretty concerning; best case I\u0026#39;m the first to discover this, worst case this has been discovered by malicious actors and Homebrew packages have back doors in them now. It seems like auditing whether this has been used maliciously is going to be fairly difficult, since the commits would be coming from BrewTestBot.\u003c/p\u003e\n\n\u003cp\u003eI\u0026#39;ll defer to you on when you think is the right time to go public with this.\u003c/p\u003e\n","automated_response":false,"created_at":"2018-07-31T10:22:40.311Z","updated_at":"2018-07-31T10:22:40.311Z","actor":{"username":"ejholmes","cleared":false,"url":"/ejholmes","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/160/627/92f28d0b4c250aed2b781af48097552c8f9413ed_original.jpeg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"homebrew","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":3121629,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Excuse my brevity because I’m on my phone. I’m on paternity leave right now so I’ll answer some more of your questions when I get the chance. Please hold off disclosing anything publicly for at least some weeks until I’m back at work. I can provide more details later if requested but it’s not accurate to say that this could be used to backdoor Homebrew packages. At worst this would allow pushing commits (which the audit log will help me identify if this happened) to a single repository and not all of Homebrew for the relatively short window these scopes were upgraded. Personally I’d rather this was not disclosed publicly at all.","markdown_message":"\u003cp\u003eExcuse my brevity because I’m on my phone. I’m on paternity leave right now so I’ll answer some more of your questions when I get the chance. Please hold off disclosing anything publicly for at least some weeks until I’m back at work. I can provide more details later if requested but it’s not accurate to say that this could be used to backdoor Homebrew packages. At worst this would allow pushing commits (which the audit log will help me identify if this happened) to a single repository and not all of Homebrew for the relatively short window these scopes were upgraded. Personally I’d rather this was not disclosed publicly at all.\u003c/p\u003e\n","automated_response":false,"created_at":"2018-07-31T11:18:21.598Z","updated_at":"2018-07-31T11:18:21.598Z","actor":{"username":"mikemcquaid","cleared":false,"url":"/mikemcquaid","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/152/571/7d94225e54e75375692ed2bec7f21a63b1615ee4_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"homebrew","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":3121653,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Understood. I'll hold off on posting anything publicly about this until you're back from paternity leave, and we have a complete understanding of what could have been achieved with these credentials.","markdown_message":"\u003cp\u003eUnderstood. I\u0026#39;ll hold off on posting anything publicly about this until you\u0026#39;re back from paternity leave, and we have a complete understanding of what could have been achieved with these credentials.\u003c/p\u003e\n","automated_response":false,"created_at":"2018-07-31T11:33:52.561Z","updated_at":"2018-07-31T11:33:52.561Z","actor":{"username":"ejholmes","cleared":false,"url":"/ejholmes","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/160/627/92f28d0b4c250aed2b781af48097552c8f9413ed_original.jpeg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"homebrew","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":3124412,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"While I'm waiting, I wanna respond with how I think this could have been used to insert a back door, given I had commit access to `Homebrew/brew`, `Homebrew/homebrew-core`. This assumes that the `master` branch on these repos does not have branch protection + required reviews, meaning I would be able to fast-forward `refs/heads/master`.\n\n### 1) Replacing bin/brew\n\nThe installation instructions on [brew.sh](https://brew.sh/) document the recommended method for installing homebrew as:\n\n```console\n/usr/bin/ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"\n```\n\nThis downloads and evaluates the Ruby script found at https://github.com/Homebrew/install/blob/master/install.\n\nThe ruby script does a few things, one of which is to [clone the master branch of https://github.com/Homebrew/brew into `/usr/local/Homebrew`](https://github.com/Homebrew/install/blob/052743dae1c004829c02e1a7c0b4aa82eff18846/install#L326-L362).\n\n```ruby\nsystem git, \"config\", \"remote.origin.url\", BREW_REPO\nsystem git, \"config\", \"remote.origin.fetch\", \"+refs/heads/*:refs/remotes/origin/*\"\n\n# ensure we don't munge line endings on checkout\nsystem git, \"config\", \"core.autocrlf\", \"false\"\n\nargs = git, \"fetch\", \"origin\", \"master:refs/remotes/origin/master\",\n       \"--tags\", \"--force\"\nsystem(*args)\n\nsystem git, \"reset\", \"--hard\", \"origin/master\"\n```\n\nGiven that this clones the `master` branch, If I were able to fast-forward `refs/heads/master`, I could have committed a backdoored version of [bin/brew](https://github.com/Homebrew/brew/blob/master/bin/brew). The next time someone downloaded/updated homebrew, I would have control of their machine.\n\n#### 2) Replacing formulae\n\nGiven this also granted commit access to Homebrew/homebrew-core, I could have replaced the formula for any package with a backdoored version of it. The next time someone installs the package, I would have control of their machine.\n\n---\n\nI think the severity of this ultimately rests on whether or not I would have been able to fast-forward the master branches on either repo. It looks like Homebrew/brew might have branch protection + required reviews, but it seems like Homebrew/homebrew-core does not, meaning I would have been able to replace formula.","markdown_message":"\u003cp\u003eWhile I\u0026#39;m waiting, I wanna respond with how I think this could have been used to insert a back door, given I had commit access to \u003ccode\u003eHomebrew/brew\u003c/code\u003e, \u003ccode\u003eHomebrew/homebrew-core\u003c/code\u003e. This assumes that the \u003ccode\u003emaster\u003c/code\u003e branch on these repos does not have branch protection + required reviews, meaning I would be able to fast-forward \u003ccode\u003erefs/heads/master\u003c/code\u003e.\u003c/p\u003e\n\n\u003ch3 id=\"1-replacing-bin-brew\"\u003e1) Replacing bin/brew\u003c/h3\u003e\n\n\u003cp\u003eThe installation instructions on \u003ca href=\"/redirect?url=https%3A%2F%2Fbrew.sh%2F\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ebrew.sh\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e document the recommended method for installing homebrew as:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight console\"\u003e\u003ccode\u003e\u003cspan class=\"gp\"\u003e/usr/bin/ruby -e \u0026quot;$\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003ecurl \u003cspan class=\"nt\"\u003e-fsSL\u003c/span\u003e https://raw.githubusercontent.com/Homebrew/install/master/install\u003cspan class=\"o\"\u003e)\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026quot;\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eThis downloads and evaluates the Ruby script found at \u003ca title=\"https://github.com/Homebrew/install/blob/master/install\" href=\"/redirect?url=https%3A%2F%2Fgithub.com%2FHomebrew%2Finstall%2Fblob%2Fmaster%2Finstall\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://github.com/Homebrew/install/blob/master/install\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e.\u003c/p\u003e\n\n\u003cp\u003eThe ruby script does a few things, one of which is to \u003ca href=\"/redirect?url=https%3A%2F%2Fgithub.com%2FHomebrew%2Finstall%2Fblob%2F052743dae1c004829c02e1a7c0b4aa82eff18846%2Finstall%23L326-L362\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003eclone the master branch of https://github.com/Homebrew/brew into \u003ccode\u003e/usr/local/Homebrew\u003c/code\u003e\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e.\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight ruby\"\u003e\u003ccode\u003e\u003cspan class=\"nb\"\u003esystem\u003c/span\u003e \u003cspan class=\"n\"\u003egit\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026quot;config\u0026quot;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026quot;remote.origin.url\u0026quot;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"no\"\u003eBREW_REPO\u003c/span\u003e\n\u003cspan class=\"nb\"\u003esystem\u003c/span\u003e \u003cspan class=\"n\"\u003egit\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026quot;config\u0026quot;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026quot;remote.origin.fetch\u0026quot;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026quot;+refs/heads/*:refs/remotes/origin/*\u0026quot;\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e# ensure we don\u0026#39;t munge line endings on checkout\u003c/span\u003e\n\u003cspan class=\"nb\"\u003esystem\u003c/span\u003e \u003cspan class=\"n\"\u003egit\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026quot;config\u0026quot;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026quot;core.autocrlf\u0026quot;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026quot;false\u0026quot;\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003eargs\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003egit\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026quot;fetch\u0026quot;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026quot;origin\u0026quot;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026quot;master:refs/remotes/origin/master\u0026quot;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n       \u003cspan class=\"s2\"\u003e\u0026quot;--tags\u0026quot;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026quot;--force\u0026quot;\u003c/span\u003e\n\u003cspan class=\"nb\"\u003esystem\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003eargs\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"nb\"\u003esystem\u003c/span\u003e \u003cspan class=\"n\"\u003egit\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026quot;reset\u0026quot;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026quot;--hard\u0026quot;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026quot;origin/master\u0026quot;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eGiven that this clones the \u003ccode\u003emaster\u003c/code\u003e branch, If I were able to fast-forward \u003ccode\u003erefs/heads/master\u003c/code\u003e, I could have committed a backdoored version of \u003ca href=\"/redirect?url=https%3A%2F%2Fgithub.com%2FHomebrew%2Fbrew%2Fblob%2Fmaster%2Fbin%2Fbrew\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ebin/brew\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e. The next time someone downloaded/updated homebrew, I would have control of their machine.\u003c/p\u003e\n\n\u003ch4 id=\"2-replacing-formulae\"\u003e2) Replacing formulae\u003c/h4\u003e\n\n\u003cp\u003eGiven this also granted commit access to Homebrew/homebrew-core, I could have replaced the formula for any package with a backdoored version of it. The next time someone installs the package, I would have control of their machine.\u003c/p\u003e\n\n\u003chr\u003e\n\n\u003cp\u003eI think the severity of this ultimately rests on whether or not I would have been able to fast-forward the master branches on either repo. It looks like Homebrew/brew might have branch protection + required reviews, but it seems like Homebrew/homebrew-core does not, meaning I would have been able to replace formula.\u003c/p\u003e\n","automated_response":false,"created_at":"2018-08-01T01:38:26.336Z","updated_at":"2018-08-01T01:38:26.336Z","actor":{"username":"ejholmes","cleared":false,"url":"/ejholmes","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/160/627/92f28d0b4c250aed2b781af48097552c8f9413ed_original.jpeg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"homebrew","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":3126661,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Homebrew/brew has had protected branches and required reviews so this was never possible there. Homebrew/homebrew-core and Homebrew/homebrew-test-bot now have protected branches which prevents BrewTestBot (but not some repository administrators who have higher permissions) from pushing to master. This was not in place when the token was leaked. I've contacted GitHub Support to identify if that token was used to push to any Homebrew repositories in that time (but initial investigations indicate it was not) and verified with an identically scoped token that I cannot push.\n\nIt's worth noting although you'd be able to modify a formula it would have been likely noticed by one of the other homebrew-core maintainers who follow the commit log very closely (e.g. ilovezfs). You would also not have been able to modify existing or create a new binary package on Bintray as these require separate credentials.\n\nI'm not involved with the security space so my preference would be for this not to be publicly disclosed as I feel it's likely to reflect badly on the project and me personally but ultimately that's up to you. I would ask that I can read your blog post before you post it publicly, though, and you still hold off posting it for a while (as we're discussing whether any additional security measures would be feasible and if they are it would be good to announce it there).\n\nThanks again!","markdown_message":"\u003cp\u003eHomebrew/brew has had protected branches and required reviews so this was never possible there. Homebrew/homebrew-core and Homebrew/homebrew-test-bot now have protected branches which prevents BrewTestBot (but not some repository administrators who have higher permissions) from pushing to master. This was not in place when the token was leaked. I\u0026#39;ve contacted GitHub Support to identify if that token was used to push to any Homebrew repositories in that time (but initial investigations indicate it was not) and verified with an identically scoped token that I cannot push.\u003c/p\u003e\n\n\u003cp\u003eIt\u0026#39;s worth noting although you\u0026#39;d be able to modify a formula it would have been likely noticed by one of the other homebrew-core maintainers who follow the commit log very closely (e.g. ilovezfs). You would also not have been able to modify existing or create a new binary package on Bintray as these require separate credentials.\u003c/p\u003e\n\n\u003cp\u003eI\u0026#39;m not involved with the security space so my preference would be for this not to be publicly disclosed as I feel it\u0026#39;s likely to reflect badly on the project and me personally but ultimately that\u0026#39;s up to you. I would ask that I can read your blog post before you post it publicly, though, and you still hold off posting it for a while (as we\u0026#39;re discussing whether any additional security measures would be feasible and if they are it would be good to announce it there).\u003c/p\u003e\n\n\u003cp\u003eThanks again!\u003c/p\u003e\n","automated_response":false,"created_at":"2018-08-01T08:59:28.773Z","updated_at":"2018-08-01T08:59:28.773Z","actor":{"username":"mikemcquaid","cleared":false,"url":"/mikemcquaid","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/152/571/7d94225e54e75375692ed2bec7f21a63b1615ee4_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"homebrew","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":3128819,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"\u003e I'm not involved with the security space so my preference would be for this not to be publicly disclosed as I feel it's likely to reflect badly on the project and me personally but ultimately that's up to you. I would ask that I can read your blog post before you post it publicly, though, and you still hold off posting it for a while (as we're discussing whether any additional security measures would be feasible and if they are it would be good to announce it there).\n\nTotally understand your feelings here, and I don’t want this to draw negative attention on Homebrew maintainers themselves, or point blame at anyone. As a long time user of Homebrew, I appreciate the amount of effort you and the rest of the team have put in to making Homebrew what it is today.\n\nHowever, I think it’s important to note that if this was leaked without being disclosed by the Homebrew team, it would look a lot worse than just saying “Here’s what happened, it wasn’t used maliciously. We screwed up because we’re human, we’ll do better”. For something like this, I would recommend a public disclosure from Homebrew, ideally including proof that this wasn’t used maliciously.\n\nI think this can be used to draw more support to the needs of Homebrew; given how popular it is, and the potential impact of a vulnerability like this, a lot more resources could be devoted to improving security for Homebrew. If this draws the attention of something like the Project Zero team at Google, that might mean an overall better and more secure tool for users. I think this also highlights a fundamental flaw in the industry where we put a lot of implicit trust in package managers to be perfect, which ends up leading to a massively large attack vector for backdoors; NPM, RubyGems, PyPi and the like have all had and will have very similar vulnerabilities to this.\n\nI’ll be drafting the blog post over the next few weeks, and I’ll give you a chance to review it before I publish (and after you’re back from paternity leave).","markdown_message":"\u003cblockquote\u003e\n\u003cp\u003eI\u0026#39;m not involved with the security space so my preference would be for this not to be publicly disclosed as I feel it\u0026#39;s likely to reflect badly on the project and me personally but ultimately that\u0026#39;s up to you. I would ask that I can read your blog post before you post it publicly, though, and you still hold off posting it for a while (as we\u0026#39;re discussing whether any additional security measures would be feasible and if they are it would be good to announce it there).\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003eTotally understand your feelings here, and I don’t want this to draw negative attention on Homebrew maintainers themselves, or point blame at anyone. As a long time user of Homebrew, I appreciate the amount of effort you and the rest of the team have put in to making Homebrew what it is today.\u003c/p\u003e\n\n\u003cp\u003eHowever, I think it’s important to note that if this was leaked without being disclosed by the Homebrew team, it would look a lot worse than just saying “Here’s what happened, it wasn’t used maliciously. We screwed up because we’re human, we’ll do better”. For something like this, I would recommend a public disclosure from Homebrew, ideally including proof that this wasn’t used maliciously.\u003c/p\u003e\n\n\u003cp\u003eI think this can be used to draw more support to the needs of Homebrew; given how popular it is, and the potential impact of a vulnerability like this, a lot more resources could be devoted to improving security for Homebrew. If this draws the attention of something like the Project Zero team at Google, that might mean an overall better and more secure tool for users. I think this also highlights a fundamental flaw in the industry where we put a lot of implicit trust in package managers to be perfect, which ends up leading to a massively large attack vector for backdoors; NPM, RubyGems, PyPi and the like have all had and will have very similar vulnerabilities to this.\u003c/p\u003e\n\n\u003cp\u003eI’ll be drafting the blog post over the next few weeks, and I’ll give you a chance to review it before I publish (and after you’re back from paternity leave).\u003c/p\u003e\n","automated_response":false,"created_at":"2018-08-01T14:22:12.442Z","updated_at":"2018-08-01T14:22:12.442Z","actor":{"username":"ejholmes","cleared":false,"url":"/ejholmes","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/160/627/92f28d0b4c250aed2b781af48097552c8f9413ed_original.jpeg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"homebrew","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":3129302,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Thanks for that. I'll work on a public disclosure that we can release at the same time as your blog post (if that works for you) and perhaps we could each review the other's? I like the idea of getting more help directed to Homebrew. I've started a conversation internally on how we can deal with issues like this better in future. Thanks again!","markdown_message":"\u003cp\u003eThanks for that. I\u0026#39;ll work on a public disclosure that we can release at the same time as your blog post (if that works for you) and perhaps we could each review the other\u0026#39;s? I like the idea of getting more help directed to Homebrew. I\u0026#39;ve started a conversation internally on how we can deal with issues like this better in future. Thanks again!\u003c/p\u003e\n","automated_response":false,"created_at":"2018-08-01T16:01:17.390Z","updated_at":"2018-08-01T16:01:17.390Z","actor":{"username":"mikemcquaid","cleared":false,"url":"/mikemcquaid","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/152/571/7d94225e54e75375692ed2bec7f21a63b1615ee4_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"homebrew","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":3130881,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Awesome. More than happy to review your draft when you have it.\n\nAlso, if I can make a few recommendations, here's a few things that would be worth doing (if they haven't already been done), and included in the public disclosure.\n\n1. Enable the \"Require 2FA\" setting on the Homebrew org: https://github.com/organizations/Homebrew/settings/security. This wouldn't have prevented the issue at hand, but could help prevent another similar attack (e.g. see the recent [Gentoo GitHub breach](https://thehackernews.com/2018/07/github-hacking-gentoo-linux.html)). It would probably be a good idea to also vocalize to any members of the Homebrew team to not use SMS based 2FA (see the [Reddit breach](https://www.reddit.com/r/announcements/comments/93qnm5/we_had_a_security_incident_heres_what_you_need_to/) today). The Reddit disclosure is also a really great example of a good disclosure (What happened, What's the impact, What we're doing).\n2. Enable third party app restrictions for the Homebrew org: https://github.com/organizations/Homebrew/settings/oauth_application_policy. This will help ensure that, if any Homebrew members OAuth with some mom-and-pop app, those API keys won't be usable on the Homebrew/* repos. Like the above, this wouldn't have prevented this issue, but it can prevent a similar one in the future.\n3. Enable branch protection + required reviews on any core Homebrew repos that don't have it (e.g. `Homebrew/homebrew-core`, `Homebrew/homebrew-cask`, `Homebrew/brew.sh`), and audit the number of people that have \"admin\" rights on the repos so this can't be bypassed.\n4. Have all the Homebrew org members review their personal access tokens and prune anything that's not used: https://github.com/settings/tokens\n\nThere's probably a broader discussion that could be had on how the brew client could be made to put less trust in the `Homebrew/homebrew-core` repo and GitHub, like using GPG signing, but those are probably discussions that would need to happen elsewhere.","markdown_message":"\u003cp\u003eAwesome. More than happy to review your draft when you have it.\u003c/p\u003e\n\n\u003cp\u003eAlso, if I can make a few recommendations, here\u0026#39;s a few things that would be worth doing (if they haven\u0026#39;t already been done), and included in the public disclosure.\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003eEnable the \u0026quot;Require 2FA\u0026quot; setting on the Homebrew org: \u003ca title=\"https://github.com/organizations/Homebrew/settings/security\" href=\"/redirect?url=https%3A%2F%2Fgithub.com%2Forganizations%2FHomebrew%2Fsettings%2Fsecurity\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://github.com/organizations/Homebrew/settings/security\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e. This wouldn\u0026#39;t have prevented the issue at hand, but could help prevent another similar attack (e.g. see the recent \u003ca href=\"/redirect?url=https%3A%2F%2Fthehackernews.com%2F2018%2F07%2Fgithub-hacking-gentoo-linux.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003eGentoo GitHub breach\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e). It would probably be a good idea to also vocalize to any members of the Homebrew team to not use SMS based 2FA (see the \u003ca href=\"/redirect?url=https%3A%2F%2Fwww.reddit.com%2Fr%2Fannouncements%2Fcomments%2F93qnm5%2Fwe_had_a_security_incident_heres_what_you_need_to%2F\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003eReddit breach\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e today). The Reddit disclosure is also a really great example of a good disclosure (What happened, What\u0026#39;s the impact, What we\u0026#39;re doing).\u003c/li\u003e\n\u003cli\u003eEnable third party app restrictions for the Homebrew org: \u003ca title=\"https://github.com/organizations/Homebrew/settings/oauth_application_policy\" href=\"/redirect?url=https%3A%2F%2Fgithub.com%2Forganizations%2FHomebrew%2Fsettings%2Foauth_application_policy\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://github.com/organizations/Homebrew/settings/oauth_application_policy\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e. This will help ensure that, if any Homebrew members OAuth with some mom-and-pop app, those API keys won\u0026#39;t be usable on the Homebrew/* repos. Like the above, this wouldn\u0026#39;t have prevented this issue, but it can prevent a similar one in the future.\u003c/li\u003e\n\u003cli\u003eEnable branch protection + required reviews on any core Homebrew repos that don\u0026#39;t have it (e.g. \u003ccode\u003eHomebrew/homebrew-core\u003c/code\u003e, \u003ccode\u003eHomebrew/homebrew-cask\u003c/code\u003e, \u003ccode\u003eHomebrew/brew.sh\u003c/code\u003e), and audit the number of people that have \u0026quot;admin\u0026quot; rights on the repos so this can\u0026#39;t be bypassed.\u003c/li\u003e\n\u003cli\u003eHave all the Homebrew org members review their personal access tokens and prune anything that\u0026#39;s not used: \u003ca title=\"https://github.com/settings/tokens\" href=\"/redirect?url=https%3A%2F%2Fgithub.com%2Fsettings%2Ftokens\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://github.com/settings/tokens\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003eThere\u0026#39;s probably a broader discussion that could be had on how the brew client could be made to put less trust in the \u003ccode\u003eHomebrew/homebrew-core\u003c/code\u003e repo and GitHub, like using GPG signing, but those are probably discussions that would need to happen elsewhere.\u003c/p\u003e\n","automated_response":false,"created_at":"2018-08-02T01:19:07.066Z","updated_at":"2018-08-02T01:24:54.168Z","actor":{"username":"ejholmes","cleared":false,"url":"/ejholmes","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/160/627/92f28d0b4c250aed2b781af48097552c8f9413ed_original.jpeg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"homebrew","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":3131266,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Thanks! \n\n1. We've had \"require 2FA\" enabled for as long as it's been a feature but I'll recommend avoiding SMS to the current maintainers.\n2. We've had this enabled as long as it's been a feature (or close to that)\n3. Branch protection has been enabled on all repos. We can't have required reviews unfortunately because the team isn't big enough. I've enabled mandated CI checks on all repos but other maintainers have turned them off on the Homebrew Cask repos and wish to have the ability to push directly to master on the Homebrew Core repo.\n4. Good idea, I'll let them know too.\n\nOn GPG signing: I proposed that to the Homebrew leadership team and was unfortunately outvoted. I think there should still be a public discussion, though, so please feel free to open an issue on Homebrew/homebrew-core proposing that (without disclosing anything from here yet but I think it can be recommended as a good security practice regardless). If you'd rather not, I can do so but I figure you'll be able to do a better write-up than me!\n\nThanks again!","markdown_message":"\u003cp\u003eThanks! \u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003eWe\u0026#39;ve had \u0026quot;require 2FA\u0026quot; enabled for as long as it\u0026#39;s been a feature but I\u0026#39;ll recommend avoiding SMS to the current maintainers.\u003c/li\u003e\n\u003cli\u003eWe\u0026#39;ve had this enabled as long as it\u0026#39;s been a feature (or close to that)\u003c/li\u003e\n\u003cli\u003eBranch protection has been enabled on all repos. We can\u0026#39;t have required reviews unfortunately because the team isn\u0026#39;t big enough. I\u0026#39;ve enabled mandated CI checks on all repos but other maintainers have turned them off on the Homebrew Cask repos and wish to have the ability to push directly to master on the Homebrew Core repo.\u003c/li\u003e\n\u003cli\u003eGood idea, I\u0026#39;ll let them know too.\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003eOn GPG signing: I proposed that to the Homebrew leadership team and was unfortunately outvoted. I think there should still be a public discussion, though, so please feel free to open an issue on Homebrew/homebrew-core proposing that (without disclosing anything from here yet but I think it can be recommended as a good security practice regardless). If you\u0026#39;d rather not, I can do so but I figure you\u0026#39;ll be able to do a better write-up than me!\u003c/p\u003e\n\n\u003cp\u003eThanks again!\u003c/p\u003e\n","automated_response":false,"created_at":"2018-08-02T06:29:30.664Z","updated_at":"2018-08-02T06:29:30.664Z","actor":{"username":"mikemcquaid","cleared":false,"url":"/mikemcquaid","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/152/571/7d94225e54e75375692ed2bec7f21a63b1615ee4_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"homebrew","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":3143350,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"I've written my first draft of the blog post, let me know what you think: https://github.com/Homebrew/brew.sh/compare/master...MikeMcQuaid:security-disclosure?expand=1\u0026short_path=4f1f53b#diff-4f1f53bd979bc0cf0ad1c6d75a43eadd\n\nPlease feel free to suggest any changes; this is my first security vulnerability disclosure. I'm more than happy to mention you by name and link to you directly.\n\nAdditionally good news from GitHub: they confirmed the relevant token's user did not push to and of those repositories in the given vulnerable window (from when the token had elevated privileges)","markdown_message":"\u003cp\u003eI\u0026#39;ve written my first draft of the blog post, let me know what you think: \u003ca title=\"https://github.com/Homebrew/brew.sh/compare/master...MikeMcQuaid:security-disclosure?expand=1\u0026amp;short_path=4f1f53b#diff-4f1f53bd979bc0cf0ad1c6d75a43eadd\" href=\"/redirect?url=https%3A%2F%2Fgithub.com%2FHomebrew%2Fbrew.sh%2Fcompare%2Fmaster...MikeMcQuaid%3Asecurity-disclosure%3Fexpand%3D1%26short_path%3D4f1f53b%23diff-4f1f53bd979bc0cf0ad1c6d75a43eadd\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://github.com/Homebrew/brew.sh/compare/master...MikeMcQuaid:security-disclosure?expand=1\u0026amp;short_path=4f1f53b#diff-4f1f53bd979bc0cf0ad1c6d75a43eadd\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003ePlease feel free to suggest any changes; this is my first security vulnerability disclosure. I\u0026#39;m more than happy to mention you by name and link to you directly.\u003c/p\u003e\n\n\u003cp\u003eAdditionally good news from GitHub: they confirmed the relevant token\u0026#39;s user did not push to and of those repositories in the given vulnerable window (from when the token had elevated privileges)\u003c/p\u003e\n","automated_response":false,"created_at":"2018-08-05T08:51:21.335Z","updated_at":"2018-08-05T08:51:21.335Z","actor":{"username":"mikemcquaid","cleared":false,"url":"/mikemcquaid","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/152/571/7d94225e54e75375692ed2bec7f21a63b1615ee4_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"homebrew","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":3144894,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Also to be explicit: whenever you're happy with this post I'm good to post it. If you'd rather I wait for you post (as you waited for ours) then I'm happy to do so.","markdown_message":"\u003cp\u003eAlso to be explicit: whenever you\u0026#39;re happy with this post I\u0026#39;m good to post it. If you\u0026#39;d rather I wait for you post (as you waited for ours) then I\u0026#39;m happy to do so.\u003c/p\u003e\n","automated_response":false,"created_at":"2018-08-05T12:12:48.591Z","updated_at":"2018-08-05T12:12:48.591Z","actor":{"username":"mikemcquaid","cleared":false,"url":"/mikemcquaid","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/152/571/7d94225e54e75375692ed2bec7f21a63b1615ee4_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"homebrew","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":3152426,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Hi, just checking in here; don't want to rush you but want to probably get this post out sooner rather than later. Thanks again!","markdown_message":"\u003cp\u003eHi, just checking in here; don\u0026#39;t want to rush you but want to probably get this post out sooner rather than later. Thanks again!\u003c/p\u003e\n","automated_response":false,"created_at":"2018-08-06T19:22:16.782Z","updated_at":"2018-08-06T19:22:16.782Z","actor":{"username":"mikemcquaid","cleared":false,"url":"/mikemcquaid","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/152/571/7d94225e54e75375692ed2bec7f21a63b1615ee4_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"homebrew","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":3153152,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Hey @mikemcquaid. Sorry for the late response. I'll take a look at reviewing it now. I also have a rough draft of the blog post I'm planning, if you don't mind reviewing as well: https://medium.com/p/2ae314df03ab/edit","markdown_message":"\u003cp\u003eHey \u003ca href=\"/mikemcquaid\"\u003e@mikemcquaid\u003c/a\u003e. Sorry for the late response. I\u0026#39;ll take a look at reviewing it now. I also have a rough draft of the blog post I\u0026#39;m planning, if you don\u0026#39;t mind reviewing as well: \u003ca title=\"https://medium.com/p/2ae314df03ab/edit\" href=\"/redirect?url=https%3A%2F%2Fmedium.com%2Fp%2F2ae314df03ab%2Fedit\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://medium.com/p/2ae314df03ab/edit\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003c/p\u003e\n","automated_response":false,"created_at":"2018-08-06T23:40:51.835Z","updated_at":"2018-08-06T23:40:51.835Z","actor":{"username":"ejholmes","cleared":false,"url":"/ejholmes","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/160/627/92f28d0b4c250aed2b781af48097552c8f9413ed_original.jpeg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"homebrew","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":3153181,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"I think this looks good. I made some minor changes that I think makes it read a little better; some headings, and more explicit actions that were taken as mitigation steps. https://gist.github.com/ejholmes/7a0efa29911431293b8a409b3a30e08d\n\nFeel free to pull those changes in, or publish as is.","markdown_message":"\u003cp\u003eI think this looks good. I made some minor changes that I think makes it read a little better; some headings, and more explicit actions that were taken as mitigation steps. \u003ca title=\"https://gist.github.com/ejholmes/7a0efa29911431293b8a409b3a30e08d\" href=\"/redirect?url=https%3A%2F%2Fgist.github.com%2Fejholmes%2F7a0efa29911431293b8a409b3a30e08d\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://gist.github.com/ejholmes/7a0efa29911431293b8a409b3a30e08d\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eFeel free to pull those changes in, or publish as is.\u003c/p\u003e\n","automated_response":false,"created_at":"2018-08-06T23:55:29.335Z","updated_at":"2018-08-06T23:55:29.335Z","actor":{"username":"ejholmes","cleared":false,"url":"/ejholmes","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/160/627/92f28d0b4c250aed2b781af48097552c8f9413ed_original.jpeg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"homebrew","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":3153747,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"@ejholmes I can't read that Medium link; does it need an account? Any change of pasting it into a Gist (even with formatting removed)?","markdown_message":"\u003cp\u003e\u003ca href=\"/ejholmes\"\u003e@ejholmes\u003c/a\u003e I can\u0026#39;t read that Medium link; does it need an account? Any change of pasting it into a Gist (even with formatting removed)?\u003c/p\u003e\n","automated_response":false,"created_at":"2018-08-07T06:48:06.825Z","updated_at":"2018-08-07T06:48:06.825Z","actor":{"username":"mikemcquaid","cleared":false,"url":"/mikemcquaid","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/152/571/7d94225e54e75375692ed2bec7f21a63b1615ee4_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"homebrew","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":3153872,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Got through now! Left a few comments that are open to discussion. Will post ours and can add a link to yours from ours when it's published.","markdown_message":"\u003cp\u003eGot through now! Left a few comments that are open to discussion. Will post ours and can add a link to yours from ours when it\u0026#39;s published.\u003c/p\u003e\n","automated_response":false,"created_at":"2018-08-07T08:00:49.585Z","updated_at":"2018-08-07T08:00:49.585Z","actor":{"username":"mikemcquaid","cleared":false,"url":"/mikemcquaid","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/152/571/7d94225e54e75375692ed2bec7f21a63b1615ee4_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"homebrew","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":3154430,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"The post is live now: https://brew.sh/2018/08/05/security-incident-disclosure/. Will happily edit in your name and post as desired when they are public. Thanks again for all your work.","markdown_message":"\u003cp\u003eThe post is live now: \u003ca title=\"https://brew.sh/2018/08/05/security-incident-disclosure/\" href=\"/redirect?url=https%3A%2F%2Fbrew.sh%2F2018%2F08%2F05%2Fsecurity-incident-disclosure%2F\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://brew.sh/2018/08/05/security-incident-disclosure/\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e. Will happily edit in your name and post as desired when they are public. Thanks again for all your work.\u003c/p\u003e\n","automated_response":false,"created_at":"2018-08-07T09:10:30.454Z","updated_at":"2018-08-07T09:10:30.454Z","actor":{"username":"mikemcquaid","cleared":false,"url":"/mikemcquaid","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/152/571/7d94225e54e75375692ed2bec7f21a63b1615ee4_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"homebrew","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":3155359,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Awesome. I also published my blog post at https://medium.com/@vesirin/how-i-gained-commit-access-to-homebrew-in-30-minutes-2ae314df03ab. Thanks for your hard work (especially while on paternity leave)!","markdown_message":"\u003cp\u003eAwesome. I also published my blog post at \u003ca title=\"https://medium.com/@vesirin/how-i-gained-commit-access-to-homebrew-in-30-minutes-2ae314df03ab\" href=\"/redirect?url=https%3A%2F%2Fmedium.com%2F%40vesirin%2Fhow-i-gained-commit-access-to-homebrew-in-30-minutes-2ae314df03ab\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://medium.com/@vesirin/how-i-gained-commit-access-to-homebrew-in-30-minutes-2ae314df03ab\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e. Thanks for your hard work (especially while on paternity leave)!\u003c/p\u003e\n","automated_response":false,"created_at":"2018-08-07T12:35:45.104Z","updated_at":"2018-08-07T12:35:45.104Z","actor":{"username":"ejholmes","cleared":false,"url":"/ejholmes","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/160/627/92f28d0b4c250aed2b781af48097552c8f9413ed_original.jpeg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"homebrew","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":3155512,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Thanks again! Linking to it here: https://github.com/Homebrew/brew.sh/pull/238","markdown_message":"\u003cp\u003eThanks again! Linking to it here: \u003ca title=\"https://github.com/Homebrew/brew.sh/pull/238\" href=\"/redirect?url=https%3A%2F%2Fgithub.com%2FHomebrew%2Fbrew.sh%2Fpull%2F238\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://github.com/Homebrew/brew.sh/pull/238\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003c/p\u003e\n","automated_response":false,"created_at":"2018-08-07T13:11:20.779Z","updated_at":"2018-08-07T13:11:20.779Z","actor":{"username":"mikemcquaid","cleared":false,"url":"/mikemcquaid","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/152/571/7d94225e54e75375692ed2bec7f21a63b1615ee4_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"homebrew","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":3174536,"is_internal":false,"editable":false,"type":"Activities::AgreedOnGoingPublic","message":"Hey @mikemcquaid. Since this is public now, mind opening up this report as well?","markdown_message":"\u003cp\u003eHey \u003ca href=\"/mikemcquaid\"\u003e@mikemcquaid\u003c/a\u003e. Since this is public now, mind opening up this report as well?\u003c/p\u003e\n","automated_response":false,"created_at":"2018-08-11T00:33:20.847Z","updated_at":"2018-08-11T00:33:20.847Z","first_to_agree":true,"actor":{"username":"ejholmes","cleared":false,"url":"/ejholmes","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/160/627/92f28d0b4c250aed2b781af48097552c8f9413ed_original.jpeg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"homebrew","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":3177036,"is_internal":false,"editable":false,"type":"Activities::AgreedOnGoingPublic","message":"","markdown_message":"","automated_response":false,"created_at":"2018-08-11T13:57:57.918Z","updated_at":"2018-08-11T13:57:57.918Z","actor":{"username":"mikemcquaid","cleared":false,"url":"/mikemcquaid","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/152/571/7d94225e54e75375692ed2bec7f21a63b1615ee4_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"homebrew","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":3177037,"is_internal":false,"editable":false,"type":"Activities::ReportBecamePublic","message":"","markdown_message":"","automated_response":false,"created_at":"2018-08-11T13:57:58.022Z","updated_at":"2018-08-11T13:57:58.022Z","actor":{"username":"mikemcquaid","cleared":false,"url":"/mikemcquaid","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/152/571/7d94225e54e75375692ed2bec7f21a63b1615ee4_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"homebrew","actor_is_team_member":true,"actor_is_concealed_member":false}],"activity_page_count":1,"activity_page_number":1,"summaries":[{"category":"team","can_view?":true,"can_create?":false},{"category":"researcher","can_view?":true,"can_create?":false}]}