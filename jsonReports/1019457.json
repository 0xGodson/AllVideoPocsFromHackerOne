{"id":1019457,"global_id":"Z2lkOi8vaGFja2Vyb25lL1JlcG9ydC8xMDE5NDU3","url":"https://hackerone.com/reports/1019457","title":"Data race conditions reported by helgrind when performing parallel DNS queries in libcurl","state":"Closed","substate":"informative","severity_rating":"medium","readable_substate":"Informative","created_at":"2020-10-27T00:52:50.602Z","submitted_at":"2020-10-27T00:52:50.673Z","is_member_of_team?":false,"reporter":{"disabled":false,"username":"brumbrum","url":"/brumbrum","profile_picture_urls":{"small":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"is_me?":false,"cleared":false,"hackerone_triager":false,"hacker_mediation":false},"team":{"id":35663,"url":"https://hackerone.com/curl","handle":"curl","profile_picture_urls":{"small":"https://profile-photos.hackerone-user-content.com/variants/000/035/663/2faf4c279d437d64bfda6d23d62ce1833813a4d9_original.png/3afcb5c896247e7ee8ada31b1c1eb8657e22241f911093acfe4ec7e97a3a959a","medium":"https://profile-photos.hackerone-user-content.com/variants/000/035/663/2faf4c279d437d64bfda6d23d62ce1833813a4d9_original.png/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"permissions":[],"submission_state":"open","default_currency":"usd","awards_miles":false,"offers_bounties":true,"state":"public_mode","only_cleared_hackers":false,"profile":{"name":"curl","twitter_handle":"","website":"https://curl.se","about":"cURL is a computer software project providing a library and command-line tool for transferring data using various protocols."}},"has_bounty?":false,"in_validation?":false,"rejected_anc_report_that_can_be_sent_back_to_anc_triagers?":false,"can_view_team":true,"can_view_report":true,"is_external_bug":false,"is_published":false,"is_participant":false,"stage":4,"public":true,"visibility":"full","cve_ids":[],"singular_disclosure_disabled":true,"disclosed_at":"2020-11-04T21:44:37.603Z","bug_reporter_agreed_on_going_public_at":"2020-11-04T15:48:54.735Z","team_member_agreed_on_going_public_at":"2020-11-04T21:44:37.504Z","comments_closed?":false,"facebook_team?":false,"team_private?":false,"vulnerability_information":"While running binary built from curl git repo file \"docs/examples/10-at-a-time.c\" under valgrind specifically with the helgrind tool, reports race condition in getaddrinfo() calls.   Using the latest curl/libcurl from github repo.\n\nFrom the valgrind documentation \"Helgrind is a Valgrind tool for detecting synchronisation errors in C, C++ and Fortran programs that use the POSIX pthreads threading primitives.\"\n\n\nCommand used for testing:\n\nvalgrind --tool=helgrind --log-file=helgrind_%p.log ./10-at-a-time\n\n\nSee helgrind log files attached to this report.\n\n\nHere is one example of the helgrind reports:\nNote: libcurl was rebuilt in debug to provide complete stack traces. Problem occurs in both debug and non-debug builds.\n\n==43481== Possible data race during read of size 1 at 0x8325DE8 by thread #7\n==43481== Locks held: none\n==43481==    at 0x8325DE8: ns_name_pton (ns_name.c:160)\n==43481==    by 0x831D8DF: __res_hnok (res_comp.c:202)\n==43481==    by 0x833906B: check_name (dns-host.c:284)\n==43481==    by 0x833906B: _nss_dns_gethostbyname4_r (dns-host.c:335)\n==43481==    by 0x4A5B58E: gaih_inet.constprop.0 (getaddrinfo.c:765)\n==43481==    by 0x4A5D0D8: getaddrinfo (getaddrinfo.c:2256)\n==43481==    by 0x486D6AB: curl_dbg_getaddrinfo (curl_addrinfo.c:554)\n==43481==    by 0x486CD6D: Curl_getaddrinfo_ex (curl_addrinfo.c:124)\n==43481==    by 0x4861FE0: getaddrinfo_thread (asyn-thread.c:307)\n==43481==    by 0x4872148: curl_thread_create_thunk (curl_threads.c:57)\n==43481==    by 0x4842B1A: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)\n==43481==    by 0x4ED6608: start_thread (pthread_create.c:477)\n==43481==    by 0x4A76292: clone (clone.S:95)\n==43481==  Address 0x8325de8 is in the Text segment of /usr/lib/x86_64-linux-gnu/libresolv-2.31.so\n==43481==    at 0x8325DE8: ns_name_pton (ns_name.c:160)\n\n\n\nWill also see some of the calls falling, sometimes.  Not every time though.  Issues might vary based on number of cores/threads present or allocated to the test system. For this testing using a VirtualBox VM with 3 vCPUs running up to date Ubuntu 20.04.\n\n\nI received the following errors over various runs with the helgrind tool.  Usually the initial few logged output lines will report some failure, rarely do the later output logged lines show failures.  Some examples of errors received over various runs:\n\nR: 16 - Error in the HTTP2 framing layer \u003chttps://www.microsoft.com\u003e\nR: 16 - Error in the HTTP2 framing layer \u003chttps://www.google.com\u003e\nR: 35 - SSL connect error \u003chttps://www.mysql.com\u003e\n\nR: 52 - Server returned nothing (no headers, no data) \u003chttps://www.bbc.co.uk\u003e\n\nR: 55 - Failed sending data to the peer \u003chttps://www.google.com\u003e\n\n\n$ valgrind --version\nvalgrind-3.15.0\n\n\nWhen not running under helgrind the 10-at-a-time binary usually runs without issues, but sometimes one will randomly fail, which might be normal sometimes, but appears to validate that this is a real problem and not only revealed with libcurl used under helgrind.\n\nR: 35 - SSL connect error \u003chttps://www.hp.com\u003e\n\n\nHave not tried c-ares library.  Would you find it useful if I did?\n\n\nNot clear if the problem is with libcurl or with the libc library implementing getaddrinfo().\n\n## Impact\n\n- Failure to connect to target system.\n- Connecting to wrong IP if DNS data corrupted, potentially disclosing sensitive data to wrong site.\n\n\nMitigation:\n- Limit parallel DNS usage.\n- Potentially c-ares library may not have this issue, but this is not verified.","vulnerability_information_html":"\u003cp\u003eWhile running binary built from curl git repo file \u0026quot;docs/examples/10-at-a-time.c\u0026quot; under valgrind specifically with the helgrind tool, reports race condition in getaddrinfo() calls.   Using the latest curl/libcurl from github repo.\u003c/p\u003e\n\n\u003cp\u003eFrom the valgrind documentation \u0026quot;Helgrind is a Valgrind tool for detecting synchronisation errors in C, C++ and Fortran programs that use the POSIX pthreads threading primitives.\u0026quot;\u003c/p\u003e\n\n\u003cp\u003eCommand used for testing:\u003c/p\u003e\n\n\u003cp\u003evalgrind --tool=helgrind --log-file=helgrind_%p.log ./10-at-a-time\u003c/p\u003e\n\n\u003cp\u003eSee helgrind log files attached to this report.\u003c/p\u003e\n\n\u003cp\u003eHere is one example of the helgrind reports:\u003cbr\u003e\nNote: libcurl was rebuilt in debug to provide complete stack traces. Problem occurs in both debug and non-debug builds.\u003c/p\u003e\n\n\u003cp\u003e\u003cmark\u003e43481\u003c/mark\u003e Possible data race during read of size 1 at 0x8325DE8 by thread #7\u003cbr\u003e\n\u003cmark\u003e43481\u003c/mark\u003e Locks held: none\u003cbr\u003e\n\u003cmark\u003e43481\u003c/mark\u003e    at 0x8325DE8: ns_name_pton (ns_name.c:160)\u003cbr\u003e\n\u003cmark\u003e43481\u003c/mark\u003e    by 0x831D8DF: __res_hnok (res_comp.c:202)\u003cbr\u003e\n\u003cmark\u003e43481\u003c/mark\u003e    by 0x833906B: check_name (dns-host.c:284)\u003cbr\u003e\n\u003cmark\u003e43481\u003c/mark\u003e    by 0x833906B: _nss_dns_gethostbyname4_r (dns-host.c:335)\u003cbr\u003e\n\u003cmark\u003e43481\u003c/mark\u003e    by 0x4A5B58E: gaih_inet.constprop.0 (getaddrinfo.c:765)\u003cbr\u003e\n\u003cmark\u003e43481\u003c/mark\u003e    by 0x4A5D0D8: getaddrinfo (getaddrinfo.c:2256)\u003cbr\u003e\n\u003cmark\u003e43481\u003c/mark\u003e    by 0x486D6AB: curl_dbg_getaddrinfo (curl_addrinfo.c:554)\u003cbr\u003e\n\u003cmark\u003e43481\u003c/mark\u003e    by 0x486CD6D: Curl_getaddrinfo_ex (curl_addrinfo.c:124)\u003cbr\u003e\n\u003cmark\u003e43481\u003c/mark\u003e    by 0x4861FE0: getaddrinfo_thread (asyn-thread.c:307)\u003cbr\u003e\n\u003cmark\u003e43481\u003c/mark\u003e    by 0x4872148: curl_thread_create_thunk (curl_threads.c:57)\u003cbr\u003e\n\u003cmark\u003e43481\u003c/mark\u003e    by 0x4842B1A: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)\u003cbr\u003e\n\u003cmark\u003e43481\u003c/mark\u003e    by 0x4ED6608: start_thread (pthread_create.c:477)\u003cbr\u003e\n\u003cmark\u003e43481\u003c/mark\u003e    by 0x4A76292: clone (clone.S:95)\u003cbr\u003e\n\u003cmark\u003e43481\u003c/mark\u003e  Address 0x8325de8 is in the Text segment of /usr/lib/x86_64-linux-gnu/libresolv-2.31.so\u003cbr\u003e\n\u003cmark\u003e43481\u003c/mark\u003e    at 0x8325DE8: ns_name_pton (ns_name.c:160)\u003c/p\u003e\n\n\u003cp\u003eWill also see some of the calls falling, sometimes.  Not every time though.  Issues might vary based on number of cores/threads present or allocated to the test system. For this testing using a VirtualBox VM with 3 vCPUs running up to date Ubuntu 20.04.\u003c/p\u003e\n\n\u003cp\u003eI received the following errors over various runs with the helgrind tool.  Usually the initial few logged output lines will report some failure, rarely do the later output logged lines show failures.  Some examples of errors received over various runs:\u003c/p\u003e\n\n\u003cp\u003eR: 16 - Error in the HTTP2 framing layer \u003ca title=\"https://www.microsoft.com\" href=\"/redirect?url=https%3A%2F%2Fwww.microsoft.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://www.microsoft.com\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003cbr\u003e\nR: 16 - Error in the HTTP2 framing layer \u003ca title=\"https://www.google.com\" href=\"/redirect?url=https%3A%2F%2Fwww.google.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://www.google.com\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003cbr\u003e\nR: 35 - SSL connect error \u003ca title=\"https://www.mysql.com\" href=\"/redirect?url=https%3A%2F%2Fwww.mysql.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://www.mysql.com\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eR: 52 - Server returned nothing (no headers, no data) \u003ca title=\"https://www.bbc.co.uk\" href=\"/redirect?url=https%3A%2F%2Fwww.bbc.co.uk\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://www.bbc.co.uk\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eR: 55 - Failed sending data to the peer \u003ca title=\"https://www.google.com\" href=\"/redirect?url=https%3A%2F%2Fwww.google.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://www.google.com\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e$ valgrind --version\u003cbr\u003e\nvalgrind-3.15.0\u003c/p\u003e\n\n\u003cp\u003eWhen not running under helgrind the 10-at-a-time binary usually runs without issues, but sometimes one will randomly fail, which might be normal sometimes, but appears to validate that this is a real problem and not only revealed with libcurl used under helgrind.\u003c/p\u003e\n\n\u003cp\u003eR: 35 - SSL connect error \u003ca title=\"https://www.hp.com\" href=\"/redirect?url=https%3A%2F%2Fwww.hp.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://www.hp.com\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eHave not tried c-ares library.  Would you find it useful if I did?\u003c/p\u003e\n\n\u003cp\u003eNot clear if the problem is with libcurl or with the libc library implementing getaddrinfo().\u003c/p\u003e\n\n\u003ch2 id=\"impact\"\u003eImpact\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003eFailure to connect to target system.\u003c/li\u003e\n\u003cli\u003eConnecting to wrong IP if DNS data corrupted, potentially disclosing sensitive data to wrong site.\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eMitigation:\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eLimit parallel DNS usage.\u003c/li\u003e\n\u003cli\u003ePotentially c-ares library may not have this issue, but this is not verified.\u003c/li\u003e\n\u003c/ul\u003e\n","weakness":{"id":18,"name":"Information Disclosure"},"original_report_id":null,"original_report_url":null,"attachments":[{"id":1053044,"file_name":"helgrind_43280.log","expiring_url":"https://hackerone-us-west-2-production-attachments.s3.us-west-2.amazonaws.com/66yg7yQTuMjjTAmtdsFNWvnh?response-content-disposition=attachment%3B%20filename%3D%22helgrind_43280.log%22%3B%20filename%2A%3DUTF-8%27%27helgrind_43280.log\u0026response-content-type=text%2Fx-log\u0026X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=ASIAQGK6FURQWS7SVX5C%2F20201229%2Fus-west-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20201229T041159Z\u0026X-Amz-Expires=3600\u0026X-Amz-SignedHeaders=host\u0026X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJv%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCICTltBX5kZS78yzw3IUUt%2Fa035OzgQ2vLu8U1ZxOKGilAiEAqT8jxmclsgLwaEL5fi7C70iqLwP7J3SWF5ypfn%2Fn%2BdUqtAMIVBABGgwwMTM2MTkyNzQ4NDkiDGRWkSc4Hmgq8mMXKCqRA0Pq%2Bzgh6dptjyRB4GzYO9sir45RVm0RyvFSB8lDBYTBiDIVL0nR3Ah5epkHqGDZZEh0G%2BfKYu%2FWpfgxJl7qllLzKg%2BOA0izVs9KPgQdxk0VWwW%2FPKL2ZT4v%2FSNRvF7rPUbZ7WhGTZqx0%2BinzKM%2BO6lDyXZKNKMzhjRnIFdI7Th01c4ma39imTXQDmxc%2FNzHFK40lrkAbTZoTlcq%2BsnIcIRSB0h4GHasXhR5OHx8rifULR7sVKHDcZMCzSYjrtagaKs9I81LEzlSbEGxIQar2MK%2BZBwmpT57aT%2F1nIOoa%2FlH5nfP4Ihcv4Mqfp19pFx8mlVoMe%2FTEx0pqNuC4lGQXowSDJKBcSjrYM6ouddZWfwY6R4O8X69XqZawGSrmBiXyAVG%2BDj895xbDJhiOXMvqkvSfsEzIfvcaHAzshzNZjFT3yiN4h81wfUF3QuLc6DHCTt1MPDYiUB8I7UCQ8wJxW4pg3xTnHqSwUeqww3YY8RFfsgvfp9PzGJ1s4vReFrzuzYVanpT22oz4w33z29yMPmMMO21qv8FOusBOsYr4rmEPt9wYTc2WNI63vM9u2VUhGNHafH2%2Fh3q6i%2BwJ0u2HLCQd44aqHfWZ%2Bc8hzInEQnRNrZf7owYuE4cHiraWaOsNJjfOEJBZu5nzzun4JSk7801NfOqa1zcgLMWOwyWJCtalb9fGn6qhwTWTBMzsOFHc661yyW%2FaqejCIRf6%2BwNOGhO8kc%2BEhEIq0iydp5k4rlMRKlFJPFlphrQYGeZgYr9TM%2FVgHlN%2Bx4Oxtcg1UwCGXMGiV%2BqXzeMEmO%2FdxKETdJJvF%2BEaJSsF0r1i7s8g61czrgyi9MKMpia%2Fg6ovVFkrvHOejV96g%3D%3D\u0026X-Amz-Signature=882d78bb86978e8a002c12e9cf8906e1ae6e38dd596c24b061cbd26242e8f6df","file_size":445466,"type":"text/x-log"},{"id":1053045,"file_name":"helgrind_43481.log","expiring_url":"https://hackerone-us-west-2-production-attachments.s3.us-west-2.amazonaws.com/7XHrdVhNc3KvApAJbHeAPtnU?response-content-disposition=attachment%3B%20filename%3D%22helgrind_43481.log%22%3B%20filename%2A%3DUTF-8%27%27helgrind_43481.log\u0026response-content-type=text%2Fx-log\u0026X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=ASIAQGK6FURQWS7SVX5C%2F20201229%2Fus-west-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20201229T041159Z\u0026X-Amz-Expires=3600\u0026X-Amz-SignedHeaders=host\u0026X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJv%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCICTltBX5kZS78yzw3IUUt%2Fa035OzgQ2vLu8U1ZxOKGilAiEAqT8jxmclsgLwaEL5fi7C70iqLwP7J3SWF5ypfn%2Fn%2BdUqtAMIVBABGgwwMTM2MTkyNzQ4NDkiDGRWkSc4Hmgq8mMXKCqRA0Pq%2Bzgh6dptjyRB4GzYO9sir45RVm0RyvFSB8lDBYTBiDIVL0nR3Ah5epkHqGDZZEh0G%2BfKYu%2FWpfgxJl7qllLzKg%2BOA0izVs9KPgQdxk0VWwW%2FPKL2ZT4v%2FSNRvF7rPUbZ7WhGTZqx0%2BinzKM%2BO6lDyXZKNKMzhjRnIFdI7Th01c4ma39imTXQDmxc%2FNzHFK40lrkAbTZoTlcq%2BsnIcIRSB0h4GHasXhR5OHx8rifULR7sVKHDcZMCzSYjrtagaKs9I81LEzlSbEGxIQar2MK%2BZBwmpT57aT%2F1nIOoa%2FlH5nfP4Ihcv4Mqfp19pFx8mlVoMe%2FTEx0pqNuC4lGQXowSDJKBcSjrYM6ouddZWfwY6R4O8X69XqZawGSrmBiXyAVG%2BDj895xbDJhiOXMvqkvSfsEzIfvcaHAzshzNZjFT3yiN4h81wfUF3QuLc6DHCTt1MPDYiUB8I7UCQ8wJxW4pg3xTnHqSwUeqww3YY8RFfsgvfp9PzGJ1s4vReFrzuzYVanpT22oz4w33z29yMPmMMO21qv8FOusBOsYr4rmEPt9wYTc2WNI63vM9u2VUhGNHafH2%2Fh3q6i%2BwJ0u2HLCQd44aqHfWZ%2Bc8hzInEQnRNrZf7owYuE4cHiraWaOsNJjfOEJBZu5nzzun4JSk7801NfOqa1zcgLMWOwyWJCtalb9fGn6qhwTWTBMzsOFHc661yyW%2FaqejCIRf6%2BwNOGhO8kc%2BEhEIq0iydp5k4rlMRKlFJPFlphrQYGeZgYr9TM%2FVgHlN%2Bx4Oxtcg1UwCGXMGiV%2BqXzeMEmO%2FdxKETdJJvF%2BEaJSsF0r1i7s8g61czrgyi9MKMpia%2Fg6ovVFkrvHOejV96g%3D%3D\u0026X-Amz-Signature=36c7bd746cf4e332979b2ee6530dab1eb25f720d3ca9b8e0f008166b2c4c6e06","file_size":668880,"type":"text/x-log"},{"id":1053046,"file_name":"helgrind_43338.log","expiring_url":"https://hackerone-us-west-2-production-attachments.s3.us-west-2.amazonaws.com/kHxAGAtV1mJ2RcN9u7pyWZX8?response-content-disposition=attachment%3B%20filename%3D%22helgrind_43338.log%22%3B%20filename%2A%3DUTF-8%27%27helgrind_43338.log\u0026response-content-type=text%2Fx-log\u0026X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=ASIAQGK6FURQWS7SVX5C%2F20201229%2Fus-west-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20201229T041159Z\u0026X-Amz-Expires=3600\u0026X-Amz-SignedHeaders=host\u0026X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJv%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCICTltBX5kZS78yzw3IUUt%2Fa035OzgQ2vLu8U1ZxOKGilAiEAqT8jxmclsgLwaEL5fi7C70iqLwP7J3SWF5ypfn%2Fn%2BdUqtAMIVBABGgwwMTM2MTkyNzQ4NDkiDGRWkSc4Hmgq8mMXKCqRA0Pq%2Bzgh6dptjyRB4GzYO9sir45RVm0RyvFSB8lDBYTBiDIVL0nR3Ah5epkHqGDZZEh0G%2BfKYu%2FWpfgxJl7qllLzKg%2BOA0izVs9KPgQdxk0VWwW%2FPKL2ZT4v%2FSNRvF7rPUbZ7WhGTZqx0%2BinzKM%2BO6lDyXZKNKMzhjRnIFdI7Th01c4ma39imTXQDmxc%2FNzHFK40lrkAbTZoTlcq%2BsnIcIRSB0h4GHasXhR5OHx8rifULR7sVKHDcZMCzSYjrtagaKs9I81LEzlSbEGxIQar2MK%2BZBwmpT57aT%2F1nIOoa%2FlH5nfP4Ihcv4Mqfp19pFx8mlVoMe%2FTEx0pqNuC4lGQXowSDJKBcSjrYM6ouddZWfwY6R4O8X69XqZawGSrmBiXyAVG%2BDj895xbDJhiOXMvqkvSfsEzIfvcaHAzshzNZjFT3yiN4h81wfUF3QuLc6DHCTt1MPDYiUB8I7UCQ8wJxW4pg3xTnHqSwUeqww3YY8RFfsgvfp9PzGJ1s4vReFrzuzYVanpT22oz4w33z29yMPmMMO21qv8FOusBOsYr4rmEPt9wYTc2WNI63vM9u2VUhGNHafH2%2Fh3q6i%2BwJ0u2HLCQd44aqHfWZ%2Bc8hzInEQnRNrZf7owYuE4cHiraWaOsNJjfOEJBZu5nzzun4JSk7801NfOqa1zcgLMWOwyWJCtalb9fGn6qhwTWTBMzsOFHc661yyW%2FaqejCIRf6%2BwNOGhO8kc%2BEhEIq0iydp5k4rlMRKlFJPFlphrQYGeZgYr9TM%2FVgHlN%2Bx4Oxtcg1UwCGXMGiV%2BqXzeMEmO%2FdxKETdJJvF%2BEaJSsF0r1i7s8g61czrgyi9MKMpia%2Fg6ovVFkrvHOejV96g%3D%3D\u0026X-Amz-Signature=20099189920e4efcc856eb04ef1c0b06a9c5bb33a5ea743686ecbf5155f0ee4f","file_size":601353,"type":"text/x-log"},{"id":1053047,"file_name":"helgrind_43432.log","expiring_url":"https://hackerone-us-west-2-production-attachments.s3.us-west-2.amazonaws.com/82arL3RRz9SzRusX2BM6dyPk?response-content-disposition=attachment%3B%20filename%3D%22helgrind_43432.log%22%3B%20filename%2A%3DUTF-8%27%27helgrind_43432.log\u0026response-content-type=text%2Fx-log\u0026X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=ASIAQGK6FURQWS7SVX5C%2F20201229%2Fus-west-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20201229T041159Z\u0026X-Amz-Expires=3600\u0026X-Amz-SignedHeaders=host\u0026X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJv%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCICTltBX5kZS78yzw3IUUt%2Fa035OzgQ2vLu8U1ZxOKGilAiEAqT8jxmclsgLwaEL5fi7C70iqLwP7J3SWF5ypfn%2Fn%2BdUqtAMIVBABGgwwMTM2MTkyNzQ4NDkiDGRWkSc4Hmgq8mMXKCqRA0Pq%2Bzgh6dptjyRB4GzYO9sir45RVm0RyvFSB8lDBYTBiDIVL0nR3Ah5epkHqGDZZEh0G%2BfKYu%2FWpfgxJl7qllLzKg%2BOA0izVs9KPgQdxk0VWwW%2FPKL2ZT4v%2FSNRvF7rPUbZ7WhGTZqx0%2BinzKM%2BO6lDyXZKNKMzhjRnIFdI7Th01c4ma39imTXQDmxc%2FNzHFK40lrkAbTZoTlcq%2BsnIcIRSB0h4GHasXhR5OHx8rifULR7sVKHDcZMCzSYjrtagaKs9I81LEzlSbEGxIQar2MK%2BZBwmpT57aT%2F1nIOoa%2FlH5nfP4Ihcv4Mqfp19pFx8mlVoMe%2FTEx0pqNuC4lGQXowSDJKBcSjrYM6ouddZWfwY6R4O8X69XqZawGSrmBiXyAVG%2BDj895xbDJhiOXMvqkvSfsEzIfvcaHAzshzNZjFT3yiN4h81wfUF3QuLc6DHCTt1MPDYiUB8I7UCQ8wJxW4pg3xTnHqSwUeqww3YY8RFfsgvfp9PzGJ1s4vReFrzuzYVanpT22oz4w33z29yMPmMMO21qv8FOusBOsYr4rmEPt9wYTc2WNI63vM9u2VUhGNHafH2%2Fh3q6i%2BwJ0u2HLCQd44aqHfWZ%2Bc8hzInEQnRNrZf7owYuE4cHiraWaOsNJjfOEJBZu5nzzun4JSk7801NfOqa1zcgLMWOwyWJCtalb9fGn6qhwTWTBMzsOFHc661yyW%2FaqejCIRf6%2BwNOGhO8kc%2BEhEIq0iydp5k4rlMRKlFJPFlphrQYGeZgYr9TM%2FVgHlN%2Bx4Oxtcg1UwCGXMGiV%2BqXzeMEmO%2FdxKETdJJvF%2BEaJSsF0r1i7s8g61czrgyi9MKMpia%2Fg6ovVFkrvHOejV96g%3D%3D\u0026X-Amz-Signature=0fb4d5fd49f2bde72fad1a572383db97b91392d9679cf16c4fa943f0020ac9ce","file_size":447193,"type":"text/x-log"}],"allow_singular_disclosure_at":null,"vote_count":0,"voters":[],"severity":{"rating":"medium","score":5.2,"author_type":"User","metrics":{"attack_vector":"physical","attack_complexity":"low","privileges_required":"low","user_interaction":"required","scope":"unchanged","confidentiality":"high","integrity":"low","availability":"low"}},"structured_scope":{"databaseId":18844,"asset_type":"SOURCE_CODE","asset_identifier":"https://github.com/curl/curl","max_severity":"critical"},"abilities":{"assignable_team_members":[],"assignable_team_member_groups":[]},"can_edit_custom_fields_attributes":false,"activities":[{"id":9642766,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Yes, I confirm that the report addresses: Reproducible, Impact and In Scope.","markdown_message":"\u003cp\u003eYes, I confirm that the report addresses: Reproducible, Impact and In Scope.\u003c/p\u003e\n","automated_response":false,"created_at":"2020-10-27T00:56:48.115Z","updated_at":"2020-10-27T00:56:48.115Z","actor":{"username":"brumbrum","cleared":false,"url":"/brumbrum","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"curl","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":9653411,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"I've built curl with --disable-threaded-resolver and the helgrind data race reports have gone away, but interestingly two of the sites (google and mysql) are still consistently failing now and another one (hp) fails from time to time.   As if helgrind is changing the dynamic of the execution so much that it results in these two failures.  Helgrind is famous for slowing down execution of code, so that is not a surprise, but could it be so slow as to cause the server to fail the client connection.\n\nAttaching log to show the failures when the libcurl code was built with --disable-threaded-resolver flag.  The co-responding helgrind log files are essentially empty with no reports of any kind.\n\nSo seems the failures are not a result of the data races, just helgrind impacts!  Will continue looking at it a little more to see if can better understand.","markdown_message":"\u003cp\u003eI\u0026#39;ve built curl with --disable-threaded-resolver and the helgrind data race reports have gone away, but interestingly two of the sites (google and mysql) are still consistently failing now and another one (hp) fails from time to time.   As if helgrind is changing the dynamic of the execution so much that it results in these two failures.  Helgrind is famous for slowing down execution of code, so that is not a surprise, but could it be so slow as to cause the server to fail the client connection.\u003c/p\u003e\n\n\u003cp\u003eAttaching log to show the failures when the libcurl code was built with --disable-threaded-resolver flag.  The co-responding helgrind log files are essentially empty with no reports of any kind.\u003c/p\u003e\n\n\u003cp\u003eSo seems the failures are not a result of the data races, just helgrind impacts!  Will continue looking at it a little more to see if can better understand.\u003c/p\u003e\n","automated_response":false,"created_at":"2020-10-27T21:15:15.975Z","updated_at":"2020-10-27T21:15:15.975Z","actor":{"username":"brumbrum","cleared":false,"url":"/brumbrum","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":null},"attachments":[{"id":1054447,"filename":"log_2020-10-27_failures_disable_threaded_resolver.txt","type":"text/plain","url":"https://hackerone-us-west-2-production-attachments.s3.us-west-2.amazonaws.com/BodB31vo4thChBd9PvQBEzcr?response-content-disposition=attachment%3B%20filename%3D%22log_2020-10-27_failures_disable_threaded_resolver.txt%22%3B%20filename%2A%3DUTF-8%27%27log_2020-10-27_failures_disable_threaded_resolver.txt\u0026response-content-type=text%2Fplain\u0026X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=ASIAQGK6FURQWS7SVX5C%2F20201229%2Fus-west-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20201229T041159Z\u0026X-Amz-Expires=3600\u0026X-Amz-SignedHeaders=host\u0026X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJv%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCICTltBX5kZS78yzw3IUUt%2Fa035OzgQ2vLu8U1ZxOKGilAiEAqT8jxmclsgLwaEL5fi7C70iqLwP7J3SWF5ypfn%2Fn%2BdUqtAMIVBABGgwwMTM2MTkyNzQ4NDkiDGRWkSc4Hmgq8mMXKCqRA0Pq%2Bzgh6dptjyRB4GzYO9sir45RVm0RyvFSB8lDBYTBiDIVL0nR3Ah5epkHqGDZZEh0G%2BfKYu%2FWpfgxJl7qllLzKg%2BOA0izVs9KPgQdxk0VWwW%2FPKL2ZT4v%2FSNRvF7rPUbZ7WhGTZqx0%2BinzKM%2BO6lDyXZKNKMzhjRnIFdI7Th01c4ma39imTXQDmxc%2FNzHFK40lrkAbTZoTlcq%2BsnIcIRSB0h4GHasXhR5OHx8rifULR7sVKHDcZMCzSYjrtagaKs9I81LEzlSbEGxIQar2MK%2BZBwmpT57aT%2F1nIOoa%2FlH5nfP4Ihcv4Mqfp19pFx8mlVoMe%2FTEx0pqNuC4lGQXowSDJKBcSjrYM6ouddZWfwY6R4O8X69XqZawGSrmBiXyAVG%2BDj895xbDJhiOXMvqkvSfsEzIfvcaHAzshzNZjFT3yiN4h81wfUF3QuLc6DHCTt1MPDYiUB8I7UCQ8wJxW4pg3xTnHqSwUeqww3YY8RFfsgvfp9PzGJ1s4vReFrzuzYVanpT22oz4w33z29yMPmMMO21qv8FOusBOsYr4rmEPt9wYTc2WNI63vM9u2VUhGNHafH2%2Fh3q6i%2BwJ0u2HLCQd44aqHfWZ%2Bc8hzInEQnRNrZf7owYuE4cHiraWaOsNJjfOEJBZu5nzzun4JSk7801NfOqa1zcgLMWOwyWJCtalb9fGn6qhwTWTBMzsOFHc661yyW%2FaqejCIRf6%2BwNOGhO8kc%2BEhEIq0iydp5k4rlMRKlFJPFlphrQYGeZgYr9TM%2FVgHlN%2Bx4Oxtcg1UwCGXMGiV%2BqXzeMEmO%2FdxKETdJJvF%2BEaJSsF0r1i7s8g61czrgyi9MKMpia%2Fg6ovVFkrvHOejV96g%3D%3D\u0026X-Amz-Signature=4ffa4c128bc77a7a279ebb7c51c3ee2e81ca84105ca3ae826246f32b6700b9ac"}],"genius_execution_id":null,"team_handle":"curl","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":9653704,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"I did a few more experiments\n\n1- I moved 'google' and 'mysql' further down in the list of urls, and they stopped failing afterwards.\n2- After moving those two down, then https://www.heise.de started failing consistently, I changed the scheme from https to http and it stopped failing afterwards.  No failures seen, except 'hp' from time to time, which is way down the list.\n3- I changed 'hp' to http scheme and it stopped failing too.  No more failures now.\n\nSo the failing sites are usually the first ones reported (and hp further down the list).   I suspect that openssl has some issue that gets affected by the performance impacts from helgrind.\n\nWould be interesting to use a different SSL library to see if the problems go away.  Will try that.\n","markdown_message":"\u003cp\u003eI did a few more experiments\u003c/p\u003e\n\n\u003cp\u003e1- I moved \u0026#39;google\u0026#39; and \u0026#39;mysql\u0026#39; further down in the list of urls, and they stopped failing afterwards.\u003cbr\u003e\n2- After moving those two down, then \u003ca title=\"https://www.heise.de\" href=\"/redirect?url=https%3A%2F%2Fwww.heise.de\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://www.heise.de\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e started failing consistently, I changed the scheme from https to http and it stopped failing afterwards.  No failures seen, except \u0026#39;hp\u0026#39; from time to time, which is way down the list.\u003cbr\u003e\n3- I changed \u0026#39;hp\u0026#39; to http scheme and it stopped failing too.  No more failures now.\u003c/p\u003e\n\n\u003cp\u003eSo the failing sites are usually the first ones reported (and hp further down the list).   I suspect that openssl has some issue that gets affected by the performance impacts from helgrind.\u003c/p\u003e\n\n\u003cp\u003eWould be interesting to use a different SSL library to see if the problems go away.  Will try that.\u003c/p\u003e\n","automated_response":false,"created_at":"2020-10-27T21:56:24.641Z","updated_at":"2020-10-27T21:56:24.641Z","actor":{"username":"brumbrum","cleared":false,"url":"/brumbrum","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"curl","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":9654473,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Ok, with the url list changes mentioned in my previous comment, I re-enabled the threaded resolver and the failures are still gone.\n\nAttaching the url list that works well for me, for your reference.\n\nStrangely https://www.un.org started failing for me, but I tested that url exclusively with curl CLI directly without helgrind and I could see problems reported there too, so could just be that the site (or its CDN) is having some issues.\n\nOf course now the data race reports are back when using the threaded resolver, but no failures reported, so now what to do.  Is this a non-problem at least with the DNS resolver portion.  Are those data races reported by helgrind on their own a concern.\n\n","markdown_message":"\u003cp\u003eOk, with the url list changes mentioned in my previous comment, I re-enabled the threaded resolver and the failures are still gone.\u003c/p\u003e\n\n\u003cp\u003eAttaching the url list that works well for me, for your reference.\u003c/p\u003e\n\n\u003cp\u003eStrangely \u003ca title=\"https://www.un.org\" href=\"/redirect?url=https%3A%2F%2Fwww.un.org\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://www.un.org\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e started failing for me, but I tested that url exclusively with curl CLI directly without helgrind and I could see problems reported there too, so could just be that the site (or its CDN) is having some issues.\u003c/p\u003e\n\n\u003cp\u003eOf course now the data race reports are back when using the threaded resolver, but no failures reported, so now what to do.  Is this a non-problem at least with the DNS resolver portion.  Are those data races reported by helgrind on their own a concern.\u003c/p\u003e\n","automated_response":false,"created_at":"2020-10-28T01:06:28.179Z","updated_at":"2020-10-28T01:06:28.179Z","actor":{"username":"brumbrum","cleared":false,"url":"/brumbrum","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":null},"attachments":[{"id":1054556,"filename":"urls_working_list.txt","type":"text/plain","url":"https://hackerone-us-west-2-production-attachments.s3.us-west-2.amazonaws.com/idVFA2jNLNJmKjBxYTAwckXt?response-content-disposition=attachment%3B%20filename%3D%22urls_working_list.txt%22%3B%20filename%2A%3DUTF-8%27%27urls_working_list.txt\u0026response-content-type=text%2Fplain\u0026X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=ASIAQGK6FURQWS7SVX5C%2F20201229%2Fus-west-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20201229T041159Z\u0026X-Amz-Expires=3600\u0026X-Amz-SignedHeaders=host\u0026X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJv%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCICTltBX5kZS78yzw3IUUt%2Fa035OzgQ2vLu8U1ZxOKGilAiEAqT8jxmclsgLwaEL5fi7C70iqLwP7J3SWF5ypfn%2Fn%2BdUqtAMIVBABGgwwMTM2MTkyNzQ4NDkiDGRWkSc4Hmgq8mMXKCqRA0Pq%2Bzgh6dptjyRB4GzYO9sir45RVm0RyvFSB8lDBYTBiDIVL0nR3Ah5epkHqGDZZEh0G%2BfKYu%2FWpfgxJl7qllLzKg%2BOA0izVs9KPgQdxk0VWwW%2FPKL2ZT4v%2FSNRvF7rPUbZ7WhGTZqx0%2BinzKM%2BO6lDyXZKNKMzhjRnIFdI7Th01c4ma39imTXQDmxc%2FNzHFK40lrkAbTZoTlcq%2BsnIcIRSB0h4GHasXhR5OHx8rifULR7sVKHDcZMCzSYjrtagaKs9I81LEzlSbEGxIQar2MK%2BZBwmpT57aT%2F1nIOoa%2FlH5nfP4Ihcv4Mqfp19pFx8mlVoMe%2FTEx0pqNuC4lGQXowSDJKBcSjrYM6ouddZWfwY6R4O8X69XqZawGSrmBiXyAVG%2BDj895xbDJhiOXMvqkvSfsEzIfvcaHAzshzNZjFT3yiN4h81wfUF3QuLc6DHCTt1MPDYiUB8I7UCQ8wJxW4pg3xTnHqSwUeqww3YY8RFfsgvfp9PzGJ1s4vReFrzuzYVanpT22oz4w33z29yMPmMMO21qv8FOusBOsYr4rmEPt9wYTc2WNI63vM9u2VUhGNHafH2%2Fh3q6i%2BwJ0u2HLCQd44aqHfWZ%2Bc8hzInEQnRNrZf7owYuE4cHiraWaOsNJjfOEJBZu5nzzun4JSk7801NfOqa1zcgLMWOwyWJCtalb9fGn6qhwTWTBMzsOFHc661yyW%2FaqejCIRf6%2BwNOGhO8kc%2BEhEIq0iydp5k4rlMRKlFJPFlphrQYGeZgYr9TM%2FVgHlN%2Bx4Oxtcg1UwCGXMGiV%2BqXzeMEmO%2FdxKETdJJvF%2BEaJSsF0r1i7s8g61czrgyi9MKMpia%2Fg6ovVFkrvHOejV96g%3D%3D\u0026X-Amz-Signature=49efbbd28d77172b4a984137a6680184162f28a56ed9366277bcd73435cfad3d"}],"genius_execution_id":null,"team_handle":"curl","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":9656073,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Thanks, will investigate! ","markdown_message":"\u003cp\u003eThanks, will investigate! \u003c/p\u003e\n","automated_response":false,"created_at":"2020-10-28T07:04:10.952Z","updated_at":"2020-10-28T07:04:10.952Z","actor":{"username":"bagder","cleared":false,"url":"/bagder","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/459/380/963f64725677dda4f5113219588e7d0c1ab9abaa_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"curl","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":9656991,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"I have some early questions:\n\n1. How is this a security problem? How does this potential flaw lead to a *security problem* and if so who can take advantage of it or how does it lead to badness for the user?\n\n2. The valgrind output says **possible** data race. It doesn't say \"verified\" or \"confirmed\" data race. Can you clarify exactly how this is a race and what the worst case problems are as a result?\n\n3. The report claims issues inside `getaddrinfo()`, but me knowingly we run each resolver thread completely separate and independent (from which the call to getaddrinfo is made). I cannot see how this causes race conditions. Also, I cannot see how you'd remove or minimize them by changing the order of the list of names.\n\nSo for now I have not confirmed any security problem here - but I have not ruled them out.","markdown_message":"\u003cp\u003eI have some early questions:\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003e\u003cp\u003eHow is this a security problem? How does this potential flaw lead to a \u003cem\u003esecurity problem\u003c/em\u003e and if so who can take advantage of it or how does it lead to badness for the user?\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eThe valgrind output says \u003cstrong\u003epossible\u003c/strong\u003e data race. It doesn\u0026#39;t say \u0026quot;verified\u0026quot; or \u0026quot;confirmed\u0026quot; data race. Can you clarify exactly how this is a race and what the worst case problems are as a result?\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eThe report claims issues inside \u003ccode\u003egetaddrinfo()\u003c/code\u003e, but me knowingly we run each resolver thread completely separate and independent (from which the call to getaddrinfo is made). I cannot see how this causes race conditions. Also, I cannot see how you\u0026#39;d remove or minimize them by changing the order of the list of names.\u003c/p\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003eSo for now I have not confirmed any security problem here - but I have not ruled them out.\u003c/p\u003e\n","automated_response":false,"created_at":"2020-10-28T08:46:25.103Z","updated_at":"2020-10-28T08:46:25.103Z","actor":{"username":"bagder","cleared":false,"url":"/bagder","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/459/380/963f64725677dda4f5113219588e7d0c1ab9abaa_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"curl","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":9673511,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Responding to your questions as best I can:\n\n1- If this is a real problem, then the security impact would be if the dns information returned was subtly altered due to the data race and still happens to represent a valid host, could lead to connecting to a wrong system and could lead to passing some sensitive information (for example, session cookies or credentials) that shouldn't be sent to this wrong system.\n\n2- Valgrind leaves the possibility for a false positive in it's wording due to the fact that it might not properly detect the lock used to protect the shared resource if some non-standard locking mechanism is used by the application or library.  As long as proper locking primitives are used then the helgrind report should be reliable.\n\nThere is a long discussion in this document: https://www.valgrind.org/docs/manual/hg-manual.html\n\nHere is a small subset of the discussion in section 7.5 of the document above:\n\n\"Make sure your application, and all the libraries it uses, use the POSIX threading primitives. Helgrind needs to be able to see all events pertaining to thread creation, exit, locking and other synchronisation events. To do so it intercepts many POSIX pthreads functions.\n\nDo not roll your own threading primitives (mutexes, etc) from combinations of the Linux futex syscall, atomic counters, etc. These throw Helgrind's internal what's-going-on models way off course and will give bogus results.”\n\n\n\n3- Looking over the valgrind reported events, it seems to me that the problem might very well be deep inside the getaddrinfo() call in the libc library.  So there may be nothing that can be done from the libcurl side.  Right now, I would have to dig further into the dns resolver code to have a better understanding of the issue and what exactly could be impacted by the data race.  Sorry I jumped the gun and should have dug more before reporting.\n\nRegarding the comment about reorganizing the url list causing problems to disappear, that now seems to be not related to this dns issue, but some other issue uncovered regarding openssl when running really slowly due to helgrind.  I would need to investigate that and could end up as some issue with the openssl library, most likely has nothing to do with libcurl.\n","markdown_message":"\u003cp\u003eResponding to your questions as best I can:\u003c/p\u003e\n\n\u003cp\u003e1- If this is a real problem, then the security impact would be if the dns information returned was subtly altered due to the data race and still happens to represent a valid host, could lead to connecting to a wrong system and could lead to passing some sensitive information (for example, session cookies or credentials) that shouldn\u0026#39;t be sent to this wrong system.\u003c/p\u003e\n\n\u003cp\u003e2- Valgrind leaves the possibility for a false positive in it\u0026#39;s wording due to the fact that it might not properly detect the lock used to protect the shared resource if some non-standard locking mechanism is used by the application or library.  As long as proper locking primitives are used then the helgrind report should be reliable.\u003c/p\u003e\n\n\u003cp\u003eThere is a long discussion in this document: \u003ca title=\"https://www.valgrind.org/docs/manual/hg-manual.html\" href=\"/redirect?url=https%3A%2F%2Fwww.valgrind.org%2Fdocs%2Fmanual%2Fhg-manual.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://www.valgrind.org/docs/manual/hg-manual.html\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eHere is a small subset of the discussion in section 7.5 of the document above:\u003c/p\u003e\n\n\u003cp\u003e\u0026quot;Make sure your application, and all the libraries it uses, use the POSIX threading primitives. Helgrind needs to be able to see all events pertaining to thread creation, exit, locking and other synchronisation events. To do so it intercepts many POSIX pthreads functions.\u003c/p\u003e\n\n\u003cp\u003eDo not roll your own threading primitives (mutexes, etc) from combinations of the Linux futex syscall, atomic counters, etc. These throw Helgrind\u0026#39;s internal what\u0026#39;s-going-on models way off course and will give bogus results.”\u003c/p\u003e\n\n\u003cp\u003e3- Looking over the valgrind reported events, it seems to me that the problem might very well be deep inside the getaddrinfo() call in the libc library.  So there may be nothing that can be done from the libcurl side.  Right now, I would have to dig further into the dns resolver code to have a better understanding of the issue and what exactly could be impacted by the data race.  Sorry I jumped the gun and should have dug more before reporting.\u003c/p\u003e\n\n\u003cp\u003eRegarding the comment about reorganizing the url list causing problems to disappear, that now seems to be not related to this dns issue, but some other issue uncovered regarding openssl when running really slowly due to helgrind.  I would need to investigate that and could end up as some issue with the openssl library, most likely has nothing to do with libcurl.\u003c/p\u003e\n","automated_response":false,"created_at":"2020-10-29T16:46:39.356Z","updated_at":"2020-10-29T16:46:39.356Z","actor":{"username":"brumbrum","cleared":false,"url":"/brumbrum","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"curl","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":9674743,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"As a test, I'll try to use c-ares instead of the glibc dns resolver.  I'll have something to compare to.","markdown_message":"\u003cp\u003eAs a test, I\u0026#39;ll try to use c-ares instead of the glibc dns resolver.  I\u0026#39;ll have something to compare to.\u003c/p\u003e\n","automated_response":false,"created_at":"2020-10-29T19:40:36.442Z","updated_at":"2020-10-29T19:40:36.442Z","actor":{"username":"brumbrum","cleared":false,"url":"/brumbrum","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"curl","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":9676619,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"1 - such kind of problem could only happen to an insecure data transfer since both TLS and SSH would otherwise already have refused the connection. An insecure data transfer is already insecure by nature as it could also easily be MITMed or DNS-spoofed without the client being able to tell.\n\nBut okay, it would be a bad bug if that happens and would probably still be considered a security flaw, especially if it would be possible to somehow trigger or control by a third party.\n\n2 - I have not spent a lot of time analyzing these valgrind reports because A) you could change them by changing the order of the URLs and that seems very suspect. B) we've had the threaded resolver for over 15 years and we've shipped curl with the threaded resolver enabled by default for over three years and not once (during the last decade at least) have we gotten reports about curl connecting to the wrong IP address or having crashed in the name resolver thread. C) the caveats about using the proper function calls. I don't know what that means to valgrind. Perhaps we're not doing things kosher according to it?\n\nI'm sorry, I realize it is a little lame and anecdotally but if you cannot actually show curl crash or do something wrong here, then I will lean towards **not** trusting those valgrind warnings.","markdown_message":"\u003cp\u003e1 - such kind of problem could only happen to an insecure data transfer since both TLS and SSH would otherwise already have refused the connection. An insecure data transfer is already insecure by nature as it could also easily be MITMed or DNS-spoofed without the client being able to tell.\u003c/p\u003e\n\n\u003cp\u003eBut okay, it would be a bad bug if that happens and would probably still be considered a security flaw, especially if it would be possible to somehow trigger or control by a third party.\u003c/p\u003e\n\n\u003cp\u003e2 - I have not spent a lot of time analyzing these valgrind reports because A) you could change them by changing the order of the URLs and that seems very suspect. B) we\u0026#39;ve had the threaded resolver for over 15 years and we\u0026#39;ve shipped curl with the threaded resolver enabled by default for over three years and not once (during the last decade at least) have we gotten reports about curl connecting to the wrong IP address or having crashed in the name resolver thread. C) the caveats about using the proper function calls. I don\u0026#39;t know what that means to valgrind. Perhaps we\u0026#39;re not doing things kosher according to it?\u003c/p\u003e\n\n\u003cp\u003eI\u0026#39;m sorry, I realize it is a little lame and anecdotally but if you cannot actually show curl crash or do something wrong here, then I will lean towards \u003cstrong\u003enot\u003c/strong\u003e trusting those valgrind warnings.\u003c/p\u003e\n","automated_response":false,"created_at":"2020-10-29T23:10:01.687Z","updated_at":"2020-10-29T23:10:01.687Z","actor":{"username":"bagder","cleared":false,"url":"/bagder","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/459/380/963f64725677dda4f5113219588e7d0c1ab9abaa_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"curl","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":9677093,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"1- Completely agree with you.\n\n2A- I'm hoping I haven't cause some confusion here, to be clear the reordering of the url list doesn't impact the race condition reports from helgrind in any way.  \n\nThe reordering of the url list impacts these errors messages only:\n\nR: 16 - Error in the HTTP2 framing layer \u003chttps://www.microsoft.com\u003e\nR: 16 - Error in the HTTP2 framing layer \u003chttps://www.google.com\u003e\nR: 35 - SSL connect error \u003chttps://www.mysql.com\u003e\nR: 52 - Server returned nothing (no headers, no data) \u003chttps://www.bbc.co.uk\u003e\nR: 55 - Failed sending data to the peer \u003chttps://www.google.com\u003e\n\nIf I shuffle the url order and change some from https to http, then these errors above stop being reported, and yes I find that suspicious too and have seems such behavior before.  When I encountered it it was due to two threads not being synchronized and sometimes things happening in different order leading to random behaviors.   As the problem is only easily seen while using helgrind leads me to think that it is a performance based issue.\n\nThese errors are most likely NOT due to dns threaded resolver; and are SSL/TLS related instead. \n\nSo we have two issues mixed together.  Hopefully I did not confuse matters here.\n\nDo you feel this SSL/TLS problem deserves more attention and might be the more important issue to resolve?  I'm thinking it is. Might be a rare problem with parallel downloads.  Any one else report random problems in parallel mode, while using SSL/TLS? \n\n\n2B- I found these old posting that I think you got it right back 10 years ago.\n\nhttps://curl.haxx.se/mail/lib-2010-12/0117.html\nhttps://curl.haxx.se/mail/lib-2010-12/0140.html\n\nFrom what I can gather reading various other posts, glibc developers use a lot of special optimizations and I think that helgrind can not be fully trusted to deal with them reliably.  Also helgrind has a suppression file that attempts to deal with the false positives, and there are a number of glibc suppression entries in there.  Seems likely that they should add at least one more entry for the getaddrinfo() call.  \n\nSuppression file on my system is at: /usr/lib/x86_64-linux-gnu/valgrind/default.supp\n\nAttaching my copy of default.supp to this comment.  In it you can see various suppression for libc and glibc.\n\nUsing a very simple multi-thread test tool that calls getaddrinfo() once per thread, I was able to generate similar helgrind reports, where it is very obvious that if there is a problem it must be in glibc or helgrind is reporting a false positive.\n\nI agree with you that I have not seen any actual bad behavior that can clearly be related to getaddrinfo() so yes, this is looking more like a false alarm.\n\nPlease accept my apologies for this.\n\n\n2C- As far as I can tell curl is not doing anything wrong with the function calls.  In fact using getaddrinfo() is the correct thing to do when used the resolver in a multi-threaded application.  Problem is most likely helgrind not being able to deal in a reliable way with glibc getaddrinfo().  False positive seems like the right call until better proof can be found.\n","markdown_message":"\u003cp\u003e1- Completely agree with you.\u003c/p\u003e\n\n\u003cp\u003e2A- I\u0026#39;m hoping I haven\u0026#39;t cause some confusion here, to be clear the reordering of the url list doesn\u0026#39;t impact the race condition reports from helgrind in any way.  \u003c/p\u003e\n\n\u003cp\u003eThe reordering of the url list impacts these errors messages only:\u003c/p\u003e\n\n\u003cp\u003eR: 16 - Error in the HTTP2 framing layer \u003ca title=\"https://www.microsoft.com\" href=\"/redirect?url=https%3A%2F%2Fwww.microsoft.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://www.microsoft.com\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003cbr\u003e\nR: 16 - Error in the HTTP2 framing layer \u003ca title=\"https://www.google.com\" href=\"/redirect?url=https%3A%2F%2Fwww.google.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://www.google.com\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003cbr\u003e\nR: 35 - SSL connect error \u003ca title=\"https://www.mysql.com\" href=\"/redirect?url=https%3A%2F%2Fwww.mysql.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://www.mysql.com\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003cbr\u003e\nR: 52 - Server returned nothing (no headers, no data) \u003ca title=\"https://www.bbc.co.uk\" href=\"/redirect?url=https%3A%2F%2Fwww.bbc.co.uk\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://www.bbc.co.uk\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003cbr\u003e\nR: 55 - Failed sending data to the peer \u003ca title=\"https://www.google.com\" href=\"/redirect?url=https%3A%2F%2Fwww.google.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://www.google.com\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eIf I shuffle the url order and change some from https to http, then these errors above stop being reported, and yes I find that suspicious too and have seems such behavior before.  When I encountered it it was due to two threads not being synchronized and sometimes things happening in different order leading to random behaviors.   As the problem is only easily seen while using helgrind leads me to think that it is a performance based issue.\u003c/p\u003e\n\n\u003cp\u003eThese errors are most likely NOT due to dns threaded resolver; and are SSL/TLS related instead. \u003c/p\u003e\n\n\u003cp\u003eSo we have two issues mixed together.  Hopefully I did not confuse matters here.\u003c/p\u003e\n\n\u003cp\u003eDo you feel this SSL/TLS problem deserves more attention and might be the more important issue to resolve?  I\u0026#39;m thinking it is. Might be a rare problem with parallel downloads.  Any one else report random problems in parallel mode, while using SSL/TLS? \u003c/p\u003e\n\n\u003cp\u003e2B- I found these old posting that I think you got it right back 10 years ago.\u003c/p\u003e\n\n\u003cp\u003e\u003ca title=\"https://curl.haxx.se/mail/lib-2010-12/0117.html\" href=\"/redirect?url=https%3A%2F%2Fcurl.haxx.se%2Fmail%2Flib-2010-12%2F0117.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://curl.haxx.se/mail/lib-2010-12/0117.html\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003cbr\u003e\n\u003ca title=\"https://curl.haxx.se/mail/lib-2010-12/0140.html\" href=\"/redirect?url=https%3A%2F%2Fcurl.haxx.se%2Fmail%2Flib-2010-12%2F0140.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://curl.haxx.se/mail/lib-2010-12/0140.html\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eFrom what I can gather reading various other posts, glibc developers use a lot of special optimizations and I think that helgrind can not be fully trusted to deal with them reliably.  Also helgrind has a suppression file that attempts to deal with the false positives, and there are a number of glibc suppression entries in there.  Seems likely that they should add at least one more entry for the getaddrinfo() call.  \u003c/p\u003e\n\n\u003cp\u003eSuppression file on my system is at: /usr/lib/x86_64-linux-gnu/valgrind/default.supp\u003c/p\u003e\n\n\u003cp\u003eAttaching my copy of default.supp to this comment.  In it you can see various suppression for libc and glibc.\u003c/p\u003e\n\n\u003cp\u003eUsing a very simple multi-thread test tool that calls getaddrinfo() once per thread, I was able to generate similar helgrind reports, where it is very obvious that if there is a problem it must be in glibc or helgrind is reporting a false positive.\u003c/p\u003e\n\n\u003cp\u003eI agree with you that I have not seen any actual bad behavior that can clearly be related to getaddrinfo() so yes, this is looking more like a false alarm.\u003c/p\u003e\n\n\u003cp\u003ePlease accept my apologies for this.\u003c/p\u003e\n\n\u003cp\u003e2C- As far as I can tell curl is not doing anything wrong with the function calls.  In fact using getaddrinfo() is the correct thing to do when used the resolver in a multi-threaded application.  Problem is most likely helgrind not being able to deal in a reliable way with glibc getaddrinfo().  False positive seems like the right call until better proof can be found.\u003c/p\u003e\n","automated_response":false,"created_at":"2020-10-30T01:07:09.915Z","updated_at":"2020-10-30T01:07:09.915Z","actor":{"username":"brumbrum","cleared":false,"url":"/brumbrum","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"curl","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":9677099,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Forgot the my suppression file.  Attaching it.","markdown_message":"\u003cp\u003eForgot the my suppression file.  Attaching it.\u003c/p\u003e\n","automated_response":false,"created_at":"2020-10-30T01:08:15.968Z","updated_at":"2020-10-30T01:08:15.968Z","actor":{"username":"brumbrum","cleared":false,"url":"/brumbrum","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":null},"attachments":[{"id":1057659,"filename":"default.supp","type":"application/octet-stream","url":"https://hackerone-us-west-2-production-attachments.s3.us-west-2.amazonaws.com/GEooBoqA5SMuFMiNqM3UpHR9?response-content-disposition=attachment%3B%20filename%3D%22default.supp%22%3B%20filename%2A%3DUTF-8%27%27default.supp\u0026response-content-type=application%2Foctet-stream\u0026X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=ASIAQGK6FURQWS7SVX5C%2F20201229%2Fus-west-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20201229T041159Z\u0026X-Amz-Expires=3600\u0026X-Amz-SignedHeaders=host\u0026X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJv%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCICTltBX5kZS78yzw3IUUt%2Fa035OzgQ2vLu8U1ZxOKGilAiEAqT8jxmclsgLwaEL5fi7C70iqLwP7J3SWF5ypfn%2Fn%2BdUqtAMIVBABGgwwMTM2MTkyNzQ4NDkiDGRWkSc4Hmgq8mMXKCqRA0Pq%2Bzgh6dptjyRB4GzYO9sir45RVm0RyvFSB8lDBYTBiDIVL0nR3Ah5epkHqGDZZEh0G%2BfKYu%2FWpfgxJl7qllLzKg%2BOA0izVs9KPgQdxk0VWwW%2FPKL2ZT4v%2FSNRvF7rPUbZ7WhGTZqx0%2BinzKM%2BO6lDyXZKNKMzhjRnIFdI7Th01c4ma39imTXQDmxc%2FNzHFK40lrkAbTZoTlcq%2BsnIcIRSB0h4GHasXhR5OHx8rifULR7sVKHDcZMCzSYjrtagaKs9I81LEzlSbEGxIQar2MK%2BZBwmpT57aT%2F1nIOoa%2FlH5nfP4Ihcv4Mqfp19pFx8mlVoMe%2FTEx0pqNuC4lGQXowSDJKBcSjrYM6ouddZWfwY6R4O8X69XqZawGSrmBiXyAVG%2BDj895xbDJhiOXMvqkvSfsEzIfvcaHAzshzNZjFT3yiN4h81wfUF3QuLc6DHCTt1MPDYiUB8I7UCQ8wJxW4pg3xTnHqSwUeqww3YY8RFfsgvfp9PzGJ1s4vReFrzuzYVanpT22oz4w33z29yMPmMMO21qv8FOusBOsYr4rmEPt9wYTc2WNI63vM9u2VUhGNHafH2%2Fh3q6i%2BwJ0u2HLCQd44aqHfWZ%2Bc8hzInEQnRNrZf7owYuE4cHiraWaOsNJjfOEJBZu5nzzun4JSk7801NfOqa1zcgLMWOwyWJCtalb9fGn6qhwTWTBMzsOFHc661yyW%2FaqejCIRf6%2BwNOGhO8kc%2BEhEIq0iydp5k4rlMRKlFJPFlphrQYGeZgYr9TM%2FVgHlN%2Bx4Oxtcg1UwCGXMGiV%2BqXzeMEmO%2FdxKETdJJvF%2BEaJSsF0r1i7s8g61czrgyi9MKMpia%2Fg6ovVFkrvHOejV96g%3D%3D\u0026X-Amz-Signature=62bab80273ae951d7f74d02584dca1d52c3fe6793021dc4bae9023e6095a6d19"}],"genius_execution_id":null,"team_handle":"curl","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":9684377,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"If you think you can find any real and substantial problem in there, then we can keep this issue open for more days for you, otherwise I think you can close it for now. We can always create a new one if we actually run into something serious at a later point.","markdown_message":"\u003cp\u003eIf you think you can find any real and substantial problem in there, then we can keep this issue open for more days for you, otherwise I think you can close it for now. We can always create a new one if we actually run into something serious at a later point.\u003c/p\u003e\n","automated_response":false,"created_at":"2020-10-30T14:41:44.247Z","updated_at":"2020-10-30T14:41:44.247Z","actor":{"username":"bagder","cleared":false,"url":"/bagder","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/459/380/963f64725677dda4f5113219588e7d0c1ab9abaa_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"curl","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":9685105,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Sounds good.  I'll do my best to report back on Monday, if I made any progress.  Have a great weekend.","markdown_message":"\u003cp\u003eSounds good.  I\u0026#39;ll do my best to report back on Monday, if I made any progress.  Have a great weekend.\u003c/p\u003e\n","automated_response":false,"created_at":"2020-10-30T15:59:39.480Z","updated_at":"2020-10-30T15:59:39.480Z","actor":{"username":"brumbrum","cleared":false,"url":"/brumbrum","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"curl","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":9698273,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"I did a small investigation into the various docs/examples/10-at-a-time.c failures when running under valgrind/helgrind, resulting in some sites failing with various error codes as below:\n\nR: 7 - Couldn't connect to server \u003chttps://www.mysql.com\u003e\nR: 18 - Transferred a partial file \u003chttps://www.ebay.com\u003e\nR: 35 - SSL connect error \u003chttps://www.google.com\u003e\nR: 52 - Server returned nothing (no headers, no data) \u003chttps://www.informationweek.com\u003e\nR: 55 - Failed sending data to the peer \u003chttps://www.ietf.org\u003e\nR: 56 - Failure when receiving data from the peer \u003chttps://www.google.com\u003e\n\n\nTo exclude that this was not some helgrind artifact causing misbehavior in the 10-at-a-time process, I was able to reproduce the issue (without using helgrind) using the 'stress' tool to artificially overload the CPU and starve the libcurl client (and the whole system in fact).  In some other tests I also used the 'cpulimit' tool to only limit the 10-at-a-time process CPU availability, with similar success in reproducing the issue. As I am using a VM I also did some of the testing with a single vCPU allocated to the VM.\n\nAlso if I changed the multi_setopt option CURLMOPT_MAXCONNECTS to a larger number, then the problem got worse as the number was further increased, as the share of the CPU needed to manage each of the additional connections was reduced, leading to more failures being triggered.\n\nI looked at the traffic with wireshark,, after some specific times (5, 10, 15, 20 seconds) the server end is returning packets with FIN/ACK.  Many times the RST/ACK (connection reset) is also seen coming from the server.  Suggesting that the remote end is timing out and shutting down the communication.  Some of the sites are not showing failures, suggesting that they have much longer timeouts.\n\nI looked at www.bbc.co.uk specifically as it is the site that was failing more reliably and the results suggest a 5 second timeout for that site.\n\nAttaching some screen captures of wireshark output, showing the FIN/ACK and RST/ACK coming from remote end. The client side IP address is 10.0.2.4.\n","markdown_message":"\u003cp\u003eI did a small investigation into the various docs/examples/10-at-a-time.c failures when running under valgrind/helgrind, resulting in some sites failing with various error codes as below:\u003c/p\u003e\n\n\u003cp\u003eR: 7 - Couldn\u0026#39;t connect to server \u003ca title=\"https://www.mysql.com\" href=\"/redirect?url=https%3A%2F%2Fwww.mysql.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://www.mysql.com\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003cbr\u003e\nR: 18 - Transferred a partial file \u003ca title=\"https://www.ebay.com\" href=\"/redirect?url=https%3A%2F%2Fwww.ebay.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://www.ebay.com\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003cbr\u003e\nR: 35 - SSL connect error \u003ca title=\"https://www.google.com\" href=\"/redirect?url=https%3A%2F%2Fwww.google.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://www.google.com\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003cbr\u003e\nR: 52 - Server returned nothing (no headers, no data) \u003ca title=\"https://www.informationweek.com\" href=\"/redirect?url=https%3A%2F%2Fwww.informationweek.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://www.informationweek.com\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003cbr\u003e\nR: 55 - Failed sending data to the peer \u003ca title=\"https://www.ietf.org\" href=\"/redirect?url=https%3A%2F%2Fwww.ietf.org\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://www.ietf.org\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003cbr\u003e\nR: 56 - Failure when receiving data from the peer \u003ca title=\"https://www.google.com\" href=\"/redirect?url=https%3A%2F%2Fwww.google.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://www.google.com\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eTo exclude that this was not some helgrind artifact causing misbehavior in the 10-at-a-time process, I was able to reproduce the issue (without using helgrind) using the \u0026#39;stress\u0026#39; tool to artificially overload the CPU and starve the libcurl client (and the whole system in fact).  In some other tests I also used the \u0026#39;cpulimit\u0026#39; tool to only limit the 10-at-a-time process CPU availability, with similar success in reproducing the issue. As I am using a VM I also did some of the testing with a single vCPU allocated to the VM.\u003c/p\u003e\n\n\u003cp\u003eAlso if I changed the multi_setopt option CURLMOPT_MAXCONNECTS to a larger number, then the problem got worse as the number was further increased, as the share of the CPU needed to manage each of the additional connections was reduced, leading to more failures being triggered.\u003c/p\u003e\n\n\u003cp\u003eI looked at the traffic with wireshark,, after some specific times (5, 10, 15, 20 seconds) the server end is returning packets with FIN/ACK.  Many times the RST/ACK (connection reset) is also seen coming from the server.  Suggesting that the remote end is timing out and shutting down the communication.  Some of the sites are not showing failures, suggesting that they have much longer timeouts.\u003c/p\u003e\n\n\u003cp\u003eI looked at \u003ca href=\"/redirect?url=http%3A%2F%2Fwww.bbc.co.uk\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ewww.bbc.co.uk\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e specifically as it is the site that was failing more reliably and the results suggest a 5 second timeout for that site.\u003c/p\u003e\n\n\u003cp\u003eAttaching some screen captures of wireshark output, showing the FIN/ACK and RST/ACK coming from remote end. The client side IP address is 10.0.2.4.\u003c/p\u003e\n","automated_response":false,"created_at":"2020-11-02T02:30:18.426Z","updated_at":"2020-11-02T02:30:18.426Z","actor":{"username":"brumbrum","cleared":false,"url":"/brumbrum","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":null},"attachments":[{"id":1061044,"filename":"Screenshot_from_2020-11-01_16-22-41.png","type":"image/png","url":"https://hackerone-us-west-2-production-attachments.s3.us-west-2.amazonaws.com/rzYgiNz9BUXRaDhdZcgkfeYt?response-content-disposition=attachment%3B%20filename%3D%22Screenshot_from_2020-11-01_16-22-41.png%22%3B%20filename%2A%3DUTF-8%27%27Screenshot_from_2020-11-01_16-22-41.png\u0026response-content-type=image%2Fpng\u0026X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=ASIAQGK6FURQWS7SVX5C%2F20201229%2Fus-west-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20201229T041159Z\u0026X-Amz-Expires=3600\u0026X-Amz-SignedHeaders=host\u0026X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJv%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCICTltBX5kZS78yzw3IUUt%2Fa035OzgQ2vLu8U1ZxOKGilAiEAqT8jxmclsgLwaEL5fi7C70iqLwP7J3SWF5ypfn%2Fn%2BdUqtAMIVBABGgwwMTM2MTkyNzQ4NDkiDGRWkSc4Hmgq8mMXKCqRA0Pq%2Bzgh6dptjyRB4GzYO9sir45RVm0RyvFSB8lDBYTBiDIVL0nR3Ah5epkHqGDZZEh0G%2BfKYu%2FWpfgxJl7qllLzKg%2BOA0izVs9KPgQdxk0VWwW%2FPKL2ZT4v%2FSNRvF7rPUbZ7WhGTZqx0%2BinzKM%2BO6lDyXZKNKMzhjRnIFdI7Th01c4ma39imTXQDmxc%2FNzHFK40lrkAbTZoTlcq%2BsnIcIRSB0h4GHasXhR5OHx8rifULR7sVKHDcZMCzSYjrtagaKs9I81LEzlSbEGxIQar2MK%2BZBwmpT57aT%2F1nIOoa%2FlH5nfP4Ihcv4Mqfp19pFx8mlVoMe%2FTEx0pqNuC4lGQXowSDJKBcSjrYM6ouddZWfwY6R4O8X69XqZawGSrmBiXyAVG%2BDj895xbDJhiOXMvqkvSfsEzIfvcaHAzshzNZjFT3yiN4h81wfUF3QuLc6DHCTt1MPDYiUB8I7UCQ8wJxW4pg3xTnHqSwUeqww3YY8RFfsgvfp9PzGJ1s4vReFrzuzYVanpT22oz4w33z29yMPmMMO21qv8FOusBOsYr4rmEPt9wYTc2WNI63vM9u2VUhGNHafH2%2Fh3q6i%2BwJ0u2HLCQd44aqHfWZ%2Bc8hzInEQnRNrZf7owYuE4cHiraWaOsNJjfOEJBZu5nzzun4JSk7801NfOqa1zcgLMWOwyWJCtalb9fGn6qhwTWTBMzsOFHc661yyW%2FaqejCIRf6%2BwNOGhO8kc%2BEhEIq0iydp5k4rlMRKlFJPFlphrQYGeZgYr9TM%2FVgHlN%2Bx4Oxtcg1UwCGXMGiV%2BqXzeMEmO%2FdxKETdJJvF%2BEaJSsF0r1i7s8g61czrgyi9MKMpia%2Fg6ovVFkrvHOejV96g%3D%3D\u0026X-Amz-Signature=dc0abb5c87157501a8210e2759a976fc3aab11c44cd6a4914775cfdf004852e7"},{"id":1061043,"filename":"Screenshot_from_2020-11-01_16-17-27.png","type":"image/png","url":"https://hackerone-us-west-2-production-attachments.s3.us-west-2.amazonaws.com/UQZSUPpX5u4L1FDYQNxa459i?response-content-disposition=attachment%3B%20filename%3D%22Screenshot_from_2020-11-01_16-17-27.png%22%3B%20filename%2A%3DUTF-8%27%27Screenshot_from_2020-11-01_16-17-27.png\u0026response-content-type=image%2Fpng\u0026X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=ASIAQGK6FURQWS7SVX5C%2F20201229%2Fus-west-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20201229T041159Z\u0026X-Amz-Expires=3600\u0026X-Amz-SignedHeaders=host\u0026X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJv%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCICTltBX5kZS78yzw3IUUt%2Fa035OzgQ2vLu8U1ZxOKGilAiEAqT8jxmclsgLwaEL5fi7C70iqLwP7J3SWF5ypfn%2Fn%2BdUqtAMIVBABGgwwMTM2MTkyNzQ4NDkiDGRWkSc4Hmgq8mMXKCqRA0Pq%2Bzgh6dptjyRB4GzYO9sir45RVm0RyvFSB8lDBYTBiDIVL0nR3Ah5epkHqGDZZEh0G%2BfKYu%2FWpfgxJl7qllLzKg%2BOA0izVs9KPgQdxk0VWwW%2FPKL2ZT4v%2FSNRvF7rPUbZ7WhGTZqx0%2BinzKM%2BO6lDyXZKNKMzhjRnIFdI7Th01c4ma39imTXQDmxc%2FNzHFK40lrkAbTZoTlcq%2BsnIcIRSB0h4GHasXhR5OHx8rifULR7sVKHDcZMCzSYjrtagaKs9I81LEzlSbEGxIQar2MK%2BZBwmpT57aT%2F1nIOoa%2FlH5nfP4Ihcv4Mqfp19pFx8mlVoMe%2FTEx0pqNuC4lGQXowSDJKBcSjrYM6ouddZWfwY6R4O8X69XqZawGSrmBiXyAVG%2BDj895xbDJhiOXMvqkvSfsEzIfvcaHAzshzNZjFT3yiN4h81wfUF3QuLc6DHCTt1MPDYiUB8I7UCQ8wJxW4pg3xTnHqSwUeqww3YY8RFfsgvfp9PzGJ1s4vReFrzuzYVanpT22oz4w33z29yMPmMMO21qv8FOusBOsYr4rmEPt9wYTc2WNI63vM9u2VUhGNHafH2%2Fh3q6i%2BwJ0u2HLCQd44aqHfWZ%2Bc8hzInEQnRNrZf7owYuE4cHiraWaOsNJjfOEJBZu5nzzun4JSk7801NfOqa1zcgLMWOwyWJCtalb9fGn6qhwTWTBMzsOFHc661yyW%2FaqejCIRf6%2BwNOGhO8kc%2BEhEIq0iydp5k4rlMRKlFJPFlphrQYGeZgYr9TM%2FVgHlN%2Bx4Oxtcg1UwCGXMGiV%2BqXzeMEmO%2FdxKETdJJvF%2BEaJSsF0r1i7s8g61czrgyi9MKMpia%2Fg6ovVFkrvHOejV96g%3D%3D\u0026X-Amz-Signature=90515c64a425ce8fdb1ac248cd44d96049ac8af2c17fba8d6a923eb0f1308c25"},{"id":1061042,"filename":"Screenshot_from_2020-11-01_16-13-34.png","type":"image/png","url":"https://hackerone-us-west-2-production-attachments.s3.us-west-2.amazonaws.com/MDfeqqfxeTxTvmMcJyUXD5ho?response-content-disposition=attachment%3B%20filename%3D%22Screenshot_from_2020-11-01_16-13-34.png%22%3B%20filename%2A%3DUTF-8%27%27Screenshot_from_2020-11-01_16-13-34.png\u0026response-content-type=image%2Fpng\u0026X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=ASIAQGK6FURQWS7SVX5C%2F20201229%2Fus-west-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20201229T041159Z\u0026X-Amz-Expires=3600\u0026X-Amz-SignedHeaders=host\u0026X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJv%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCICTltBX5kZS78yzw3IUUt%2Fa035OzgQ2vLu8U1ZxOKGilAiEAqT8jxmclsgLwaEL5fi7C70iqLwP7J3SWF5ypfn%2Fn%2BdUqtAMIVBABGgwwMTM2MTkyNzQ4NDkiDGRWkSc4Hmgq8mMXKCqRA0Pq%2Bzgh6dptjyRB4GzYO9sir45RVm0RyvFSB8lDBYTBiDIVL0nR3Ah5epkHqGDZZEh0G%2BfKYu%2FWpfgxJl7qllLzKg%2BOA0izVs9KPgQdxk0VWwW%2FPKL2ZT4v%2FSNRvF7rPUbZ7WhGTZqx0%2BinzKM%2BO6lDyXZKNKMzhjRnIFdI7Th01c4ma39imTXQDmxc%2FNzHFK40lrkAbTZoTlcq%2BsnIcIRSB0h4GHasXhR5OHx8rifULR7sVKHDcZMCzSYjrtagaKs9I81LEzlSbEGxIQar2MK%2BZBwmpT57aT%2F1nIOoa%2FlH5nfP4Ihcv4Mqfp19pFx8mlVoMe%2FTEx0pqNuC4lGQXowSDJKBcSjrYM6ouddZWfwY6R4O8X69XqZawGSrmBiXyAVG%2BDj895xbDJhiOXMvqkvSfsEzIfvcaHAzshzNZjFT3yiN4h81wfUF3QuLc6DHCTt1MPDYiUB8I7UCQ8wJxW4pg3xTnHqSwUeqww3YY8RFfsgvfp9PzGJ1s4vReFrzuzYVanpT22oz4w33z29yMPmMMO21qv8FOusBOsYr4rmEPt9wYTc2WNI63vM9u2VUhGNHafH2%2Fh3q6i%2BwJ0u2HLCQd44aqHfWZ%2Bc8hzInEQnRNrZf7owYuE4cHiraWaOsNJjfOEJBZu5nzzun4JSk7801NfOqa1zcgLMWOwyWJCtalb9fGn6qhwTWTBMzsOFHc661yyW%2FaqejCIRf6%2BwNOGhO8kc%2BEhEIq0iydp5k4rlMRKlFJPFlphrQYGeZgYr9TM%2FVgHlN%2Bx4Oxtcg1UwCGXMGiV%2BqXzeMEmO%2FdxKETdJJvF%2BEaJSsF0r1i7s8g61czrgyi9MKMpia%2Fg6ovVFkrvHOejV96g%3D%3D\u0026X-Amz-Signature=c36a55967ad7c96acc395720bf4a16bb570eba9f83c3f0b0919d48a6c113c118"},{"id":1061041,"filename":"Screenshot_from_2020-11-01_16-11-53.png","type":"image/png","url":"https://hackerone-us-west-2-production-attachments.s3.us-west-2.amazonaws.com/qZZtcYXpsDHsD5eUj6i3oCpJ?response-content-disposition=attachment%3B%20filename%3D%22Screenshot_from_2020-11-01_16-11-53.png%22%3B%20filename%2A%3DUTF-8%27%27Screenshot_from_2020-11-01_16-11-53.png\u0026response-content-type=image%2Fpng\u0026X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=ASIAQGK6FURQWS7SVX5C%2F20201229%2Fus-west-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20201229T041159Z\u0026X-Amz-Expires=3600\u0026X-Amz-SignedHeaders=host\u0026X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJv%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCICTltBX5kZS78yzw3IUUt%2Fa035OzgQ2vLu8U1ZxOKGilAiEAqT8jxmclsgLwaEL5fi7C70iqLwP7J3SWF5ypfn%2Fn%2BdUqtAMIVBABGgwwMTM2MTkyNzQ4NDkiDGRWkSc4Hmgq8mMXKCqRA0Pq%2Bzgh6dptjyRB4GzYO9sir45RVm0RyvFSB8lDBYTBiDIVL0nR3Ah5epkHqGDZZEh0G%2BfKYu%2FWpfgxJl7qllLzKg%2BOA0izVs9KPgQdxk0VWwW%2FPKL2ZT4v%2FSNRvF7rPUbZ7WhGTZqx0%2BinzKM%2BO6lDyXZKNKMzhjRnIFdI7Th01c4ma39imTXQDmxc%2FNzHFK40lrkAbTZoTlcq%2BsnIcIRSB0h4GHasXhR5OHx8rifULR7sVKHDcZMCzSYjrtagaKs9I81LEzlSbEGxIQar2MK%2BZBwmpT57aT%2F1nIOoa%2FlH5nfP4Ihcv4Mqfp19pFx8mlVoMe%2FTEx0pqNuC4lGQXowSDJKBcSjrYM6ouddZWfwY6R4O8X69XqZawGSrmBiXyAVG%2BDj895xbDJhiOXMvqkvSfsEzIfvcaHAzshzNZjFT3yiN4h81wfUF3QuLc6DHCTt1MPDYiUB8I7UCQ8wJxW4pg3xTnHqSwUeqww3YY8RFfsgvfp9PzGJ1s4vReFrzuzYVanpT22oz4w33z29yMPmMMO21qv8FOusBOsYr4rmEPt9wYTc2WNI63vM9u2VUhGNHafH2%2Fh3q6i%2BwJ0u2HLCQd44aqHfWZ%2Bc8hzInEQnRNrZf7owYuE4cHiraWaOsNJjfOEJBZu5nzzun4JSk7801NfOqa1zcgLMWOwyWJCtalb9fGn6qhwTWTBMzsOFHc661yyW%2FaqejCIRf6%2BwNOGhO8kc%2BEhEIq0iydp5k4rlMRKlFJPFlphrQYGeZgYr9TM%2FVgHlN%2Bx4Oxtcg1UwCGXMGiV%2BqXzeMEmO%2FdxKETdJJvF%2BEaJSsF0r1i7s8g61czrgyi9MKMpia%2Fg6ovVFkrvHOejV96g%3D%3D\u0026X-Amz-Signature=5c254f48824fe2402ddebc2416805832e798080989d6a9bfb7ae4506f35443f6"},{"id":1061040,"filename":"Screenshot_from_2020-11-01_16-11-43.png","type":"image/png","url":"https://hackerone-us-west-2-production-attachments.s3.us-west-2.amazonaws.com/fqgdPdfi2yERPosskBq7UihB?response-content-disposition=attachment%3B%20filename%3D%22Screenshot_from_2020-11-01_16-11-43.png%22%3B%20filename%2A%3DUTF-8%27%27Screenshot_from_2020-11-01_16-11-43.png\u0026response-content-type=image%2Fpng\u0026X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=ASIAQGK6FURQWS7SVX5C%2F20201229%2Fus-west-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20201229T041159Z\u0026X-Amz-Expires=3600\u0026X-Amz-SignedHeaders=host\u0026X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJv%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCICTltBX5kZS78yzw3IUUt%2Fa035OzgQ2vLu8U1ZxOKGilAiEAqT8jxmclsgLwaEL5fi7C70iqLwP7J3SWF5ypfn%2Fn%2BdUqtAMIVBABGgwwMTM2MTkyNzQ4NDkiDGRWkSc4Hmgq8mMXKCqRA0Pq%2Bzgh6dptjyRB4GzYO9sir45RVm0RyvFSB8lDBYTBiDIVL0nR3Ah5epkHqGDZZEh0G%2BfKYu%2FWpfgxJl7qllLzKg%2BOA0izVs9KPgQdxk0VWwW%2FPKL2ZT4v%2FSNRvF7rPUbZ7WhGTZqx0%2BinzKM%2BO6lDyXZKNKMzhjRnIFdI7Th01c4ma39imTXQDmxc%2FNzHFK40lrkAbTZoTlcq%2BsnIcIRSB0h4GHasXhR5OHx8rifULR7sVKHDcZMCzSYjrtagaKs9I81LEzlSbEGxIQar2MK%2BZBwmpT57aT%2F1nIOoa%2FlH5nfP4Ihcv4Mqfp19pFx8mlVoMe%2FTEx0pqNuC4lGQXowSDJKBcSjrYM6ouddZWfwY6R4O8X69XqZawGSrmBiXyAVG%2BDj895xbDJhiOXMvqkvSfsEzIfvcaHAzshzNZjFT3yiN4h81wfUF3QuLc6DHCTt1MPDYiUB8I7UCQ8wJxW4pg3xTnHqSwUeqww3YY8RFfsgvfp9PzGJ1s4vReFrzuzYVanpT22oz4w33z29yMPmMMO21qv8FOusBOsYr4rmEPt9wYTc2WNI63vM9u2VUhGNHafH2%2Fh3q6i%2BwJ0u2HLCQd44aqHfWZ%2Bc8hzInEQnRNrZf7owYuE4cHiraWaOsNJjfOEJBZu5nzzun4JSk7801NfOqa1zcgLMWOwyWJCtalb9fGn6qhwTWTBMzsOFHc661yyW%2FaqejCIRf6%2BwNOGhO8kc%2BEhEIq0iydp5k4rlMRKlFJPFlphrQYGeZgYr9TM%2FVgHlN%2Bx4Oxtcg1UwCGXMGiV%2BqXzeMEmO%2FdxKETdJJvF%2BEaJSsF0r1i7s8g61czrgyi9MKMpia%2Fg6ovVFkrvHOejV96g%3D%3D\u0026X-Amz-Signature=9ebefb1d2bdbbc25354e36880d074b05012145a7296ff3848ac6b927ce2da9c0"},{"id":1061039,"filename":"Screenshot_from_2020-11-01_15-54-54.png","type":"image/png","url":"https://hackerone-us-west-2-production-attachments.s3.us-west-2.amazonaws.com/Xiv4WgEKbyvERKceFmTpSkKz?response-content-disposition=attachment%3B%20filename%3D%22Screenshot_from_2020-11-01_15-54-54.png%22%3B%20filename%2A%3DUTF-8%27%27Screenshot_from_2020-11-01_15-54-54.png\u0026response-content-type=image%2Fpng\u0026X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=ASIAQGK6FURQWS7SVX5C%2F20201229%2Fus-west-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20201229T041159Z\u0026X-Amz-Expires=3600\u0026X-Amz-SignedHeaders=host\u0026X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJv%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCICTltBX5kZS78yzw3IUUt%2Fa035OzgQ2vLu8U1ZxOKGilAiEAqT8jxmclsgLwaEL5fi7C70iqLwP7J3SWF5ypfn%2Fn%2BdUqtAMIVBABGgwwMTM2MTkyNzQ4NDkiDGRWkSc4Hmgq8mMXKCqRA0Pq%2Bzgh6dptjyRB4GzYO9sir45RVm0RyvFSB8lDBYTBiDIVL0nR3Ah5epkHqGDZZEh0G%2BfKYu%2FWpfgxJl7qllLzKg%2BOA0izVs9KPgQdxk0VWwW%2FPKL2ZT4v%2FSNRvF7rPUbZ7WhGTZqx0%2BinzKM%2BO6lDyXZKNKMzhjRnIFdI7Th01c4ma39imTXQDmxc%2FNzHFK40lrkAbTZoTlcq%2BsnIcIRSB0h4GHasXhR5OHx8rifULR7sVKHDcZMCzSYjrtagaKs9I81LEzlSbEGxIQar2MK%2BZBwmpT57aT%2F1nIOoa%2FlH5nfP4Ihcv4Mqfp19pFx8mlVoMe%2FTEx0pqNuC4lGQXowSDJKBcSjrYM6ouddZWfwY6R4O8X69XqZawGSrmBiXyAVG%2BDj895xbDJhiOXMvqkvSfsEzIfvcaHAzshzNZjFT3yiN4h81wfUF3QuLc6DHCTt1MPDYiUB8I7UCQ8wJxW4pg3xTnHqSwUeqww3YY8RFfsgvfp9PzGJ1s4vReFrzuzYVanpT22oz4w33z29yMPmMMO21qv8FOusBOsYr4rmEPt9wYTc2WNI63vM9u2VUhGNHafH2%2Fh3q6i%2BwJ0u2HLCQd44aqHfWZ%2Bc8hzInEQnRNrZf7owYuE4cHiraWaOsNJjfOEJBZu5nzzun4JSk7801NfOqa1zcgLMWOwyWJCtalb9fGn6qhwTWTBMzsOFHc661yyW%2FaqejCIRf6%2BwNOGhO8kc%2BEhEIq0iydp5k4rlMRKlFJPFlphrQYGeZgYr9TM%2FVgHlN%2Bx4Oxtcg1UwCGXMGiV%2BqXzeMEmO%2FdxKETdJJvF%2BEaJSsF0r1i7s8g61czrgyi9MKMpia%2Fg6ovVFkrvHOejV96g%3D%3D\u0026X-Amz-Signature=a9b57257968ab53a87becb00f5c4956dfd419ede6996006f42f15700f926d178"}],"genius_execution_id":null,"team_handle":"curl","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":9698278,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Really sorry for the false report. Should be safe to close it down.","markdown_message":"\u003cp\u003eReally sorry for the false report. Should be safe to close it down.\u003c/p\u003e\n","automated_response":false,"created_at":"2020-11-02T02:35:35.214Z","updated_at":"2020-11-02T02:35:35.214Z","actor":{"username":"brumbrum","cleared":false,"url":"/brumbrum","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"curl","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":9699406,"is_internal":false,"editable":false,"type":"Activities::BugInformative","message":"Thanks for all the details","markdown_message":"\u003cp\u003eThanks for all the details\u003c/p\u003e\n","automated_response":false,"created_at":"2020-11-02T08:11:39.833Z","updated_at":"2020-11-02T08:11:39.833Z","actor":{"username":"bagder","cleared":false,"url":"/bagder","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/459/380/963f64725677dda4f5113219588e7d0c1ab9abaa_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"curl","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":9725172,"is_internal":false,"editable":false,"type":"Activities::AgreedOnGoingPublic","message":"Might be useful to disclose this one in case similar questions are raised at a later time.  Would give a clue where to start investigating.  Also I may followup with valgrind or gnu glibc, to get their inputs.  I will back here to this report and put some links if I do.\nThank you.","markdown_message":"\u003cp\u003eMight be useful to disclose this one in case similar questions are raised at a later time.  Would give a clue where to start investigating.  Also I may followup with valgrind or gnu glibc, to get their inputs.  I will back here to this report and put some links if I do.\u003cbr\u003e\nThank you.\u003c/p\u003e\n","automated_response":false,"created_at":"2020-11-04T15:48:54.819Z","updated_at":"2020-11-04T15:48:54.819Z","first_to_agree":true,"actor":{"username":"brumbrum","cleared":false,"url":"/brumbrum","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"curl","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":9727920,"is_internal":false,"editable":false,"type":"Activities::AgreedOnGoingPublic","message":"+1","markdown_message":"\u003cp\u003e+1\u003c/p\u003e\n","automated_response":false,"created_at":"2020-11-04T21:44:37.529Z","updated_at":"2020-11-04T21:44:37.529Z","actor":{"username":"bagder","cleared":false,"url":"/bagder","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/459/380/963f64725677dda4f5113219588e7d0c1ab9abaa_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"curl","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":9727921,"is_internal":false,"editable":false,"type":"Activities::ReportBecamePublic","message":"","markdown_message":"","automated_response":false,"created_at":"2020-11-04T21:44:37.638Z","updated_at":"2020-11-04T21:44:37.638Z","actor":{"username":"bagder","cleared":false,"url":"/bagder","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/459/380/963f64725677dda4f5113219588e7d0c1ab9abaa_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"curl","actor_is_team_member":true,"actor_is_concealed_member":false}],"activity_page_count":1,"activity_page_number":1,"summaries":[{"category":"team","can_view?":true,"can_create?":false},{"category":"researcher","can_view?":true,"can_create?":false}]}