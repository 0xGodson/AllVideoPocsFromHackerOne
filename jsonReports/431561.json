{"id":431561,"global_id":"Z2lkOi8vaGFja2Vyb25lL1JlcG9ydC80MzE1NjE=","url":"https://hackerone.com/reports/431561","title":"Specially constructed multi-part requests cause multi-second response times; vulnerable to DoS","state":"Closed","substate":"resolved","severity_rating":"medium","readable_substate":"Resolved","created_at":"2018-10-31T00:31:56.429Z","submitted_at":"2018-10-31T00:31:56.429Z","is_member_of_team?":false,"reporter":{"disabled":false,"username":"bjeanes","url":"/bjeanes","profile_picture_urls":{"small":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"is_me?":false,"cleared":false,"hackerone_triager":false,"hacker_mediation":false},"team":{"id":22,"url":"https://hackerone.com/rails","handle":"rails","profile_picture_urls":{"small":"https://profile-photos.hackerone-user-content.com/variants/000/000/022/5e2b46658c8b86bed62f574d8e1793f353cbbc63_original.png/3afcb5c896247e7ee8ada31b1c1eb8657e22241f911093acfe4ec7e97a3a959a","medium":"https://profile-photos.hackerone-user-content.com/variants/000/000/022/5e2b46658c8b86bed62f574d8e1793f353cbbc63_original.png/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"permissions":[],"submission_state":"open","default_currency":"usd","awards_miles":false,"offers_bounties":true,"state":"public_mode","only_cleared_hackers":false,"profile":{"name":"Ruby on Rails","twitter_handle":null,"website":"http://rubyonrails.org/security","about":"Web development that doesn't hurt."}},"has_bounty?":true,"in_validation?":false,"rejected_anc_report_that_can_be_sent_back_to_anc_triagers?":false,"can_view_team":true,"can_view_report":true,"is_external_bug":false,"is_published":false,"is_participant":false,"stage":4,"public":true,"visibility":"full","cve_ids":["CVE-2018-16470"],"singular_disclosure_disabled":false,"disclosed_at":"2018-12-05T21:46:17.275Z","bug_reporter_agreed_on_going_public_at":null,"team_member_agreed_on_going_public_at":"2018-11-05T21:46:09.389Z","comments_closed?":false,"facebook_team?":false,"team_private?":false,"vulnerability_information":"The multi-part body parsing in Rack and consequently Rails has a worse-than-linear performance relative to the number of parts in the request body.\n\nIn small scale (i.e. non-disruptive) tests on a variety of Rails applications on the internet, including my own, GitHub.com, Heroku API, Instacart, Shopify, Bugcrowd, and others, it was trivial to cause request servicing to take long enough to cause gateway timeouts. It would not be particularly difficult to generate enough of these requests to tie up the majority of web serving resources for a typical Rails application.\n\nThis vulnerability has also been separately disclosed to rack-core mailing list by me.\n\n## Steps To Reproduce:\n\nI've created a script that can be run here against any Rack-based application: https://gist.github.com/bjeanes/63580e27c197885d4b07160fae132108\n\nBy default it generates a request body with 10,000 parts which, in my testing, was enough to cause GitHub API to take between 15-25 seconds to service the request once the request transfer had completed.\n\n## Addendum\n\nSome benchmarking of Rack is included here, which was also sent to rack-core:\n\n```\nN = number of parts, \nboundary used is as generated by Chrome, but larger boundaries cause\nhigher impact\n\nRehearsal --------------------------------------------\nN: 1       0.032670   0.006635   0.039305 (  0.044159)\nN: 100     0.008245   0.001319   0.009564 (  0.009971)\nN: 1000    0.149332   0.079087   0.228419 (  0.255769)\nN: 2000    0.398711   0.276931   0.675642 (  0.691356)\nN: 5000    2.254126   1.569181   3.823307 (  3.871649)\nN: 10000   7.134949   4.350681  11.485630 ( 12.083888)\nN: 20000  15.946187  10.491861  26.438048 ( 28.684177)\n---------------------------------- total: 42.699915sec\n\n               user     system      total        real\nN: 1       0.000372   0.000003   0.000375 (  0.000371)\nN: 100     0.004889   0.000021   0.004910 (  0.004977)\nN: 1000    0.117571   0.015548   0.133119 (  0.192915)\nN: 2000    0.468934   0.309703   0.778637 (  0.870675)\nN: 5000    2.086055   1.482317   3.568372 (  3.830543)\nN: 10000   7.110589   4.488229  11.598818 ( 12.110710)\nN: 20000  14.559701   9.948678  24.508379 ( 25.537332)\n```\n\nThis is not technically in the Rails codebase, but it is in a non-optional dependency of every Rails application. Furthermore, I did receive some feedback from core members that a Rack vulnerability is likely to be eligible for this bounty: https://twitter.com/_matthewd/status/1057266505056800768.\n\nDiscovered by Bo Jeanes (@bjeanes) and Jack Chen (@chendo) and vetted after the fact by Charlie Somerville (@charliesome).\n\n## Impact\n\nResource starvation of web request servicing, by causing multiple long-running requests. Attack can be constructed with just a HTML web form, making it literally click-button easy. That it can be generated from a form also has potential implications when combined with XSS or some other mechanism where an attacker could cause arbitrary user agents en masse to send such requests.","vulnerability_information_html":"\u003cp\u003eThe multi-part body parsing in Rack and consequently Rails has a worse-than-linear performance relative to the number of parts in the request body.\u003c/p\u003e\n\n\u003cp\u003eIn small scale (i.e. non-disruptive) tests on a variety of Rails applications on the internet, including my own, GitHub.com, Heroku API, Instacart, Shopify, Bugcrowd, and others, it was trivial to cause request servicing to take long enough to cause gateway timeouts. It would not be particularly difficult to generate enough of these requests to tie up the majority of web serving resources for a typical Rails application.\u003c/p\u003e\n\n\u003cp\u003eThis vulnerability has also been separately disclosed to rack-core mailing list by me.\u003c/p\u003e\n\n\u003ch2 id=\"steps-to-reproduce\"\u003eSteps To Reproduce:\u003c/h2\u003e\n\n\u003cp\u003eI\u0026#39;ve created a script that can be run here against any Rack-based application: \u003ca title=\"https://gist.github.com/bjeanes/63580e27c197885d4b07160fae132108\" href=\"/redirect?url=https%3A%2F%2Fgist.github.com%2Fbjeanes%2F63580e27c197885d4b07160fae132108\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://gist.github.com/bjeanes/63580e27c197885d4b07160fae132108\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eBy default it generates a request body with 10,000 parts which, in my testing, was enough to cause GitHub API to take between 15-25 seconds to service the request once the request transfer had completed.\u003c/p\u003e\n\n\u003ch2 id=\"addendum\"\u003eAddendum\u003c/h2\u003e\n\n\u003cp\u003eSome benchmarking of Rack is included here, which was also sent to rack-core:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003eN = number of parts, \nboundary used is as generated by Chrome, but larger boundaries cause\nhigher impact\n\nRehearsal --------------------------------------------\nN: 1       0.032670   0.006635   0.039305 (  0.044159)\nN: 100     0.008245   0.001319   0.009564 (  0.009971)\nN: 1000    0.149332   0.079087   0.228419 (  0.255769)\nN: 2000    0.398711   0.276931   0.675642 (  0.691356)\nN: 5000    2.254126   1.569181   3.823307 (  3.871649)\nN: 10000   7.134949   4.350681  11.485630 ( 12.083888)\nN: 20000  15.946187  10.491861  26.438048 ( 28.684177)\n---------------------------------- total: 42.699915sec\n\n               user     system      total        real\nN: 1       0.000372   0.000003   0.000375 (  0.000371)\nN: 100     0.004889   0.000021   0.004910 (  0.004977)\nN: 1000    0.117571   0.015548   0.133119 (  0.192915)\nN: 2000    0.468934   0.309703   0.778637 (  0.870675)\nN: 5000    2.086055   1.482317   3.568372 (  3.830543)\nN: 10000   7.110589   4.488229  11.598818 ( 12.110710)\nN: 20000  14.559701   9.948678  24.508379 ( 25.537332)\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eThis is not technically in the Rails codebase, but it is in a non-optional dependency of every Rails application. Furthermore, I did receive some feedback from core members that a Rack vulnerability is likely to be eligible for this bounty: \u003ca title=\"https://twitter.com/_matthewd/status/1057266505056800768\" href=\"/redirect?url=https%3A%2F%2Ftwitter.com%2F_matthewd%2Fstatus%2F1057266505056800768\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://twitter.com/_matthewd/status/1057266505056800768\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e.\u003c/p\u003e\n\n\u003cp\u003eDiscovered by Bo Jeanes (@bjeanes) and Jack Chen (@chendo) and vetted after the fact by Charlie Somerville (@charliesome).\u003c/p\u003e\n\n\u003ch2 id=\"impact\"\u003eImpact\u003c/h2\u003e\n\n\u003cp\u003eResource starvation of web request servicing, by causing multiple long-running requests. Attack can be constructed with just a HTML web form, making it literally click-button easy. That it can be generated from a form also has potential implications when combined with XSS or some other mechanism where an attacker could cause arbitrary user agents en masse to send such requests.\u003c/p\u003e\n","bounty_amount":"1500.0","formatted_bounty":"$1,500","original_report_id":null,"original_report_url":null,"attachments":[],"allow_singular_disclosure_at":"2018-12-05T21:46:09.452Z","allow_singular_disclosure_after":-65175074.3685509,"singular_disclosure_allowed":true,"vote_count":17,"voters":["bjeanes","bl4de","leetboi","sameerphad72","mygf","eveeez","geeknik","an0nym0us","peeper35","khizer47","and 7 more..."],"severity":{"rating":"medium","score":5.3,"author_type":"User","metrics":{"attack_vector":"network","attack_complexity":"low","privileges_required":"none","user_interaction":"none","scope":"unchanged","confidentiality":"none","integrity":"none","availability":"low"}},"structured_scope":{"databaseId":160,"asset_type":"SOURCE_CODE","asset_identifier":"https://github.com/rails/rails","max_severity":"critical"},"abilities":{"assignable_team_members":[],"assignable_team_member_groups":[]},"can_edit_custom_fields_attributes":false,"activities":[{"id":3564133,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Hey Bo!\n\nThanks for jumping through the extra reporting hoops!\n\nIf it's not reproducible on master, I think this is https://github.com/rack/rack/pull/1288 -- which has its own issues, now being addressed by https://github.com/rack/rack/pull/1309.\n\nDoes that sound plausible to you?","markdown_message":"\u003cp\u003eHey Bo!\u003c/p\u003e\n\n\u003cp\u003eThanks for jumping through the extra reporting hoops!\u003c/p\u003e\n\n\u003cp\u003eIf it\u0026#39;s not reproducible on master, I think this is \u003ca title=\"https://github.com/rack/rack/pull/1288\" href=\"/redirect?url=https%3A%2F%2Fgithub.com%2Frack%2Frack%2Fpull%2F1288\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://github.com/rack/rack/pull/1288\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e -- which has its own issues, now being addressed by \u003ca title=\"https://github.com/rack/rack/pull/1309\" href=\"/redirect?url=https%3A%2F%2Fgithub.com%2Frack%2Frack%2Fpull%2F1309\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://github.com/rack/rack/pull/1309\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e.\u003c/p\u003e\n\n\u003cp\u003eDoes that sound plausible to you?\u003c/p\u003e\n","automated_response":false,"created_at":"2018-10-31T15:54:22.308Z","updated_at":"2018-10-31T15:54:22.308Z","actor":{"username":"matthewd","cleared":false,"url":"/matthewd","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/011/558/5df350e99e2e86f74de4e3bf90de8880ac877b25_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"rails","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":3565758,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"I mentioned this on the mailing list, but I was able to bisect the problem to this commit: \nhttps://github.com/rack/rack/pull/1192/commits/ee0174822f9c4e939bd810c3e906554a7137973d\n\nThe changes on master seem too big to backport, so I'd prefer if we just revert this commit on the 2-0-stable branch.\n\nThoughts?","markdown_message":"\u003cp\u003eI mentioned this on the mailing list, but I was able to bisect the problem to this commit: \u003cbr\u003e\n\u003ca title=\"https://github.com/rack/rack/pull/1192/commits/ee0174822f9c4e939bd810c3e906554a7137973d\" href=\"/redirect?url=https%3A%2F%2Fgithub.com%2Frack%2Frack%2Fpull%2F1192%2Fcommits%2Fee0174822f9c4e939bd810c3e906554a7137973d\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://github.com/rack/rack/pull/1192/commits/ee0174822f9c4e939bd810c3e906554a7137973d\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eThe changes on master seem too big to backport, so I\u0026#39;d prefer if we just revert this commit on the 2-0-stable branch.\u003c/p\u003e\n\n\u003cp\u003eThoughts?\u003c/p\u003e\n","automated_response":false,"created_at":"2018-10-31T18:28:04.724Z","updated_at":"2018-10-31T18:28:04.724Z","actor":{"username":"tenderlove","cleared":false,"url":"/tenderlove","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/003/318/60d828744b5d16813ecbf975fdc453dc4a933f4f_original.png/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"rails","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":3566177,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Hi @matthewd and @tenderlove that all makes total sense. \n\n@tenderlove reverting ee0174822 will mean that https://github.com/rack/rack/issues/1075 is still a problem though.\n\nI am getting dropped as a recipient to replies on rack-core FYI. I still haven't received anything since the last message I sent. If any of it was meant for me, I'd love if you could re-send to me there. I think Google Groups is a bit weird in the presence of CCs or something...","markdown_message":"\u003cp\u003eHi \u003ca href=\"/matthewd\"\u003e@matthewd\u003c/a\u003e and \u003ca href=\"/tenderlove\"\u003e@tenderlove\u003c/a\u003e that all makes total sense. \u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"/tenderlove\"\u003e@tenderlove\u003c/a\u003e reverting ee0174822 will mean that \u003ca title=\"https://github.com/rack/rack/issues/1075\" href=\"/redirect?url=https%3A%2F%2Fgithub.com%2Frack%2Frack%2Fissues%2F1075\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://github.com/rack/rack/issues/1075\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e is still a problem though.\u003c/p\u003e\n\n\u003cp\u003eI am getting dropped as a recipient to replies on rack-core FYI. I still haven\u0026#39;t received anything since the last message I sent. If any of it was meant for me, I\u0026#39;d love if you could re-send to me there. I think Google Groups is a bit weird in the presence of CCs or something...\u003c/p\u003e\n","automated_response":false,"created_at":"2018-10-31T20:18:19.782Z","updated_at":"2018-10-31T20:18:19.782Z","actor":{"username":"bjeanes","cleared":false,"url":"/bjeanes","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"rails","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":3566344,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"\u003e I am getting dropped as a recipient to replies on rack-core FYI. I still haven't received anything since the last message I sent.\n\nBlah, I'm sorry.  I'm hitting \"reply-all\", so it *should* have gone to you.  Maybe Mail.app is to blame.  I responded with basically the same comment I put here (just reverting that one commit).\n\n\u003e @tenderlove reverting ee0174822 will mean that https://github.com/rack/rack/issues/1075 is still a problem though.\n\nI am OK with slowing down 200MB uploads if it means avoiding DoS for small uploads.  Presumably `master` will fix both cases, and people can still adjust the buffer size as demonstrated in https://github.com/rack/rack/issues/1075 until we ship master.\n\n@matthewd wdyt?","markdown_message":"\u003cblockquote\u003e\n\u003cp\u003eI am getting dropped as a recipient to replies on rack-core FYI. I still haven\u0026#39;t received anything since the last message I sent.\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003eBlah, I\u0026#39;m sorry.  I\u0026#39;m hitting \u0026quot;reply-all\u0026quot;, so it \u003cem\u003eshould\u003c/em\u003e have gone to you.  Maybe Mail.app is to blame.  I responded with basically the same comment I put here (just reverting that one commit).\u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"/tenderlove\"\u003e@tenderlove\u003c/a\u003e reverting ee0174822 will mean that \u003ca title=\"https://github.com/rack/rack/issues/1075\" href=\"/redirect?url=https%3A%2F%2Fgithub.com%2Frack%2Frack%2Fissues%2F1075\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://github.com/rack/rack/issues/1075\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e is still a problem though.\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003eI am OK with slowing down 200MB uploads if it means avoiding DoS for small uploads.  Presumably \u003ccode\u003emaster\u003c/code\u003e will fix both cases, and people can still adjust the buffer size as demonstrated in \u003ca title=\"https://github.com/rack/rack/issues/1075\" href=\"/redirect?url=https%3A%2F%2Fgithub.com%2Frack%2Frack%2Fissues%2F1075\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://github.com/rack/rack/issues/1075\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e until we ship master.\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"/matthewd\"\u003e@matthewd\u003c/a\u003e wdyt?\u003c/p\u003e\n","automated_response":false,"created_at":"2018-10-31T20:59:34.189Z","updated_at":"2018-10-31T20:59:34.189Z","actor":{"username":"tenderlove","cleared":false,"url":"/tenderlove","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/003/318/60d828744b5d16813ecbf975fdc453dc4a933f4f_original.png/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"rails","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":3567778,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"\u003e Blah, I'm sorry. I'm hitting \"reply-all\", so it should have gone to you.\n\nNo worries! I assume rack-core is set up to send messages from external people _as_ rack-core, so Mail doesn't even know that I should be a recipient.\n\n\u003e I am OK with slowing down 200MB uploads if it means avoiding DoS for small uploads\n\nAgreed; that's reasonable. IME, you're better off uploading large files somewhere else directly anyway. \n\nIncidentally, sending files to Rails instead of S3 is how I discovered this issue. We had a form on our site that POSTed an attachment but also had a bunch of generated checkboxes. A pathological case resulted in 5000+ checkboxes + a file field, and submitting that form was causing 504s.\n\nWhat do you think about yanking 2.0.4 \u0026 2.0.5? I was able to reproduce this on a scary number of high-profile targets (GitHub API, Heroku API, Shopify, etc). Esp given the fact that #1288 was opened publicly, a malicious hacker is probably pretty likely to discover this.","markdown_message":"\u003cblockquote\u003e\n\u003cp\u003eBlah, I\u0026#39;m sorry. I\u0026#39;m hitting \u0026quot;reply-all\u0026quot;, so it should have gone to you.\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003eNo worries! I assume rack-core is set up to send messages from external people \u003cu\u003eas\u003c/u\u003e rack-core, so Mail doesn\u0026#39;t even know that I should be a recipient.\u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003eI am OK with slowing down 200MB uploads if it means avoiding DoS for small uploads\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003eAgreed; that\u0026#39;s reasonable. IME, you\u0026#39;re better off uploading large files somewhere else directly anyway. \u003c/p\u003e\n\n\u003cp\u003eIncidentally, sending files to Rails instead of S3 is how I discovered this issue. We had a form on our site that POSTed an attachment but also had a bunch of generated checkboxes. A pathological case resulted in 5000+ checkboxes + a file field, and submitting that form was causing 504s.\u003c/p\u003e\n\n\u003cp\u003eWhat do you think about yanking 2.0.4 \u0026amp; 2.0.5? I was able to reproduce this on a scary number of high-profile targets (GitHub API, Heroku API, Shopify, etc). Esp given the fact that \u003ca href=\"/reports/1288\"\u003e#1288\u003c/a\u003e was opened publicly, a malicious hacker is probably pretty likely to discover this.\u003c/p\u003e\n","automated_response":false,"created_at":"2018-11-01T00:16:57.529Z","updated_at":"2018-11-01T00:16:57.529Z","actor":{"username":"bjeanes","cleared":false,"url":"/bjeanes","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"rails","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":3567796,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"\u003e and people can still adjust the buffer size as demonstrated in https://github.com/rack/rack/issues/1075 until we ship master.\n\nIf I understand the issue correctly, they can't do so without making themselves vulnerable to this type of DoS, even for versions older than 2.0.4, right? I can't do so right now, but I'll be happy to run my benchmark tonight on older Racks with the manual buffer size bump to confirm this.\n\nIf you choose to post a security advisory about these findings, it may be worth warning against increasing the buffer size on older versions, if this is indeed the case. ","markdown_message":"\u003cblockquote\u003e\n\u003cp\u003eand people can still adjust the buffer size as demonstrated in \u003ca title=\"https://github.com/rack/rack/issues/1075\" href=\"/redirect?url=https%3A%2F%2Fgithub.com%2Frack%2Frack%2Fissues%2F1075\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://github.com/rack/rack/issues/1075\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e until we ship master.\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003eIf I understand the issue correctly, they can\u0026#39;t do so without making themselves vulnerable to this type of DoS, even for versions older than 2.0.4, right? I can\u0026#39;t do so right now, but I\u0026#39;ll be happy to run my benchmark tonight on older Racks with the manual buffer size bump to confirm this.\u003c/p\u003e\n\n\u003cp\u003eIf you choose to post a security advisory about these findings, it may be worth warning against increasing the buffer size on older versions, if this is indeed the case. \u003c/p\u003e\n","automated_response":false,"created_at":"2018-11-01T00:27:21.538Z","updated_at":"2018-11-01T00:27:21.538Z","actor":{"username":"bjeanes","cleared":false,"url":"/bjeanes","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"rails","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":3570566,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"\u003e If I understand the issue correctly, they can't do so without making themselves vulnerable to this type of DoS, even for versions older than 2.0.4, right? I can't do so right now, but I'll be happy to run my benchmark tonight on older Racks with the manual buffer size bump to confirm this.\n\nYou don't need to. I confirmed that changing the buffer size is the only thing that introduces this.  I don't think people should do it, I'm just saying if a user cares about 200MB uploads more than avoiding a DoS, then by all means.  I just wouldn't recommend it.\n\n\u003e What do you think about yanking 2.0.4 \u0026 2.0.5? I was able to reproduce this on a scary number of high-profile targets (GitHub API, Heroku API, Shopify, etc). Esp given the fact that #1288 was opened publicly, a malicious hacker is probably pretty likely to discover this.\n\nWe don't typically yank gems in the case of a security release.  It will break builds, and yanking the gem won't cause people who are running it in production to stop running it.  Lets just get a fix / CVE shipped ASAP.  I'll write a CVE, and we should be able to ship this either Friday or Monday.  I dislike shipping on a Friday, but as you said, this is kind of public.","markdown_message":"\u003cblockquote\u003e\n\u003cp\u003eIf I understand the issue correctly, they can\u0026#39;t do so without making themselves vulnerable to this type of DoS, even for versions older than 2.0.4, right? I can\u0026#39;t do so right now, but I\u0026#39;ll be happy to run my benchmark tonight on older Racks with the manual buffer size bump to confirm this.\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003eYou don\u0026#39;t need to. I confirmed that changing the buffer size is the only thing that introduces this.  I don\u0026#39;t think people should do it, I\u0026#39;m just saying if a user cares about 200MB uploads more than avoiding a DoS, then by all means.  I just wouldn\u0026#39;t recommend it.\u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003eWhat do you think about yanking 2.0.4 \u0026amp; 2.0.5? I was able to reproduce this on a scary number of high-profile targets (GitHub API, Heroku API, Shopify, etc). Esp given the fact that \u003ca href=\"/reports/1288\"\u003e#1288\u003c/a\u003e was opened publicly, a malicious hacker is probably pretty likely to discover this.\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003eWe don\u0026#39;t typically yank gems in the case of a security release.  It will break builds, and yanking the gem won\u0026#39;t cause people who are running it in production to stop running it.  Lets just get a fix / CVE shipped ASAP.  I\u0026#39;ll write a CVE, and we should be able to ship this either Friday or Monday.  I dislike shipping on a Friday, but as you said, this is kind of public.\u003c/p\u003e\n","automated_response":false,"created_at":"2018-11-01T15:22:33.790Z","updated_at":"2018-11-01T15:22:33.790Z","actor":{"username":"tenderlove","cleared":false,"url":"/tenderlove","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/003/318/60d828744b5d16813ecbf975fdc453dc4a933f4f_original.png/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"rails","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":3572579,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Here's the CVE so far:\n\n```\n\nThere is a possible DoS vulnerability in the multipart parser in Rack. This\nvulnerability has been assigned the CVE identifier CVE-YYYY-XXXX.\n\nVersions Affected:  2.0.4, 2.0.5\nNot affected:       \u003c= 2.0.3\nFixed Versions:     2.0.6\n\nImpact\n------\nThere is a possible DoS vulnerability in the multipart parser in Rack.\nSpecially crafted requests can cause the multipart parser to enter a\npathological state, causing the parser to use CPU resources disproportionate to\nthe request size.\n\nImpacted code can look something like this:\n\n```\n  Rack::Request.new(env).params\n```\n\nBut any code that uses the multi-part parser may be vulnerable.\n\nAll users running an affected release should either upgrade or use one of the\nworkarounds immediately.\n\nReleases\n--------\nThe 2.0.6 release is available at the normal locations.\n\nWorkarounds\n-----------\nTo work around this issue, the following code can be used:\n\n```\nrequire \"rack/multipart/parser\"\n\nRack::Multipart::Parser.send :remove_const, :BUFSIZE\nRack::Multipart::Parser.const_set :BUFSIZE, 16384\n```\n\nPatches\n-------\nTo aid users who aren't able to upgrade immediately we have provided patches for\nthe two supported release series. They are in git-am format and consist of a\nsingle changeset.\n\n* 2-0-multipart-dos.patch - Patch for 2.0 series\n\nPlease note that only the 1.6.x and 2.0.x series are supported at present. Users\nof earlier unsupported releases are advised to upgrade as soon as possible as we\ncannot guarantee the continued availability of security fixes for unsupported\nreleases.\n\nCredits\n-------\n```\n\nI've also attached the patch.\n\n@bjeanes what should I put in Credits?","markdown_message":"\u003cp\u003eHere\u0026#39;s the CVE so far:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003e\nThere is a possible DoS vulnerability in the multipart parser in Rack. This\nvulnerability has been assigned the CVE identifier CVE-YYYY-XXXX.\n\nVersions Affected:  2.0.4, 2.0.5\nNot affected:       \u0026lt;= 2.0.3\nFixed Versions:     2.0.6\n\nImpact\n------\nThere is a possible DoS vulnerability in the multipart parser in Rack.\nSpecially crafted requests can cause the multipart parser to enter a\npathological state, causing the parser to use CPU resources disproportionate to\nthe request size.\n\nImpacted code can look something like this:\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eRack::Request.new(env).params\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003e\nBut any code that uses the multi-part parser may be vulnerable.\n\nAll users running an affected release should either upgrade or use one of the\nworkarounds immediately.\n\nReleases\n--------\nThe 2.0.6 release is available at the normal locations.\n\nWorkarounds\n-----------\nTo work around this issue, the following code can be used:\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003erequire \u0026quot;rack/multipart/parser\u0026quot;\u003c/p\u003e\n\n\u003cp\u003eRack::Multipart::Parser.send :remove_const, :BUFSIZE\u003cbr\u003e\nRack::Multipart::Parser.const_set :BUFSIZE, 16384\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003e\nPatches\n-------\nTo aid users who aren\u0026#39;t able to upgrade immediately we have provided patches for\nthe two supported release series. They are in git-am format and consist of a\nsingle changeset.\n\n* 2-0-multipart-dos.patch - Patch for 2.0 series\n\nPlease note that only the 1.6.x and 2.0.x series are supported at present. Users\nof earlier unsupported releases are advised to upgrade as soon as possible as we\ncannot guarantee the continued availability of security fixes for unsupported\nreleases.\n\nCredits\n-------\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eI\u0026#39;ve also attached the patch.\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"/bjeanes\"\u003e@bjeanes\u003c/a\u003e what should I put in Credits?\u003c/p\u003e\n","automated_response":false,"created_at":"2018-11-01T21:59:56.708Z","updated_at":"2018-11-01T21:59:56.708Z","actor":{"username":"tenderlove","cleared":false,"url":"/tenderlove","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/003/318/60d828744b5d16813ecbf975fdc453dc4a933f4f_original.png/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"attachments":[{"id":369649,"filename":"2-0-multipart-dos.patch","type":"text/x-diff","url":"https://hackerone-us-west-2-production-attachments.s3.us-west-2.amazonaws.com/000/369/649/7954f96e2fd249002351ba7942561e50df4a66d0/2-0-multipart-dos.patch?response-content-disposition=attachment%3B%20filename%3D%222-0-multipart-dos.patch%22%3B%20filename%2A%3DUTF-8%27%272-0-multipart-dos.patch\u0026response-content-type=text%2Fx-diff\u0026X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=ASIAQGK6FURQY55CA6OQ%2F20201229%2Fus-west-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20201229T055723Z\u0026X-Amz-Expires=3600\u0026X-Amz-SignedHeaders=host\u0026X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJn%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIEcehEzJ6wx5cJVBI4ifSuKdHpXuLtuSHmh8SQmXgyhZAiEAmRgGrwChBEkjjlBm%2FjlBtMcBhRzrhQNXyXI9xj%2BctvcqtAMIUhABGgwwMTM2MTkyNzQ4NDkiDAcHHyX1klaXROO7PiqRAwolqCQb1T1qFrFJAaWyztYE1JDBuzLZ4RwAyeKpcLUT4tyRqOd0dd8i4Q%2Bdjr6CKjIwT4czi1qgG1Zc64xBVWsgift2qy2JjNaoHLTUAc2KLDUNHA0TNoe8bX0oc8a%2FwT8uTFJC95SwDTvxHJ1p0gXKjQzsPS8Pmchr%2B084C8EjUen3Ep0CWQzdO%2FqpzpNi57wg8K7fKdB1QGnYNWoZdB5Oy5EISNv9tG0KxDsBpen93okG220BUzCnopM029Epvj2JEWxnATinRfem%2FweYutcyMAcCkbrgBQ8K8e1gHB5A%2B0u28Q%2FVcP31FhOWgULsAluXkn3GslCMytJCmgqijruu4ZYTEnan%2FWKY5YIAA7lqa3BGrYfkahBrQoqEjUUVdIMtzaJamU8Ar78sCeOuD1pmEl%2BL11bJnsiKfDWlGrVeGbAfhGOY8kc%2Fl0wOCOrTXSudIuxOce8DyfTk8hDaOyvB1s7B5C1EjmMCLhImkKwIX2OwfxK%2BL3R40TJMB8Cpgj1PZYAX4%2FoTvwQ2NE7lqB1NMJ2Eqv8FOusBa2sano2o9LnQ3Zz62xDTky5R5ZhcEoLoUN10wDcNGN%2Bl7jbC3Je6yQISTTUZUnFVUaCZviUohA31W7wKMqcULZ8gdS95RnBq56Jnr5mGBpMl01uOWWwq9VYekx0eqwrKG0fnJZt8nzuga5YXIEEdK00GhGaiOPPln2qn0JVgHc7HAmAbONUCYQPXTsMwDpIiMtxst0E4pt9%2BY%2Bmr5CmKeOg9Cr%2F3ZLSrZYQfcVbd%2BLr3n2r8jmT9zA0weoyT0PAWCkOVSyWi1l2NnOIuIVvfIX4Z6FKNLRAS%2BMDRVCl0b%2Bmn7Qq3MoosKsUkOQ%3D%3D\u0026X-Amz-Signature=f8a42a3ee09f0bd291f18895d2c2a6d684868b064884cab9f719aee83f6c7107"}],"genius_execution_id":null,"team_handle":"rails","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":3572583,"is_internal":false,"editable":false,"type":"Activities::BugTriaged","message":"","markdown_message":"","automated_response":false,"created_at":"2018-11-01T22:01:30.551Z","updated_at":"2018-11-01T22:01:30.551Z","actor":{"username":"tenderlove","cleared":false,"url":"/tenderlove","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/003/318/60d828744b5d16813ecbf975fdc453dc4a933f4f_original.png/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"rails","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":3573015,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"@tenderlove \n\n\u003e We don't typically yank gems in the case of a security release. It will break builds, and yanking the gem won't cause people who are running it in production to stop running it.\n\nAck. Makes 100% sense.\n\n\u003e Here's the CVE so far:\n\nThat looks good to me, except \"provided patches for the two supported release series.\" 1.6.x isn't vulnerable so there is only one patch. This could be a made a bit clearer, but is otherwise good IMO.\n\n\u003e @bjeanes what should I put in Credits?\n\n* Bo Jeanes\n* Jack \"chendo\" Chen\n\nI'm not sure if you want anything other than names, but our emails are me@bjeanes.com and me@chen.do if that metadata should be associated with it at all.\n\nI discovered it in my app, chendo helped isolate the cause and wrote the benchmark script. We ran our findings past Charlie Somerville (@charliesome) to help verify our intuitions that this was serious enough to merit a report since he's had more experience here. I certainly don't mind if he's credited too but I don't know if that would typically be the case.","markdown_message":"\u003cp\u003e\u003ca href=\"/tenderlove\"\u003e@tenderlove\u003c/a\u003e \u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003eWe don\u0026#39;t typically yank gems in the case of a security release. It will break builds, and yanking the gem won\u0026#39;t cause people who are running it in production to stop running it.\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003eAck. Makes 100% sense.\u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003eHere\u0026#39;s the CVE so far:\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003eThat looks good to me, except \u0026quot;provided patches for the two supported release series.\u0026quot; 1.6.x isn\u0026#39;t vulnerable so there is only one patch. This could be a made a bit clearer, but is otherwise good IMO.\u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"/bjeanes\"\u003e@bjeanes\u003c/a\u003e what should I put in Credits?\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cul\u003e\n\u003cli\u003eBo Jeanes\u003c/li\u003e\n\u003cli\u003eJack \u0026quot;chendo\u0026quot; Chen\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eI\u0026#39;m not sure if you want anything other than names, but our emails are \u003ca title=\"me@bjeanes.com\" href=\"mailto:me@bjeanes.com\" rel=\"nofollow noopener noreferrer\"\u003eme@bjeanes.com\u003c/a\u003e and \u003ca title=\"me@chen.do\" href=\"mailto:me@chen.do\" rel=\"nofollow noopener noreferrer\"\u003eme@chen.do\u003c/a\u003e if that metadata should be associated with it at all.\u003c/p\u003e\n\n\u003cp\u003eI discovered it in my app, chendo helped isolate the cause and wrote the benchmark script. We ran our findings past Charlie Somerville (@charliesome) to help verify our intuitions that this was serious enough to merit a report since he\u0026#39;s had more experience here. I certainly don\u0026#39;t mind if he\u0026#39;s credited too but I don\u0026#39;t know if that would typically be the case.\u003c/p\u003e\n","automated_response":false,"created_at":"2018-11-01T23:33:51.072Z","updated_at":"2018-11-01T23:33:51.072Z","actor":{"username":"bjeanes","cleared":false,"url":"/bjeanes","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"rails","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":3573018,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"\u003e That looks good to me, except \"provided patches for the two supported release series.\" 1.6.x isn't vulnerable so there is only one patch. This could be a made a bit clearer, but is otherwise good IMO.\n\nGood catch, I'll fix it.\n\nThe whole report is just free text basically, so I can put anything.  I'll put:\n\n```\nBo Jeanes \u003cme@bjeanes.com\u003e\nJack \"chendo\" Chen \u003cme@chen.do\u003e\n```","markdown_message":"\u003cblockquote\u003e\n\u003cp\u003eThat looks good to me, except \u0026quot;provided patches for the two supported release series.\u0026quot; 1.6.x isn\u0026#39;t vulnerable so there is only one patch. This could be a made a bit clearer, but is otherwise good IMO.\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003eGood catch, I\u0026#39;ll fix it.\u003c/p\u003e\n\n\u003cp\u003eThe whole report is just free text basically, so I can put anything.  I\u0026#39;ll put:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003eBo Jeanes \u0026lt;me@bjeanes.com\u0026gt;\nJack \u0026quot;chendo\u0026quot; Chen \u0026lt;me@chen.do\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","automated_response":false,"created_at":"2018-11-01T23:37:15.963Z","updated_at":"2018-11-01T23:37:15.963Z","actor":{"username":"tenderlove","cleared":false,"url":"/tenderlove","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/003/318/60d828744b5d16813ecbf975fdc453dc4a933f4f_original.png/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"rails","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":3573024,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Sounds great.\n\nI think the CVE could also mention that older versions that have manually increased `BUFSIZE` are also at risk. If not in CVE, there may be a more appropriate channel. What do you think?\n\nI'm not sure if you plan to release master as 2.0.6 or just re-release 2.0.5 with the patch applied as 2.0.6 (you had mentioned the fix being a bit tricky to back-port so I suspect the latter), but that might be important context for the above as only the eventual version released with all of master's changes will fix both issues, right?","markdown_message":"\u003cp\u003eSounds great.\u003c/p\u003e\n\n\u003cp\u003eI think the CVE could also mention that older versions that have manually increased \u003ccode\u003eBUFSIZE\u003c/code\u003e are also at risk. If not in CVE, there may be a more appropriate channel. What do you think?\u003c/p\u003e\n\n\u003cp\u003eI\u0026#39;m not sure if you plan to release master as 2.0.6 or just re-release 2.0.5 with the patch applied as 2.0.6 (you had mentioned the fix being a bit tricky to back-port so I suspect the latter), but that might be important context for the above as only the eventual version released with all of master\u0026#39;s changes will fix both issues, right?\u003c/p\u003e\n","automated_response":false,"created_at":"2018-11-01T23:40:53.631Z","updated_at":"2018-11-01T23:40:53.631Z","actor":{"username":"bjeanes","cleared":false,"url":"/bjeanes","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"rails","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":3573039,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"\u003e I think the CVE could also mention that older versions that have manually increased BUFSIZE are also at risk. If not in CVE, there may be a more appropriate channel. What do you think?\n\nThat sounds good, I'll add it.\n\n\u003e I'm not sure if you plan to release master as 2.0.6 or just re-release 2.0.5 with the patch applied as 2.0.6 (you had mentioned the fix being a bit tricky to back-port so I suspect the latter),\n\nI'm going to release from the 2-0-stable branch which doesn't have the other changes.\n\n\u003e might be important context for the above as only the eventual version released with all of master's changes will fix both issues, right?\n\nI don't think we need to mention it in the security issue.  Only people dealing with very large file uploads will be impacted.  Applying this security fix reintroduces that bug, but it's just a bug, and folks impacted by that bug can wait until master is released (they've been surviving just fine until version 2.0.4 anyway).","markdown_message":"\u003cblockquote\u003e\n\u003cp\u003eI think the CVE could also mention that older versions that have manually increased BUFSIZE are also at risk. If not in CVE, there may be a more appropriate channel. What do you think?\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003eThat sounds good, I\u0026#39;ll add it.\u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003eI\u0026#39;m not sure if you plan to release master as 2.0.6 or just re-release 2.0.5 with the patch applied as 2.0.6 (you had mentioned the fix being a bit tricky to back-port so I suspect the latter),\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003eI\u0026#39;m going to release from the 2-0-stable branch which doesn\u0026#39;t have the other changes.\u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003emight be important context for the above as only the eventual version released with all of master\u0026#39;s changes will fix both issues, right?\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003eI don\u0026#39;t think we need to mention it in the security issue.  Only people dealing with very large file uploads will be impacted.  Applying this security fix reintroduces that bug, but it\u0026#39;s just a bug, and folks impacted by that bug can wait until master is released (they\u0026#39;ve been surviving just fine until version 2.0.4 anyway).\u003c/p\u003e\n","automated_response":false,"created_at":"2018-11-01T23:49:12.507Z","updated_at":"2018-11-01T23:49:12.507Z","actor":{"username":"tenderlove","cleared":false,"url":"/tenderlove","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/003/318/60d828744b5d16813ecbf975fdc453dc4a933f4f_original.png/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"rails","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":3573053,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"👍\n\nLet me know if you need anything else from me.","markdown_message":"\u003cp\u003e👍\u003c/p\u003e\n\n\u003cp\u003eLet me know if you need anything else from me.\u003c/p\u003e\n","automated_response":false,"created_at":"2018-11-01T23:54:33.298Z","updated_at":"2018-11-01T23:54:33.298Z","actor":{"username":"bjeanes","cleared":false,"url":"/bjeanes","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"rails","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":3578269,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"👋 It's getting late here, so I'm going to ship this Monday morning PST.  Thanks!","markdown_message":"\u003cp\u003e👋 It\u0026#39;s getting late here, so I\u0026#39;m going to ship this Monday morning PST.  Thanks!\u003c/p\u003e\n","automated_response":false,"created_at":"2018-11-02T23:03:23.486Z","updated_at":"2018-11-02T23:03:23.486Z","actor":{"username":"tenderlove","cleared":false,"url":"/tenderlove","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/003/318/60d828744b5d16813ecbf975fdc453dc4a933f4f_original.png/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"rails","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":3590017,"is_internal":false,"editable":false,"type":"Activities::BountyAwarded","message":"","markdown_message":"","automated_response":false,"created_at":"2018-11-05T21:42:43.459Z","updated_at":"2018-11-05T21:42:43.459Z","actor":{"url":"/rails","ibb":true,"profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/000/022/5e2b46658c8b86bed62f574d8e1793f353cbbc63_original.png/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"profile":{"name":"Ruby on Rails"}},"bounty_amount":"1500.0","bounty_currency":"usd","bonus_amount":"0.0","genius_execution_id":null,"team_handle":"rails","collaborator":{"username":"bjeanes","url":"/bjeanes"},"actor_is_team_member":true,"actor_is_concealed_member":false},{"id":3590019,"is_internal":false,"editable":false,"type":"Activities::BugResolved","message":"","markdown_message":"","automated_response":false,"created_at":"2018-11-05T21:42:56.099Z","updated_at":"2018-11-05T21:42:56.099Z","actor":{"username":"tenderlove","cleared":false,"url":"/tenderlove","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/003/318/60d828744b5d16813ecbf975fdc453dc4a933f4f_original.png/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"reporter":{"username":"bjeanes","url":"/bjeanes"},"genius_execution_id":null,"team_handle":"rails","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":3590044,"is_internal":false,"editable":false,"type":"Activities::AgreedOnGoingPublic","message":"","markdown_message":"","automated_response":false,"created_at":"2018-11-05T21:46:09.418Z","updated_at":"2018-11-05T21:46:09.418Z","first_to_agree":true,"actor":{"username":"tenderlove","cleared":false,"url":"/tenderlove","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/003/318/60d828744b5d16813ecbf975fdc453dc4a933f4f_original.png/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"rails","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":3771548,"is_internal":false,"editable":false,"type":"Activities::ReportBecamePublic","message":"","markdown_message":"","automated_response":false,"created_at":"2018-12-05T21:46:17.298Z","updated_at":"2018-12-05T21:46:17.298Z","actor":{"url":"/rails","ibb":true,"profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/000/022/5e2b46658c8b86bed62f574d8e1793f353cbbc63_original.png/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"profile":{"name":"Ruby on Rails"}},"genius_execution_id":null,"team_handle":"rails","actor_is_team_member":false,"actor_is_concealed_member":false}],"activity_page_count":1,"activity_page_number":1,"summaries":[{"category":"team","can_view?":true,"can_create?":false},{"category":"researcher","can_view?":true,"can_create?":false}]}